(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[function(t,e,n){"use strict";t.exports=n(293)},function(t,e,n){var y=n(4),m=n(10),g=n(15),v=n(12),b=n(23),w="prototype",S=function(t,e,n){var r,i,o,a,s=t&S.F,u=t&S.G,c=t&S.S,l=t&S.P,f=t&S.B,h=u?y:c?y[e]||(y[e]={}):(y[e]||{})[w],p=u?m:m[e]||(m[e]={}),d=p[w]||(p[w]={});for(r in u&&(n=e),n)o=((i=!s&&h&&void 0!==h[r])?h:n)[r],a=f&&i?b(o,y):l&&"function"==typeof o?b(Function.call,o):o,h&&v(h,r,o,t&S.U),p[r]!=o&&g(p,r,a),l&&d[r]!=o&&(d[r]=o)};y.core=m,S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128,t.exports=S},function(t,e,n){t.exports=n(297)()},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(5);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(63)("wks"),i=n(33),o=n(4).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},function(t,e,n){var r=n(6),i=n(89),o=n(29),a=Object.defineProperty;e.f=n(9)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports=!n(3)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(27),i=Math.min;t.exports=function(t){return 0<t?i(r(t),9007199254740991):0}},function(t,e,n){var o=n(4),a=n(15),s=n(14),u=n(33)("src"),r="toString",i=Function[r],c=(""+i).split(r);n(10).inspectSource=function(t){return i.call(t)},(t.exports=function(t,e,n,r){var i="function"==typeof n;i&&(s(n,"name")||a(n,"name",e)),t[e]!==n&&(i&&(s(n,u)||a(n,u,t[e]?""+t[e]:c.join(String(e)))),t===o?t[e]=n:r?t[e]?t[e]=n:a(t,e,n):(delete t[e],a(t,e,n)))})(Function.prototype,r,function(){return"function"==typeof this&&this[u]||i.call(this)})},function(t,e,n){var r=n(1),i=n(3),a=n(26),s=/"/g,o=function(t,e,n,r){var i=String(a(t)),o="<"+e;return""!==n&&(o+=" "+n+'="'+String(r).replace(s,"&quot;")+'"'),o+">"+i+"</"+e+">"};t.exports=function(e,t){var n={};n[e]=t(o),r(r.P+r.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",n)}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(8),i=n(32);t.exports=n(9)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(48),i=n(26);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(26);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";function E(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}var T=n(0),r=n(2),o=n.n(r),_=o.a.shape({trySubscribe:o.a.func.isRequired,tryUnsubscribe:o.a.func.isRequired,notifyNestedSubs:o.a.func.isRequired,isSubscribed:o.a.func.isRequired}),C=o.a.shape({subscribe:o.a.func.isRequired,dispatch:o.a.func.isRequired,getState:o.a.func.isRequired});var i=function(i){var t;void 0===i&&(i="store");var n=i+"Subscription",e=function(r){E(e,r);var t=e.prototype;function e(t,e){var n;return(n=r.call(this,t,e)||this)[i]=t.store,n}return t.getChildContext=function(){var t;return(t={})[i]=this[i],t[n]=null,t},t.render=function(){return T.Children.only(this.props.children)},e}(T.Component);return e.propTypes={store:C.isRequired,children:o.a.element.isRequired},e.childContextTypes=((t={})[i]=C.isRequired,t[n]=_,t),e}();function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(){return(k=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function D(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],0<=e.indexOf(n)||(i[n]=t[n]);return i}var a=n(122),N=n.n(a),s=n(61),x=n.n(s),A=n(87),u={notify:function(){}};var O=function(){function t(t,e,n){this.store=t,this.parentSub=e,this.onStateChange=n,this.unsubscribe=null,this.listeners=u}var e=t.prototype;return e.addNestedSub=function(t){return this.trySubscribe(),this.listeners.subscribe(t)},e.notifyNestedSubs=function(){this.listeners.notify()},e.isSubscribed=function(){return Boolean(this.unsubscribe)},e.trySubscribe=function(){var n,r;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=(n=[],r=[],{clear:function(){n=r=null},notify:function(){for(var t=n=r,e=0;e<t.length;e++)t[e]()},get:function(){return r},subscribe:function(t){var e=!0;return r===n&&(r=n.slice()),r.push(t),function(){e&&null!==n&&(e=!1,r===n&&(r=n.slice()),r.splice(r.indexOf(t),1))}}}))},e.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=u)},t}(),P=0,R={};function M(){}function c(a,t){var e,n;void 0===t&&(t={});var r=t,i=r.getDisplayName,s=void 0===i?function(t){return"ConnectAdvanced("+t+")"}:i,o=r.methodName,u=void 0===o?"connectAdvanced":o,c=r.renderCountProp,l=void 0===c?void 0:c,f=r.shouldHandleStateChanges,h=void 0===f||f,p=r.storeKey,d=void 0===p?"store":p,y=r.withRef,m=void 0!==y&&y,g=D(r,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),v=d+"Subscription",b=P++,w=((e={})[d]=C,e[v]=_,e),S=((n={})[v]=_,n);return function(n){x()(Object(A.isValidElementType)(n),"You must pass a component to the function returned by "+u+". Instead received "+JSON.stringify(n));var t=n.displayName||n.name||"Component",i=s(t),o=k({},g,{getDisplayName:s,methodName:u,renderCountProp:l,shouldHandleStateChanges:h,storeKey:d,withRef:m,displayName:i,wrappedComponentName:t,WrappedComponent:n}),e=function(r){function t(t,e){var n;return(n=r.call(this,t,e)||this).version=b,n.state={},n.renderCount=0,n.store=t[d]||e[d],n.propsMode=Boolean(t[d]),n.setWrappedInstance=n.setWrappedInstance.bind(I(I(n))),x()(n.store,'Could not find "'+d+'" in either the context or props of "'+i+'". Either wrap the root component in a <Provider>, or explicitly pass "'+d+'" as a prop to "'+i+'".'),n.initSelector(),n.initSubscription(),n}E(t,r);var e=t.prototype;return e.getChildContext=function(){var t,e=this.propsMode?null:this.subscription;return(t={})[v]=e||this.context[v],t},e.componentDidMount=function(){h&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},e.componentWillReceiveProps=function(t){this.selector.run(t)},e.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},e.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=M,this.store=null,this.selector.run=M,this.selector.shouldComponentUpdate=!1},e.getWrappedInstance=function(){return x()(m,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+u+"() call."),this.wrappedInstance},e.setWrappedInstance=function(t){this.wrappedInstance=t},e.initSelector=function(){var n,r,i,t=a(this.store.dispatch,o);this.selector=(n=t,r=this.store,i={run:function(t){try{var e=n(r.getState(),t);(e!==i.props||i.error)&&(i.shouldComponentUpdate=!0,i.props=e,i.error=null)}catch(t){i.shouldComponentUpdate=!0,i.error=t}}}),this.selector.run(this.props)},e.initSubscription=function(){if(h){var t=(this.propsMode?this.props:this.context)[v];this.subscription=new O(this.store,t,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},e.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(R)):this.notifyNestedSubs()},e.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},e.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},e.addExtraProps=function(t){if(!(m||l||this.propsMode&&this.subscription))return t;var e=k({},t);return m&&(e.ref=this.setWrappedInstance),l&&(e[l]=this.renderCount++),this.propsMode&&this.subscription&&(e[v]=this.subscription),e},e.render=function(){var t=this.selector;if(t.shouldComponentUpdate=!1,t.error)throw t.error;return Object(T.createElement)(n,this.addExtraProps(t.props))},t}(T.Component);return e.WrappedComponent=n,e.displayName=i,e.childContextTypes=S,e.contextTypes=w,e.propTypes=w,N()(e,n)}}var l=Object.prototype.hasOwnProperty;function f(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function b(t,e){if(f(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!l.call(e,n[i])||!f(t[n[i]],e[n[i]]))return!1;return!0}var h=n(47);function p(i){return function(t,e){var n=i(t,e);function r(){return n}return r.dependsOnOwnProps=!1,r}}function d(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?Boolean(t.dependsOnOwnProps):1!==t.length}function y(i,t){return function(t,e){e.displayName;var r=function(t,e){return r.dependsOnOwnProps?r.mapToProps(t,e):r.mapToProps(t)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,e){r.mapToProps=i,r.dependsOnOwnProps=d(i);var n=r(t,e);return"function"==typeof n&&(r.mapToProps=n,r.dependsOnOwnProps=d(n),n=r(t,e)),n},r}}var m=[function(t){return"function"==typeof t?y(t):void 0},function(t){return t?void 0:p(function(t){return{dispatch:t}})},function(e){return e&&"object"==typeof e?p(function(t){return Object(h.b)(e,t)}):void 0}];var g=[function(t){return"function"==typeof t?y(t):void 0},function(t){return t?void 0:p(function(){return{}})}];function v(t,e,n){return k({},n,t,e)}var w=[function(t){return"function"==typeof t?(u=t,function(t,e){e.displayName;var i,o=e.pure,a=e.areMergedPropsEqual,s=!1;return function(t,e,n){var r=u(t,e,n);return s?o&&a(r,i)||(i=r):(s=!0,i=r),i}}):void 0;var u},function(t){return t?void 0:function(){return v}}];function S(n,r,i,o){return function(t,e){return i(n(t,e),r(o,e),e)}}function L(a,s,u,c,t){var l,f,h,p,d,y=t.areStatesEqual,m=t.areOwnPropsEqual,g=t.areStatePropsEqual,n=!1;function r(t,e){var n,r,i=!m(e,f),o=!y(t,l);return l=t,f=e,i&&o?(h=a(l,f),s.dependsOnOwnProps&&(p=s(c,f)),d=u(h,p,f)):i?(a.dependsOnOwnProps&&(h=a(l,f)),s.dependsOnOwnProps&&(p=s(c,f)),d=u(h,p,f)):(o&&(n=a(l,f),r=!g(n,h),h=n,r&&(d=u(h,p,f))),d)}return function(t,e){return n?r(t,e):(h=a(l=t,f=e),p=s(c,f),d=u(h,p,f),n=!0,d)}}function F(t,e){var n=e.initMapStateToProps,r=e.initMapDispatchToProps,i=e.initMergeProps,o=D(e,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(t,o),s=r(t,o),u=i(t,o);return(o.pure?L:S)(a,s,u,t,o)}function U(n,t,r){for(var e=t.length-1;0<=e;e--){var i=t[e](n);if(i)return i}return function(t,e){throw new Error("Invalid value of type "+typeof n+" for "+r+" argument when connecting component "+e.wrappedComponentName+".")}}function q(t,e){return t===e}var B,j,V,W,z,K,Q,G,H,Y,X,$,J=(V=(j=void 0===B?{}:B).connectHOC,W=void 0===V?c:V,z=j.mapStateToPropsFactories,K=void 0===z?g:z,Q=j.mapDispatchToPropsFactories,G=void 0===Q?m:Q,H=j.mergePropsFactories,Y=void 0===H?w:H,X=j.selectorFactory,$=void 0===X?F:X,function(t,e,n,r){void 0===r&&(r={});var i=r,o=i.pure,a=void 0===o||o,s=i.areStatesEqual,u=void 0===s?q:s,c=i.areOwnPropsEqual,l=void 0===c?b:c,f=i.areStatePropsEqual,h=void 0===f?b:f,p=i.areMergedPropsEqual,d=void 0===p?b:p,y=D(i,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),m=U(t,K,"mapStateToProps"),g=U(e,G,"mapDispatchToProps"),v=U(n,Y,"mergeProps");return W($,k({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:Boolean(t),initMapStateToProps:m,initMapDispatchToProps:g,initMergeProps:v,pure:a,areStatesEqual:u,areOwnPropsEqual:l,areStatePropsEqual:h,areMergedPropsEqual:d},y))});n.d(e,"a",function(){return i}),n.d(e,"b",function(){return J})},function(t,e,n){"use strict";var r=n(3);t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){var r=n(49),i=n(32),o=n(16),a=n(29),s=n(14),u=n(89),c=Object.getOwnPropertyDescriptor;e.f=n(9)?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var i=n(1),o=n(10),a=n(3);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],r={};r[t]=e(n),i(i.S+i.F*a(function(){n(1)}),"Object",r)}},function(t,e,n){var b=n(23),w=n(48),S=n(17),E=n(11),r=n(220);t.exports=function(f,t){var h=1==f,p=2==f,d=3==f,y=4==f,m=6==f,g=5==f||m,v=t||r;return function(t,e,n){for(var r,i,o=S(t),a=w(o),s=b(e,n,3),u=E(a.length),c=0,l=h?v(t,u):p?v(t,0):void 0;c<u;c++)if((g||c in a)&&(i=s(r=a[c],c,o),f))if(h)l[c]=i;else if(i)switch(f){case 3:return!0;case 5:return r;case 6:return c;case 2:l.push(r)}else if(y)return!1;return m?-1:d||y?y:l}}},function(t,e,n){var o=n(24);t.exports=function(r,i,t){if(o(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?r:n)(t)}},function(t,e,n){"use strict";if(n(9)){var g=n(34),v=n(4),b=n(3),w=n(1),S=n(60),r=n(86),h=n(23),E=n(44),i=n(32),T=n(15),o=n(45),a=n(27),_=n(11),C=n(114),s=n(36),u=n(29),c=n(14),I=n(52),k=n(5),p=n(17),d=n(79),D=n(37),N=n(39),x=n(38).f,y=n(81),l=n(33),f=n(7),m=n(22),A=n(50),O=n(57),P=n(83),R=n(41),M=n(54),L=n(43),F=n(82),U=n(106),q=n(8),B=n(20),j=q.f,V=B.f,W=v.RangeError,z=v.TypeError,K=v.Uint8Array,Q="ArrayBuffer",G="Shared"+Q,H="BYTES_PER_ELEMENT",Y="prototype",X=Array[Y],$=r.ArrayBuffer,J=r.DataView,Z=m(0),tt=m(2),et=m(3),nt=m(4),rt=m(5),it=m(6),ot=A(!0),at=A(!1),st=P.values,ut=P.keys,ct=P.entries,lt=X.lastIndexOf,ft=X.reduce,ht=X.reduceRight,pt=X.join,dt=X.sort,yt=X.slice,mt=X.toString,gt=X.toLocaleString,vt=f("iterator"),bt=f("toStringTag"),wt=l("typed_constructor"),St=l("def_constructor"),Et=S.CONSTR,Tt=S.TYPED,_t=S.VIEW,Ct="Wrong length!",It=m(1,function(t,e){return At(O(t,t[St]),e)}),kt=b(function(){return 1===new K(new Uint16Array([1]).buffer)[0]}),Dt=!!K&&!!K[Y].set&&b(function(){new K(1).set({})}),Nt=function(t,e){var n=a(t);if(n<0||n%e)throw W("Wrong offset!");return n},xt=function(t){if(k(t)&&Tt in t)return t;throw z(t+" is not a typed array!")},At=function(t,e){if(!(k(t)&&wt in t))throw z("It is not a typed array constructor!");return new t(e)},Ot=function(t,e){return Pt(O(t,t[St]),e)},Pt=function(t,e){for(var n=0,r=e.length,i=At(t,r);n<r;)i[n]=e[n++];return i},Rt=function(t,e,n){j(t,e,{get:function(){return this._d[n]}})},Mt=function(t){var e,n,r,i,o,a,s=p(t),u=arguments.length,c=1<u?arguments[1]:void 0,l=void 0!==c,f=y(s);if(null!=f&&!d(f)){for(a=f.call(s),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);s=r}for(l&&2<u&&(c=h(c,arguments[2],2)),e=0,n=_(s.length),i=At(this,n);e<n;e++)i[e]=l?c(s[e],e):s[e];return i},Lt=function(){for(var t=0,e=arguments.length,n=At(this,e);t<e;)n[t]=arguments[t++];return n},Ft=!!K&&b(function(){gt.call(new K(1))}),Ut=function(){return gt.apply(Ft?yt.call(xt(this)):xt(this),arguments)},qt={copyWithin:function(t,e){return U.call(xt(this),t,e,2<arguments.length?arguments[2]:void 0)},every:function(t){return nt(xt(this),t,1<arguments.length?arguments[1]:void 0)},fill:function(t){return F.apply(xt(this),arguments)},filter:function(t){return Ot(this,tt(xt(this),t,1<arguments.length?arguments[1]:void 0))},find:function(t){return rt(xt(this),t,1<arguments.length?arguments[1]:void 0)},findIndex:function(t){return it(xt(this),t,1<arguments.length?arguments[1]:void 0)},forEach:function(t){Z(xt(this),t,1<arguments.length?arguments[1]:void 0)},indexOf:function(t){return at(xt(this),t,1<arguments.length?arguments[1]:void 0)},includes:function(t){return ot(xt(this),t,1<arguments.length?arguments[1]:void 0)},join:function(t){return pt.apply(xt(this),arguments)},lastIndexOf:function(t){return lt.apply(xt(this),arguments)},map:function(t){return It(xt(this),t,1<arguments.length?arguments[1]:void 0)},reduce:function(t){return ft.apply(xt(this),arguments)},reduceRight:function(t){return ht.apply(xt(this),arguments)},reverse:function(){for(var t,e=this,n=xt(e).length,r=Math.floor(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e},some:function(t){return et(xt(this),t,1<arguments.length?arguments[1]:void 0)},sort:function(t){return dt.call(xt(this),t)},subarray:function(t,e){var n=xt(this),r=n.length,i=s(t,r);return new(O(n,n[St]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,_((void 0===e?r:s(e,r))-i))}},Bt=function(t,e){return Ot(this,yt.call(xt(this),t,e))},jt=function(t){xt(this);var e=Nt(arguments[1],1),n=this.length,r=p(t),i=_(r.length),o=0;if(n<i+e)throw W(Ct);for(;o<i;)this[e+o]=r[o++]},Vt={entries:function(){return ct.call(xt(this))},keys:function(){return ut.call(xt(this))},values:function(){return st.call(xt(this))}},Wt=function(t,e){return k(t)&&t[Tt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},zt=function(t,e){return Wt(t,e=u(e,!0))?i(2,t[e]):V(t,e)},Kt=function(t,e,n){return!(Wt(t,e=u(e,!0))&&k(n)&&c(n,"value"))||c(n,"get")||c(n,"set")||n.configurable||c(n,"writable")&&!n.writable||c(n,"enumerable")&&!n.enumerable?j(t,e,n):(t[e]=n.value,t)};Et||(B.f=zt,q.f=Kt),w(w.S+w.F*!Et,"Object",{getOwnPropertyDescriptor:zt,defineProperty:Kt}),b(function(){mt.call({})})&&(mt=gt=function(){return pt.call(this)});var Qt=o({},qt);o(Qt,Vt),T(Qt,vt,Vt.values),o(Qt,{slice:Bt,set:jt,constructor:function(){},toString:mt,toLocaleString:Ut}),Rt(Qt,"buffer","b"),Rt(Qt,"byteOffset","o"),Rt(Qt,"byteLength","l"),Rt(Qt,"length","e"),j(Qt,bt,{get:function(){return this[Tt]}}),t.exports=function(t,f,e,o){var h=t+((o=!!o)?"Clamped":"")+"Array",n="get"+t,a="set"+t,p=v[h],s=p||{},r=p&&N(p),i=!p||!S.ABV,u={},c=p&&p[Y],d=function(t,i){j(t,i,{get:function(){return t=i,(e=this._d).v[n](t*f+e.o,kt);var t,e},set:function(t){return e=i,n=t,r=this._d,o&&(n=(n=Math.round(n))<0?0:255<n?255:255&n),void r.v[a](e*f+r.o,n,kt);var e,n,r},enumerable:!0})};i?(p=e(function(t,e,n,r){E(t,p,h,"_d");var i,o,a,s,u=0,c=0;if(k(e)){if(!(e instanceof $||(s=I(e))==Q||s==G))return Tt in e?Pt(p,e):Mt.call(p,e);i=e,c=Nt(n,f);var l=e.byteLength;if(void 0===r){if(l%f)throw W(Ct);if((o=l-c)<0)throw W(Ct)}else if(l<(o=_(r)*f)+c)throw W(Ct);a=o/f}else a=C(e),i=new $(o=a*f);for(T(t,"_d",{b:i,o:c,l:o,e:a,v:new J(i)});u<a;)d(t,u++)}),c=p[Y]=D(Qt),T(c,"constructor",p)):b(function(){p(1)})&&b(function(){new p(-1)})&&M(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=e(function(t,e,n,r){var i;return E(t,p,h),k(e)?e instanceof $||(i=I(e))==Q||i==G?void 0!==r?new s(e,Nt(n,f),r):void 0!==n?new s(e,Nt(n,f)):new s(e):Tt in e?Pt(p,e):Mt.call(p,e):new s(C(e))}),Z(r!==Function.prototype?x(s).concat(x(r)):x(s),function(t){t in p||T(p,t,s[t])}),p[Y]=c,g||(c.constructor=p));var l=c[vt],y=!!l&&("values"==l.name||null==l.name),m=Vt.values;T(p,wt,!0),T(c,Tt,h),T(c,_t,!0),T(c,St,p),(o?new p(1)[bt]==h:bt in c)||j(c,bt,{get:function(){return h}}),u[h]=p,w(w.G+w.W+w.F*(p!=s),u),w(w.S,h,{BYTES_PER_ELEMENT:f}),w(w.S+w.F*b(function(){s.of.call(p,1)}),h,{from:Mt,of:Lt}),H in c||T(c,H,f),w(w.P,h,qt),L(h),w(w.P+w.F*Dt,h,{set:jt}),w(w.P+w.F*!y,h,Vt),g||c.toString==mt||(c.toString=mt),w(w.P+w.F*b(function(){new p(1).slice()}),h,{slice:Bt}),w(w.P+w.F*(b(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!b(function(){c.toLocaleString.call([1,2])})),h,{toLocaleString:Ut}),R[h]=y?l:m,g||y||T(c,vt,m)}}else t.exports=function(){}},function(t,e,n){var i=n(5);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(33)("meta"),i=n(5),o=n(14),a=n(8).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(3)(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},f=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return c&&f.NEED&&u(t)&&!o(t,r)&&l(t),t}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports=!1},function(t,e,n){var r=n(91),i=n(66);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(27),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,r){var i=r(6),o=r(92),a=r(66),s=r(65)("IE_PROTO"),u=function(){},c="prototype",l=function(){var t,e=r(62)("iframe"),n=a.length;for(e.style.display="none",r(68).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;n--;)delete l[c][a[n]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(u[c]=i(t),n=new u,u[c]=null,n[s]=t):n=l(),void 0===e?n:o(n,e)}},function(t,e,n){var r=n(91),i=n(66).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(14),i=n(17),o=n(65)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r=n(8).f,i=n(14),o=n(7)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e){t.exports={}},function(t,e,n){var r=n(7)("unscopables"),i=Array.prototype;null==i[r]&&n(15)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e,n){"use strict";var r=n(4),i=n(8),o=n(9),a=n(7)("species");t.exports=function(t){var e=r[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(12);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},function(t,e,n){var r=n(5);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){"use strict";n.d(e,"d",function(){return m}),n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return a});var p=n(88),r=function(){return Math.random().toString(36).substring(7).split("").join(".")},d={INIT:"@@redux/INIT"+r(),REPLACE:"@@redux/REPLACE"+r(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+r()}};function y(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function m(t,e,n){var r;if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(m)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var i=t,o=e,a=[],s=a,u=!1;function c(){s===a&&(s=a.slice())}function l(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return o}function f(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var n=!0;return c(),s.push(e),function(){if(n){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");n=!1,c();var t=s.indexOf(e);s.splice(t,1)}}}function h(t){if(!y(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,o=i(o,t)}finally{u=!1}for(var e=a=s,n=0;n<e.length;n++){(0,e[n])()}return t}return h({type:d.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:function(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");i=t,h({type:d.REPLACE})}})[p.a]=function(){var t,n=f;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new TypeError("Expected the observer to be an object.");function e(){t.next&&t.next(l())}return e(),{unsubscribe:n(e)}}})[p.a]=function(){return this},t},r}function s(t,e){return function(){return e(t.apply(this,arguments))}}function i(t,e){if("function"==typeof t)return s(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(t),r={},i=0;i<n.length;i++){var o=n[i],a=t[o];"function"==typeof a&&(r[o]=s(a,e))}return r}function a(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}function o(){for(var t=arguments.length,o=new Array(t),e=0;e<t;e++)o[e]=arguments[e];return function(i){return function(){var t=i.apply(void 0,arguments),e=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},n={getState:t.getState,dispatch:function(){return e.apply(void 0,arguments)}},r=o.map(function(t){return t(n)});return function(i){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},e=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),e.forEach(function(t){var e,n,r;e=i,r=o[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return i}({},t,{dispatch:e=a.apply(void 0,r)(t.dispatch)})}}}},function(t,e,n){var r=n(25);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var u=n(16),c=n(11),l=n(36);t.exports=function(s){return function(t,e,n){var r,i=u(t),o=c(i.length),a=l(n,o);if(s&&e!=e){for(;a<o;)if((r=i[a++])!=r)return!0}else for(;a<o;a++)if((s||a in i)&&i[a]===e)return s||a||0;return!s&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var i=n(25),o=n(7)("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:a?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){var a=n(1),r=n(26),s=n(3),u=n(70),i="["+u+"]",o=RegExp("^"+i+i+"*"),c=RegExp(i+i+"*$"),l=function(t,e,n){var r={},i=s(function(){return!!u[t]()||"​"!="​"[t]()}),o=r[t]=i?e(f):u[t];n&&(r[n]=o),a(a.P+a.F*i,"String",r)},f=l.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(o,"")),2&e&&(t=t.replace(c,"")),t};t.exports=l},function(t,e,n){var o=n(7)("iterator"),a=!1;try{var r=[7][o]();r.return=function(){a=!0},Array.from(r,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!a)return!1;var n=!1;try{var r=[7],i=r[o]();i.next=function(){return{done:n=!0}},r[o]=function(){return i},t(r)}catch(t){}return n}},function(t,e,n){"use strict";var s=n(15),u=n(12),c=n(3),l=n(26),f=n(7);t.exports=function(e,t,n){var r=f(e),i=n(l,r,""[e]),o=i[0],a=i[1];c(function(){var t={};return t[r]=function(){return 7},7!=""[e](t)})&&(u(String.prototype,e,o),s(RegExp.prototype,r,2==t?function(t,e){return a.call(t,this,e)}:function(t){return a.call(t,this)}))}},function(t,e,n){var h=n(23),p=n(104),d=n(79),y=n(6),m=n(11),g=n(81),v={},b={};(e=t.exports=function(t,e,n,r,i){var o,a,s,u,c=i?function(){return t}:g(t),l=h(n,r,e?2:1),f=0;if("function"!=typeof c)throw TypeError(t+" is not iterable!");if(d(c)){for(o=m(t.length);f<o;f++)if((u=e?l(y(a=t[f])[0],a[1]):l(t[f]))===v||u===b)return u}else for(s=c.call(t);!(a=s.next()).done;)if((u=p(s,l,a.value,e))===v||u===b)return u}).BREAK=v,e.RETURN=b},function(t,e,n){var i=n(6),o=n(24),a=n(7)("species");t.exports=function(t,e){var n,r=i(t).constructor;return void 0===r||null==(n=i(r)[a])?e:o(n)}},function(t,e,n){var r=n(4).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){"use strict";var g=n(4),v=n(1),b=n(12),w=n(45),S=n(30),E=n(56),T=n(44),_=n(5),C=n(3),I=n(54),k=n(40),D=n(71);t.exports=function(r,t,e,n,i,o){var a=g[r],s=a,u=i?"set":"add",c=s&&s.prototype,l={},f=function(t){var n=c[t];b(c,t,"delete"==t?function(t){return!(o&&!_(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!_(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!_(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,e){return n.call(this,0===t?0:t,e),this})};if("function"==typeof s&&(o||c.forEach&&!C(function(){(new s).entries().next()}))){var h=new s,p=h[u](o?{}:-0,1)!=h,d=C(function(){h.has(1)}),y=I(function(t){new s(t)}),m=!o&&C(function(){for(var t=new s,e=5;e--;)t[u](e,e);return!t.has(-0)});y||(((s=t(function(t,e){T(t,s,r);var n=D(new a,t,s);return null!=e&&E(e,i,n[u],n),n})).prototype=c).constructor=s),(d||m)&&(f("delete"),f("has"),i&&f("get")),(m||p)&&f(u),o&&c.clear&&delete c.clear}else s=n.getConstructor(t,r,i,u),w(s.prototype,e),S.NEED=!0;return k(s,r),l[r]=s,v(v.G+v.W+v.F*(s!=a),l),o||n.setStrong(s,r,i),s}},function(t,e,n){for(var r,i=n(4),o=n(15),a=n(33),s=a("typed_array"),u=a("view"),c=!(!i.ArrayBuffer||!i.DataView),l=c,f=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(r=i[h[f++]])?(o(r.prototype,s,!0),o(r.prototype,u,!0)):l=!1;t.exports={ABV:c,CONSTR:l,TYPED:s,VIEW:u}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,s],l=0;(u=new Error(e.replace(/%s/g,function(){return c[l++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(t,e,n){var r=n(5),i=n(4).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(10),i=n(4),o="__core-js_shared__",a=i[o]||(i[o]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(34)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){e.f=n(7)},function(t,e,n){var r=n(63)("keys"),i=n(33);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(25);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(4).document;t.exports=r&&r.documentElement},function(t,e,i){var n=i(5),r=i(6),o=function(t,e){if(r(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{(r=i(23)(Function.call,i(20).f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return o(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:o}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var o=n(5),a=n(69).set;t.exports=function(t,e,n){var r,i=e.constructor;return i!==n&&"function"==typeof i&&(r=i.prototype)!==n.prototype&&o(r)&&a&&a(t,r),t}},function(t,e,n){"use strict";var i=n(27),o=n(26);t.exports=function(t){var e=String(o(this)),n="",r=i(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var n=Math.expm1;t.exports=!n||22025.465794806718<n(10)||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:-1e-6<t&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e,n){"use strict";var b=n(34),w=n(1),S=n(12),E=n(15),T=n(41),_=n(103),C=n(40),I=n(39),k=n(7)("iterator"),D=!([].keys&&"next"in[].keys()),N="values",x=function(){return this};t.exports=function(t,e,n,r,i,o,a){_(n,e,r);var s,u,c,l=function(t){if(!D&&t in d)return d[t];switch(t){case"keys":case N:return function(){return new n(this,t)}}return function(){return new n(this,t)}},f=e+" Iterator",h=i==N,p=!1,d=t.prototype,y=d[k]||d["@@iterator"]||i&&d[i],m=y||l(i),g=i?h?l("entries"):m:void 0,v="Array"==e&&d.entries||y;if(v&&(c=I(v.call(new t)))!==Object.prototype&&c.next&&(C(c,f,!0),b||"function"==typeof c[k]||E(c,k,x)),h&&y&&y.name!==N&&(p=!0,m=function(){return y.call(this)}),b&&!a||!D&&!p&&d[k]||E(d,k,m),T[e]=m,T[f]=x,i)if(s={values:h?m:l(N),keys:o?m:l("keys"),entries:g},a)for(u in s)u in d||S(d,u,s[u]);else w(w.P+w.F*(D||p),e,s);return s}},function(t,e,n){var r=n(77),i=n(26);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},function(t,e,n){var r=n(5),i=n(25),o=n(7)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){var r=n(7)("match");t.exports=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[r]=!1,!"/./"[e](n)}catch(t){}}return!0}},function(t,e,n){var r=n(41),i=n(7)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){"use strict";var r=n(8),i=n(32);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var r=n(52),i=n(7)("iterator"),o=n(41);t.exports=n(10).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){"use strict";var s=n(17),u=n(36),c=n(11);t.exports=function(t){for(var e=s(this),n=c(e.length),r=arguments.length,i=u(1<r?arguments[1]:void 0,n),o=2<r?arguments[2]:void 0,a=void 0===o?n:u(o,n);i<a;)e[i++]=t;return e}},function(t,e,n){"use strict";var r=n(42),i=n(107),o=n(41),a=n(16);t.exports=n(75)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,n){"use strict";var r=n(6);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var r,i,o,a=n(23),s=n(96),u=n(68),c=n(62),l=n(4),f=l.process,h=l.setImmediate,p=l.clearImmediate,d=l.MessageChannel,y=l.Dispatch,m=0,g={},v="onreadystatechange",b=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},w=function(t){b.call(t.data)};h&&p||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++m]=function(){s("function"==typeof t?t:Function(t),e)},r(m),m},p=function(t){delete g[t]},"process"==n(25)(f)?r=function(t){f.nextTick(a(b,t,1))}:y&&y.now?r=function(t){y.now(a(b,t,1))}:d?(o=(i=new d).port2,i.port1.onmessage=w,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",w,!1)):r=v in c("script")?function(t){u.appendChild(c("script"))[v]=function(){u.removeChild(this),b.call(t)}}:function(t){setTimeout(a(b,t,1),0)}),t.exports={set:h,clear:p}},function(t,e,n){"use strict";var r=n(4),i=n(9),o=n(34),a=n(60),s=n(15),u=n(45),c=n(3),l=n(44),f=n(27),h=n(11),p=n(114),d=n(38).f,y=n(8).f,m=n(82),g=n(40),v="ArrayBuffer",b="DataView",w="prototype",S="Wrong index!",E=r[v],T=r[b],_=r.Math,C=r.RangeError,I=r.Infinity,k=E,D=_.abs,N=_.pow,x=_.floor,A=_.log,O=_.LN2,P="byteLength",R="byteOffset",M=i?"_b":"buffer",L=i?"_l":P,F=i?"_o":R;function U(t,e,n){var r,i,o,a=new Array(n),s=8*n-e-1,u=(1<<s)-1,c=u>>1,l=23===e?N(2,-24)-N(2,-77):0,f=0,h=t<0||0===t&&1/t<0?1:0;for((t=D(t))!=t||t===I?(i=t!=t?1:0,r=u):(r=x(A(t)/O),t*(o=N(2,-r))<1&&(r--,o*=2),2<=(t+=1<=r+c?l/o:l*N(2,1-c))*o&&(r++,o/=2),u<=r+c?(i=0,r=u):1<=r+c?(i=(t*o-1)*N(2,e),r+=c):(i=t*N(2,c-1)*N(2,e),r=0));8<=e;a[f++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;0<s;a[f++]=255&r,r/=256,s-=8);return a[--f]|=128*h,a}function q(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,s=i-7,u=n-1,c=t[u--],l=127&c;for(c>>=7;0<s;l=256*l+t[u],u--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=e;0<s;r=256*r+t[u],u--,s-=8);if(0===l)l=1-a;else{if(l===o)return r?NaN:c?-I:I;r+=N(2,e),l-=a}return(c?-1:1)*r*N(2,l-e)}function B(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function j(t){return[255&t]}function V(t){return[255&t,t>>8&255]}function W(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function z(t){return U(t,52,8)}function K(t){return U(t,23,4)}function Q(t,e,n){y(t[w],e,{get:function(){return this[n]}})}function G(t,e,n,r){var i=p(+n);if(i+e>t[L])throw C(S);var o=t[M]._b,a=i+t[F],s=o.slice(a,a+e);return r?s:s.reverse()}function H(t,e,n,r,i,o){var a=p(+n);if(a+e>t[L])throw C(S);for(var s=t[M]._b,u=a+t[F],c=r(+i),l=0;l<e;l++)s[u+l]=c[o?l:e-l-1]}if(a.ABV){if(!c(function(){E(1)})||!c(function(){new E(-1)})||c(function(){return new E,new E(1.5),new E(NaN),E.name!=v})){for(var Y,X=(E=function(t){return l(this,E),new k(p(t))})[w]=k[w],$=d(k),J=0;$.length>J;)(Y=$[J++])in E||s(E,Y,k[Y]);o||(X.constructor=E)}var Z=new T(new E(2)),tt=T[w].setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||u(T[w],{setInt8:function(t,e){tt.call(this,t,e<<24>>24)},setUint8:function(t,e){tt.call(this,t,e<<24>>24)}},!0)}else E=function(t){l(this,E,v);var e=p(t);this._b=m.call(new Array(e),0),this[L]=e},T=function(t,e,n){l(this,T,b),l(t,E,b);var r=t[L],i=f(e);if(i<0||r<i)throw C("Wrong offset!");if(r<i+(n=void 0===n?r-i:h(n)))throw C("Wrong length!");this[M]=t,this[F]=i,this[L]=n},i&&(Q(E,P,"_l"),Q(T,"buffer","_b"),Q(T,P,"_l"),Q(T,R,"_o")),u(T[w],{getInt8:function(t){return G(this,1,t)[0]<<24>>24},getUint8:function(t){return G(this,1,t)[0]},getInt16:function(t){var e=G(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=G(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return B(G(this,4,t,arguments[1]))},getUint32:function(t){return B(G(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return q(G(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return q(G(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){H(this,1,t,j,e)},setUint8:function(t,e){H(this,1,t,j,e)},setInt16:function(t,e){H(this,2,t,V,e,arguments[2])},setUint16:function(t,e){H(this,2,t,V,e,arguments[2])},setInt32:function(t,e){H(this,4,t,W,e,arguments[2])},setUint32:function(t,e){H(this,4,t,W,e,arguments[2])},setFloat32:function(t,e){H(this,4,t,K,e,arguments[2])},setFloat64:function(t,e){H(this,8,t,z,e,arguments[2])}});g(E,v),g(T,b),s(T[w],a.VIEW,!0),e[v]=E,e[b]=T},function(t,e,n){"use strict";t.exports=n(299)},function(t,o,a){"use strict";(function(t,e){var n,r=a(123);n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:e;var i=Object(r.a)(n);o.a=i}).call(this,a(31),a(300)(t))},function(t,e,n){t.exports=!n(9)&&!n(3)(function(){return 7!=Object.defineProperty(n(62)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(4),i=n(10),o=n(34),a=n(64),s=n(8).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){var a=n(14),s=n(16),u=n(50)(!1),c=n(65)("IE_PROTO");t.exports=function(t,e){var n,r=s(t),i=0,o=[];for(n in r)n!=c&&a(r,n)&&o.push(n);for(;e.length>i;)a(r,n=e[i++])&&(~u(o,n)||o.push(n));return o}},function(t,e,n){var a=n(8),s=n(6),u=n(35);t.exports=n(9)?Object.defineProperties:function(t,e){s(t);for(var n,r=u(e),i=r.length,o=0;o<i;)a.f(t,n=r[o++],e[n]);return t}},function(t,e,n){var r=n(16),i=n(38).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e,n){"use strict";var h=n(35),p=n(51),d=n(49),y=n(17),m=n(48),i=Object.assign;t.exports=!i||n(3)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=i({},t)[n]||Object.keys(i({},e)).join("")!=r})?function(t,e){for(var n=y(t),r=arguments.length,i=1,o=p.f,a=d.f;i<r;)for(var s,u=m(arguments[i++]),c=o?h(u).concat(o(u)):h(u),l=c.length,f=0;f<l;)a.call(u,s=c[f++])&&(n[s]=u[s]);return n}:i},function(t,e,n){"use strict";var o=n(24),a=n(5),s=n(96),u=[].slice,c={};t.exports=Function.bind||function(e){var n=o(this),r=u.call(arguments,1),i=function(){var t=r.concat(u.call(arguments));return this instanceof i?function(t,e,n){if(!(e in c)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";c[e]=Function("F,a","return new F("+r.join(",")+")")}return c[e](t,n)}(n,t.length,t):s(n,t,e)};return a(n.prototype)&&(i.prototype=n.prototype),i}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(4).parseInt,i=n(53).trim,o=n(70),a=/^[-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(a.test(n)?16:10))}:r},function(t,e,n){var r=n(4).parseFloat,i=n(53).trim;t.exports=1/r(n(70)+"-0")!=-1/0?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},function(t,e,n){var r=n(25);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},function(t,e,n){var r=n(5),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return-1e-8<(t=+t)&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){var u=n(27),c=n(26);t.exports=function(s){return function(t,e){var n,r,i=String(c(t)),o=u(e),a=i.length;return o<0||a<=o?s?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===a||(r=i.charCodeAt(o+1))<56320||57343<r?s?i.charAt(o):n:s?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(37),i=n(32),o=n(40),a={};n(15)(a,n(7)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var o=n(6);t.exports=function(e,t,n,r){try{return r?t(o(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&o(i.call(e)),t}}},function(t,e,n){var l=n(24),f=n(17),h=n(48),p=n(11);t.exports=function(t,e,n,r,i){l(e);var o=f(t),a=h(o),s=p(o.length),u=i?s-1:0,c=i?-1:1;if(n<2)for(;;){if(u in a){r=a[u],u+=c;break}if(u+=c,i?u<0:s<=u)throw TypeError("Reduce of empty array with no initial value")}for(;i?0<=u:u<s;u+=c)u in a&&(r=e(r,a[u],u,o));return r}},function(t,e,n){"use strict";var c=n(17),l=n(36),f=n(11);t.exports=[].copyWithin||function(t,e){var n=c(this),r=f(n.length),i=l(t,r),o=l(e,r),a=2<arguments.length?arguments[2]:void 0,s=Math.min((void 0===a?r:l(a,r))-o,r-i),u=1;for(o<i&&i<o+s&&(u=-1,o+=s-1,i+=s-1);0<s--;)o in n?n[i]=n[o]:delete n[i],i+=u,o+=u;return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){n(9)&&"g"!=/./g.flags&&n(8).f(RegExp.prototype,"flags",{configurable:!0,get:n(84)})},function(t,e,n){"use strict";var r,i,o,a,s=n(34),u=n(4),c=n(23),l=n(52),f=n(1),h=n(5),p=n(24),d=n(44),y=n(56),m=n(57),g=n(85).set,v=n(241)(),b=n(110),w=n(242),S=n(58),E=n(111),T="Promise",_=u.TypeError,C=u.process,I=C&&C.versions,k=I&&I.v8||"",D=u[T],N="process"==l(C),x=function(){},A=i=b.f,O=!!function(){try{var t=D.resolve(1),e=(t.constructor={})[n(7)("species")]=function(t){t(x,x)};return(N||"function"==typeof PromiseRejectionEvent)&&t.then(x)instanceof e&&0!==k.indexOf("6.6")&&-1===S.indexOf("Chrome/66")}catch(t){}}(),P=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},R=function(l,n){if(!l._n){l._n=!0;var r=l._c;v(function(){for(var u=l._v,c=1==l._s,t=0,e=function(t){var e,n,r,i=c?t.ok:t.fail,o=t.resolve,a=t.reject,s=t.domain;try{i?(c||(2==l._h&&F(l),l._h=1),!0===i?e=u:(s&&s.enter(),e=i(u),s&&(s.exit(),r=!0)),e===t.promise?a(_("Promise-chain cycle")):(n=P(e))?n.call(e,o,a):o(e)):a(u)}catch(t){s&&!r&&s.exit(),a(t)}};r.length>t;)e(r[t++]);l._c=[],l._n=!1,n&&!l._h&&M(l)})}},M=function(o){g.call(u,function(){var t,e,n,r=o._v,i=L(o);if(i&&(t=w(function(){N?C.emit("unhandledRejection",r,o):(e=u.onunhandledrejection)?e({promise:o,reason:r}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",r)}),o._h=N||L(o)?2:1),o._a=void 0,i&&t.e)throw t.v})},L=function(t){return 1!==t._h&&0===(t._a||t._c).length},F=function(e){g.call(u,function(){var t;N?C.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},U=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),R(e,!0))},q=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw _("Promise can't be resolved itself");(n=P(t))?v(function(){var e={_w:r,_d:!1};try{n.call(t,c(q,e,1),c(U,e,1))}catch(t){U.call(e,t)}}):(r._v=t,r._s=1,R(r,!1))}catch(t){U.call({_w:r,_d:!1},t)}}};O||(D=function(t){d(this,D,T,"_h"),p(t),r.call(this);try{t(c(q,this,1),c(U,this,1))}catch(t){U.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(45)(D.prototype,{then:function(t,e){var n=A(m(this,D));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=N?C.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&R(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=c(q,t,1),this.reject=c(U,t,1)},b.f=A=function(t){return t===D||t===a?new o(t):i(t)}),f(f.G+f.W+f.F*!O,{Promise:D}),n(40)(D,T),n(43)(T),a=n(10)[T],f(f.S+f.F*!O,T,{reject:function(t){var e=A(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(s||!O),T,{resolve:function(t){return E(s&&this===a?D:this,t)}}),f(f.S+f.F*!(O&&n(54)(function(t){D.all(t).catch(x)})),T,{all:function(t){var a=this,e=A(a),s=e.resolve,u=e.reject,n=w(function(){var r=[],i=0,o=1;y(t,!1,function(t){var e=i++,n=!1;r.push(void 0),o++,a.resolve(t).then(function(t){n||(n=!0,r[e]=t,--o||s(r))},u)}),--o||s(r)});return n.e&&u(n.v),e.promise},race:function(t){var e=this,n=A(e),r=n.reject,i=w(function(){y(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(t,e,n){"use strict";var i=n(24);function r(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=i(n),this.reject=i(r)}t.exports.f=function(t){return new r(t)}},function(t,e,n){var r=n(6),i=n(5),o=n(110);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var a=n(8).f,s=n(37),u=n(45),c=n(23),l=n(44),f=n(56),r=n(75),i=n(107),o=n(43),h=n(9),p=n(30).fastKey,d=n(46),y=h?"_s":"size",m=function(t,e){var n,r=p(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,o,n,r){var i=t(function(t,e){l(t,i,o,"_i"),t._t=o,t._i=s(null),t._f=void 0,t._l=void 0,t[y]=0,null!=e&&f(e,n,t[r],t)});return u(i.prototype,{clear:function(){for(var t=d(this,o),e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[y]=0},delete:function(t){var e=d(this,o),n=m(e,t);if(n){var r=n.n,i=n.p;delete e._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),e._f==n&&(e._f=r),e._l==n&&(e._l=i),e[y]--}return!!n},forEach:function(t){d(this,o);for(var e,n=c(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!m(d(this,o),t)}}),h&&a(i.prototype,"size",{get:function(){return d(this,o)[y]}}),i},def:function(t,e,n){var r,i,o=m(t,e);return o?o.v=n:(t._l=o={i:i=p(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[y]++,"F"!==i&&(t._i[i]=o)),t},getEntry:m,setStrong:function(t,n,e){r(t,n,function(t,e){this._t=d(t,n),this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?i(0,"keys"==e?n.k:"values"==e?n.v:[n.k,n.v]):(t._t=void 0,i(1))},e?"entries":"values",!e,!0),o(n)}}},function(t,e,n){"use strict";var a=n(45),s=n(30).getWeak,i=n(6),u=n(5),c=n(44),l=n(56),r=n(22),f=n(14),h=n(46),o=r(5),p=r(6),d=0,y=function(t){return t._l||(t._l=new m)},m=function(){this.a=[]},g=function(t,e){return o(t.a,function(t){return t[0]===e})};m.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var n=g(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(e){var t=p(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},t.exports={getConstructor:function(t,n,r,i){var o=t(function(t,e){c(t,o,n,"_i"),t._t=n,t._i=d++,t._l=void 0,null!=e&&l(e,r,t[i],t)});return a(o.prototype,{delete:function(t){if(!u(t))return!1;var e=s(t);return!0===e?y(h(this,n)).delete(t):e&&f(e,this._i)&&delete e[this._i]},has:function(t){if(!u(t))return!1;var e=s(t);return!0===e?y(h(this,n)).has(t):e&&f(e,this._i)}}),o},def:function(t,e,n){var r=s(i(e),!0);return!0===r?y(t).set(e,n):r[t._i]=n,t},ufstore:y}},function(t,e,n){var r=n(27),i=n(11);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){var r=n(38),i=n(51),o=n(6),a=n(4).Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){var l=n(11),f=n(72),h=n(26);t.exports=function(t,e,n,r){var i=String(h(t)),o=i.length,a=void 0===n?" ":String(n),s=l(e);if(s<=o||""==a)return i;var u=s-o,c=f.call(a,Math.ceil(u/a.length));return c.length>u&&(c=c.slice(0,u)),r?c+i:i+c}},function(t,e,n){var u=n(35),c=n(16),l=n(49).f;t.exports=function(s){return function(t){for(var e,n=c(t),r=u(n),i=r.length,o=0,a=[];o<i;)l.call(n,e=r[o++])&&a.push(s?[e,n[e]]:n[e]);return a}}},function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var u=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,r,i=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),o=1;o<arguments.length;o++){for(var a in n=Object(arguments[o]))c.call(n,a)&&(i[a]=n[a]);if(u){r=u(n);for(var s=0;s<r.length;s++)l.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var t=s(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p=n(307),d=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},y="[DEFAULT]",r=[],m=function(){function t(t,e,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled||!1,this.options_=p.deepCopy(t),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){r.push(t),setTimeout(function(){return t(null)},0)},removeAuthTokenListener:function(e){r=r.filter(function(t){return t!==e})}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed_(),this._automaticDataCollectionEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var r=this;return new Promise(function(t){r.checkDestroyed_(),t()}).then(function(){r.firebase_.INTERNAL.removeApp(r.name_);var n=[];return Object.keys(r.services_).forEach(function(e){Object.keys(r.services_[e]).forEach(function(t){n.push(r.services_[e][t])})}),Promise.all(n.map(function(t){return t.INTERNAL.delete()}))}).then(function(){r.isDeleted_=!0,r.services_={}})},t.prototype._getService=function(t,e){if(void 0===e&&(e=y),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==y?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype.extendApp=function(t){var e=this;p.deepExtend(this,t),t.INTERNAL&&t.INTERNAL.addAuthTokenListener&&(r.forEach(function(t){e.INTERNAL.addAuthTokenListener(t)}),r=[])},t.prototype.checkDestroyed_=function(){this.isDeleted_&&g("app-deleted",{name:this.name_})},t}();function g(t,e){throw i.create(t,e)}m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var i=new p.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."}),o=function t(){var a={},s={},u={},c={__esModule:!0,initializeApp:function(t,e){if(void 0===e&&(e={}),"object"!=typeof e||null===e){var n=e;e={name:n}}var r=e;void 0===r.name&&(r.name=y);var i=r.name;"string"==typeof i&&i||g("bad-app-name",{name:i+""}),d(a,i)&&g("duplicate-app",{name:i});var o=new m(t,r,c);return h(a[i]=o,"create"),o},app:l,apps:null,Promise:Promise,SDK_VERSION:"5.5.9",INTERNAL:{registerService:function(n,t,e,r,i){s[n]&&g("duplicate-service",{name:n}),s[n]=t,r&&(u[n]=r,f().forEach(function(t){r("create",t)}));var o=function(t){return void 0===t&&(t=l()),"function"!=typeof t[n]&&g("invalid-app-argument",{name:n}),t[n]()};return void 0!==e&&p.deepExtend(o,e),c[n]=o,m.prototype[n]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,n).apply(this,i?t:[])},o},createFirebaseNamespace:t,extendNamespace:function(t){p.deepExtend(c,t)},createSubscribe:p.createSubscribe,ErrorFactory:p.ErrorFactory,removeApp:function(t){h(a[t],"delete"),delete a[t]},factories:s,useAsService:i,Promise:Promise,deepExtend:p.deepExtend}};function l(t){return d(a,t=t||y)||g("no-app",{name:t}),a[t]}function f(){return Object.keys(a).map(function(t){return a[t]})}function h(n,r){Object.keys(s).forEach(function(t){var e=i(n,t);null!==e&&u[e]&&u[e](r,n)})}function i(t,e){if("serverAuth"===e)return null;var n=e;return t.options,n}return p.patchProperty(c,"default",c),Object.defineProperty(c,"apps",{get:f}),p.patchProperty(l,"App",m),c}();e.firebase=o,e.default=o},function(t,e,n){"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),t.exports=n(294)},function(t,e,n){"use strict";var r=n(87),f={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},h={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},p={};p[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var d=Object.defineProperty,y=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,g=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,b=Object.prototype;t.exports=function t(e,n,r){if("string"==typeof n)return e;if(b){var i=v(n);i&&i!==b&&t(e,i,r)}var o=y(n);m&&(o=o.concat(m(n)));for(var a=p[e.$$typeof]||f,s=p[n.$$typeof]||f,u=0;u<o.length;++u){var c=o[u];if(!(h[c]||r&&r[c]||s&&s[c]||a&&a[c])){var l=g(n,c);try{d(e,c,l)}catch(t){}}}return e}},function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(i){return function(t){var n=t.dispatch,r=t.getState;return function(e){return function(t){return"function"==typeof t?t(n,r,i):e(t)}}}}var i=r();i.withExtraArgument=r,e.a=i},function(t,e,r){"use strict";var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=r(0),p=r(2),d=[],y=[];function o(t){var e=t(),n={loading:!0,loaded:null,error:null};return n.promise=e.then(function(t){return n.loading=!1,n.loaded=t}).catch(function(t){throw n.loading=!1,n.error=t}),n}function n(n){var r={loading:!1,loaded:{},error:null},i=[];try{Object.keys(n).forEach(function(e){var t=o(n[e]);t.loading?r.loading=!0:(r.loaded[e]=t.loaded,r.error=t.error),i.push(t.promise),t.promise.then(function(t){r.loaded[e]=t}).catch(function(t){r.error=t})})}catch(t){r.error=t}return r.promise=Promise.all(i).then(function(t){return r.loading=!1,t}).catch(function(t){throw r.loading=!1,t}),r}function m(t,e){return h.createElement((n=t)&&n.__esModule?n.default:n,e);var n}function i(i,t){var e,n;if(!t.loading)throw new Error("react-loadable requires a `loading` component");var o=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:m,webpack:null,modules:null},t),a=null;function s(){return a||(a=i(o.loader)),a.promise}return d.push(s),"function"==typeof o.webpack&&y.push(function(){if(t=o.webpack,"object"===u(r.m)&&t().every(function(t){return void 0!==t&&void 0!==r.m[t]}))return s();var t}),n=e=function(n){function r(t){c(this,r);var e=l(this,n.call(this,t));return e.retry=function(){e.setState({error:null,loading:!0,timedOut:!1}),a=i(o.loader),e._loadModule()},s(),e.state={error:a.error,pastDelay:!1,timedOut:!1,loading:a.loading,loaded:a.loaded},e}return f(r,n),r.preload=function(){return s()},r.prototype.componentWillMount=function(){this._mounted=!0,this._loadModule()},r.prototype._loadModule=function(){var e=this;if(this.context.loadable&&Array.isArray(o.modules)&&o.modules.forEach(function(t){e.context.loadable.report(t)}),a.loading){"number"==typeof o.delay&&(0===o.delay?this.setState({pastDelay:!0}):this._delay=setTimeout(function(){e.setState({pastDelay:!0})},o.delay)),"number"==typeof o.timeout&&(this._timeout=setTimeout(function(){e.setState({timedOut:!0})},o.timeout));var n=function(){e._mounted&&(e.setState({error:a.error,loaded:a.loaded,loading:a.loading}),e._clearTimeouts())};a.promise.then(function(){n()}).catch(function(t){n()})}},r.prototype.componentWillUnmount=function(){this._mounted=!1,this._clearTimeouts()},r.prototype._clearTimeouts=function(){clearTimeout(this._delay),clearTimeout(this._timeout)},r.prototype.render=function(){return this.state.loading||this.state.error?h.createElement(o.loading,{isLoading:this.state.loading,pastDelay:this.state.pastDelay,timedOut:this.state.timedOut,error:this.state.error,retry:this.retry}):this.state.loaded?o.render(this.state.loaded,this.props):null},r}(h.Component),e.contextTypes={loadable:p.shape({report:p.func.isRequired})},n}function a(t){return i(o,t)}a.Map=function(t){if("function"!=typeof t.render)throw new Error("LoadableMap requires a `render(loaded, props)` function");return i(n,t)};var s=function(t){function e(){return c(this,e),l(this,t.apply(this,arguments))}return f(e,t),e.prototype.getChildContext=function(){return{loadable:{report:this.props.report}}},e.prototype.render=function(){return h.Children.only(this.props.children)},e}(h.Component);function g(t){for(var e=[];t.length;){var n=t.pop();e.push(n())}return Promise.all(e).then(function(){if(t.length)return g(t)})}s.propTypes={report:p.func.isRequired},s.childContextTypes={loadable:p.shape({report:p.func.isRequired}).isRequired},a.Capture=s,a.preloadAll=function(){return new Promise(function(t,e){g(d).then(t,e)})},a.preloadReady=function(){return new Promise(function(t,e){g(y).then(t,t)})},t.exports=a},,function(t,e,n){"use strict";(function(t){n(128),n(272),n(274),n(276),n(278),n(280),n(282),n(284),n(286),n(288),n(292),t._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),t._babelPolyfill=!0}).call(this,n(31))},function(t,e,n){n(129),n(131),n(132),n(133),n(134),n(135),n(136),n(137),n(138),n(139),n(140),n(141),n(142),n(143),n(144),n(145),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(210),n(211),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(222),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(83),n(235),n(236),n(108),n(237),n(238),n(239),n(240),n(109),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),t.exports=n(10)},function(t,e,n){"use strict";var r=n(4),a=n(14),i=n(9),o=n(1),s=n(12),u=n(30).KEY,c=n(3),l=n(63),f=n(40),h=n(33),p=n(7),d=n(64),y=n(90),m=n(130),g=n(67),v=n(6),b=n(5),w=n(16),S=n(29),E=n(32),T=n(37),_=n(93),C=n(20),I=n(8),k=n(35),D=C.f,N=I.f,x=_.f,A=r.Symbol,O=r.JSON,P=O&&O.stringify,R="prototype",M=p("_hidden"),L=p("toPrimitive"),F={}.propertyIsEnumerable,U=l("symbol-registry"),q=l("symbols"),B=l("op-symbols"),j=Object[R],V="function"==typeof A,W=r.QObject,z=!W||!W[R]||!W[R].findChild,K=i&&c(function(){return 7!=T(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=D(j,e);r&&delete j[e],N(t,e,n),r&&t!==j&&N(j,e,r)}:N,Q=function(t){var e=q[t]=T(A[R]);return e._k=t,e},G=V&&"symbol"==typeof A.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof A},H=function(t,e,n){return t===j&&H(B,e,n),v(t),e=S(e,!0),v(n),a(q,e)?(n.enumerable?(a(t,M)&&t[M][e]&&(t[M][e]=!1),n=T(n,{enumerable:E(0,!1)})):(a(t,M)||N(t,M,E(1,{})),t[M][e]=!0),K(t,e,n)):N(t,e,n)},Y=function(t,e){v(t);for(var n,r=m(e=w(e)),i=0,o=r.length;i<o;)H(t,n=r[i++],e[n]);return t},X=function(t){var e=F.call(this,t=S(t,!0));return!(this===j&&a(q,t)&&!a(B,t))&&(!(e||!a(this,t)||!a(q,t)||a(this,M)&&this[M][t])||e)},$=function(t,e){if(t=w(t),e=S(e,!0),t!==j||!a(q,e)||a(B,e)){var n=D(t,e);return!n||!a(q,e)||a(t,M)&&t[M][e]||(n.enumerable=!0),n}},J=function(t){for(var e,n=x(w(t)),r=[],i=0;n.length>i;)a(q,e=n[i++])||e==M||e==u||r.push(e);return r},Z=function(t){for(var e,n=t===j,r=x(n?B:w(t)),i=[],o=0;r.length>o;)!a(q,e=r[o++])||n&&!a(j,e)||i.push(q[e]);return i};V||(s((A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var e=h(0<arguments.length?arguments[0]:void 0),n=function(t){this===j&&n.call(B,t),a(this,M)&&a(this[M],e)&&(this[M][e]=!1),K(this,e,E(1,t))};return i&&z&&K(j,e,{configurable:!0,set:n}),Q(e)})[R],"toString",function(){return this._k}),C.f=$,I.f=H,n(38).f=_.f=J,n(49).f=X,n(51).f=Z,i&&!n(34)&&s(j,"propertyIsEnumerable",X,!0),d.f=function(t){return Q(p(t))}),o(o.G+o.W+o.F*!V,{Symbol:A});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)p(tt[et++]);for(var nt=k(p.store),rt=0;nt.length>rt;)y(nt[rt++]);o(o.S+o.F*!V,"Symbol",{for:function(t){return a(U,t+="")?U[t]:U[t]=A(t)},keyFor:function(t){if(!G(t))throw TypeError(t+" is not a symbol!");for(var e in U)if(U[e]===t)return e},useSetter:function(){z=!0},useSimple:function(){z=!1}}),o(o.S+o.F*!V,"Object",{create:function(t,e){return void 0===e?T(t):Y(T(t),e)},defineProperty:H,defineProperties:Y,getOwnPropertyDescriptor:$,getOwnPropertyNames:J,getOwnPropertySymbols:Z}),O&&o(o.S+o.F*(!V||c(function(){var t=A();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(b(e)||void 0!==t)&&!G(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!G(e))return e}),r[1]=e,P.apply(O,r)}}),A[R][L]||n(15)(A[R],L,A[R].valueOf),f(A,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(t,e,n){var s=n(35),u=n(51),c=n(49);t.exports=function(t){var e=s(t),n=u.f;if(n)for(var r,i=n(t),o=c.f,a=0;i.length>a;)o.call(t,r=i[a++])&&e.push(r);return e}},function(t,e,n){var r=n(1);r(r.S,"Object",{create:n(37)})},function(t,e,n){var r=n(1);r(r.S+r.F*!n(9),"Object",{defineProperty:n(8).f})},function(t,e,n){var r=n(1);r(r.S+r.F*!n(9),"Object",{defineProperties:n(92)})},function(t,e,n){var r=n(16),i=n(20).f;n(21)("getOwnPropertyDescriptor",function(){return function(t,e){return i(r(t),e)}})},function(t,e,n){var r=n(17),i=n(39);n(21)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(17),i=n(35);n(21)("keys",function(){return function(t){return i(r(t))}})},function(t,e,n){n(21)("getOwnPropertyNames",function(){return n(93).f})},function(t,e,n){var r=n(5),i=n(30).onFreeze;n(21)("freeze",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(t,e,n){var r=n(5),i=n(30).onFreeze;n(21)("seal",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(t,e,n){var r=n(5),i=n(30).onFreeze;n(21)("preventExtensions",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(t,e,n){var r=n(5);n(21)("isFrozen",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(t,e,n){var r=n(5);n(21)("isSealed",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(t,e,n){var r=n(5);n(21)("isExtensible",function(e){return function(t){return!!r(t)&&(!e||e(t))}})},function(t,e,n){var r=n(1);r(r.S+r.F,"Object",{assign:n(94)})},function(t,e,n){var r=n(1);r(r.S,"Object",{is:n(146)})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){var r=n(1);r(r.S,"Object",{setPrototypeOf:n(69).set})},function(t,e,n){"use strict";var r=n(52),i={};i[n(7)("toStringTag")]="z",i+""!="[object z]"&&n(12)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){var r=n(1);r(r.P,"Function",{bind:n(95)})},function(t,e,n){var r=n(8).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(9)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var r=n(5),i=n(39),o=n(7)("hasInstance"),a=Function.prototype;o in a||n(8).f(a,o,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var r=n(1),i=n(97);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(t,e,n){var r=n(1),i=n(98);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(t,e,n){"use strict";var r=n(4),i=n(14),o=n(25),a=n(71),l=n(29),s=n(3),u=n(38).f,c=n(20).f,f=n(8).f,h=n(53).trim,p="Number",d=r[p],y=d,m=d.prototype,g=o(n(37)(m))==p,v="trim"in String.prototype,b=function(t){var e=l(t,!1);if("string"==typeof e&&2<e.length){var n,r,i,o=(e=v?e.trim():h(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,s=e.slice(2),u=0,c=s.length;u<c;u++)if((a=s.charCodeAt(u))<48||i<a)return NaN;return parseInt(s,r)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof d&&(g?s(function(){m.valueOf.call(n)}):o(n)!=p)?a(new y(b(e)),n,d):b(e)};for(var w,S=n(9)?u(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;S.length>E;E++)i(y,w=S[E])&&!i(d,w)&&f(d,w,c(y,w));(d.prototype=m).constructor=d,n(12)(r,p,d)}},function(t,e,n){"use strict";var r=n(1),c=n(27),l=n(99),f=n(72),i=1..toFixed,o=Math.floor,a=[0,0,0,0,0,0],h="Number.toFixed: incorrect invocation!",p=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*a[n],a[n]=r%1e7,r=o(r/1e7)},d=function(t){for(var e=6,n=0;0<=--e;)n+=a[e],a[e]=o(n/t),n=n%t*1e7},y=function(){for(var t=6,e="";0<=--t;)if(""!==e||0===t||0!==a[t]){var n=String(a[t]);e=""===e?n:e+f.call("0",7-n.length)+n}return e},m=function(t,e,n){return 0===e?n:e%2==1?m(t,e-1,n*t):m(t*t,e/2,n)};r(r.P+r.F*(!!i&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(3)(function(){i.call({})})),"Number",{toFixed:function(t){var e,n,r,i,o=l(this,h),a=c(t),s="",u="0";if(a<0||20<a)throw RangeError(h);if(o!=o)return"NaN";if(o<=-1e21||1e21<=o)return String(o);if(o<0&&(s="-",o=-o),1e-21<o)if(n=(e=function(t){for(var e=0,n=t;4096<=n;)e+=12,n/=4096;for(;2<=n;)e+=1,n/=2;return e}(o*m(2,69,1))-69)<0?o*m(2,-e,1):o/m(2,e,1),n*=4503599627370496,0<(e=52-e)){for(p(0,n),r=a;7<=r;)p(1e7,0),r-=7;for(p(m(10,r,1),0),r=e-1;23<=r;)d(1<<23),r-=23;d(1<<r),p(1,1),d(2),u=y()}else p(0,n),p(1<<-e,0),u=y()+f.call("0",a);return u=0<a?s+((i=u.length)<=a?"0."+f.call("0",a-i)+u:u.slice(0,i-a)+"."+u.slice(i-a)):s+u}})},function(t,e,n){"use strict";var r=n(1),i=n(3),o=n(99),a=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},function(t,e,n){var r=n(1);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var r=n(1),i=n(4).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,e,n){var r=n(1);r(r.S,"Number",{isInteger:n(100)})},function(t,e,n){var r=n(1);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(1),i=n(100),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,e,n){var r=n(1);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var r=n(1);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(1),i=n(98);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,e,n){var r=n(1),i=n(97);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,e,n){var r=n(1),i=n(101),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:94906265.62425156<t?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,e,n){var r=n(1),i=Math.asinh;r(r.S+r.F*!(i&&0<1/i(0)),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,n){var r=n(1),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var r=n(1),i=n(73);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,n){var r=n(1);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var r=n(1),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,e,n){var r=n(1),i=n(74);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,e,n){var r=n(1);r(r.S,"Math",{fround:n(174)})},function(t,e,n){var o=n(73),r=Math.pow,a=r(2,-52),s=r(2,-23),u=r(2,127)*(2-s),c=r(2,-126);t.exports=Math.fround||function(t){var e,n,r=Math.abs(t),i=o(t);return r<c?i*(r/c/s+1/a-1/a)*c*s:u<(n=(e=(1+s/a)*r)-(e-r))||n!=n?i*(1/0):i*n}},function(t,e,n){var r=n(1),u=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,i=0,o=0,a=arguments.length,s=0;o<a;)s<(n=u(arguments[o++]))?(i=i*(r=s/n)*r+1,s=n):i+=0<n?(r=n/s)*r:n;return s===1/0?1/0:s*Math.sqrt(i)}})},function(t,e,n){var r=n(1),i=Math.imul;r(r.S+r.F*n(3)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,e){var n=65535,r=+t,i=+e,o=n&r,a=n&i;return 0|o*a+((n&r>>>16)*a+o*(n&i>>>16)<<16>>>0)}})},function(t,e,n){var r=n(1);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,n){var r=n(1);r(r.S,"Math",{log1p:n(101)})},function(t,e,n){var r=n(1);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var r=n(1);r(r.S,"Math",{sign:n(73)})},function(t,e,n){var r=n(1),i=n(74),o=Math.exp;r(r.S+r.F*n(3)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,n){var r=n(1),i=n(74),o=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},function(t,e,n){var r=n(1);r(r.S,"Math",{trunc:function(t){return(0<t?Math.floor:Math.ceil)(t)}})},function(t,e,n){var r=n(1),o=n(36),a=String.fromCharCode,i=String.fromCodePoint;r(r.S+r.F*(!!i&&1!=i.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,i=0;i<r;){if(e=+arguments[i++],o(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?a(e):a(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){var r=n(1),a=n(16),s=n(11);r(r.S,"String",{raw:function(t){for(var e=a(t.raw),n=s(e.length),r=arguments.length,i=[],o=0;o<n;)i.push(String(e[o++])),o<r&&i.push(String(arguments[o]));return i.join("")}})},function(t,e,n){"use strict";n(53)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var r=n(102)(!0);n(75)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var r=n(1),i=n(102)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(1),a=n(11),s=n(76),u="endsWith",c=""[u];r(r.P+r.F*n(78)(u),"String",{endsWith:function(t){var e=s(this,t,u),n=1<arguments.length?arguments[1]:void 0,r=a(e.length),i=void 0===n?r:Math.min(a(n),r),o=String(t);return c?c.call(e,o,i):e.slice(i-o.length,i)===o}})},function(t,e,n){"use strict";var r=n(1),i=n(76),o="includes";r(r.P+r.F*n(78)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,1<arguments.length?arguments[1]:void 0)}})},function(t,e,n){var r=n(1);r(r.P,"String",{repeat:n(72)})},function(t,e,n){"use strict";var r=n(1),i=n(11),o=n(76),a="startsWith",s=""[a];r(r.P+r.F*n(78)(a),"String",{startsWith:function(t){var e=o(this,t,a),n=i(Math.min(1<arguments.length?arguments[1]:void 0,e.length)),r=String(t);return s?s.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";n(13)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(t,e,n){"use strict";n(13)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(13)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(13)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";n(13)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(13)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(t,e,n){"use strict";n(13)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(t,e,n){"use strict";n(13)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";n(13)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(t,e,n){"use strict";n(13)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";n(13)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(13)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(13)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){var r=n(1);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var r=n(1),i=n(17),o=n(29);r(r.P+r.F*n(3)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=i(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var r=n(1),i=n(209);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,e,n){"use strict";var r=n(3),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(t){return 9<t?t:"0"+t};t.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!r(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":9999<e?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(99<n?n:"0"+a(n))+"Z"}:o},function(t,e,n){var r=Date.prototype,i="Invalid Date",o="toString",a=r[o],s=r.getTime;new Date(NaN)+""!=i&&n(12)(r,o,function(){var t=s.call(this);return t==t?a.call(this):i})},function(t,e,n){var r=n(7)("toPrimitive"),i=Date.prototype;r in i||n(15)(i,r,n(212))},function(t,e,n){"use strict";var r=n(6),i=n(29);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),"number"!=t)}},function(t,e,n){var r=n(1);r(r.S,"Array",{isArray:n(67)})},function(t,e,n){"use strict";var h=n(23),r=n(1),p=n(17),d=n(104),y=n(79),m=n(11),g=n(80),v=n(81);r(r.S+r.F*!n(54)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,i,o=p(t),a="function"==typeof this?this:Array,s=arguments.length,u=1<s?arguments[1]:void 0,c=void 0!==u,l=0,f=v(o);if(c&&(u=h(u,2<s?arguments[2]:void 0,2)),null==f||a==Array&&y(f))for(n=new a(e=m(o.length));l<e;l++)g(n,l,c?u(o[l],l):o[l]);else for(i=f.call(o),n=new a;!(r=i.next()).done;l++)g(n,l,c?d(i,u,[r.value,l],!0):r.value);return n.length=l,n}})},function(t,e,n){"use strict";var r=n(1),i=n(80);r(r.S+r.F*n(3)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);t<e;)i(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var r=n(1),i=n(16),o=[].join;r(r.P+r.F*(n(48)!=Object||!n(19)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var r=n(1),i=n(68),c=n(25),l=n(36),f=n(11),h=[].slice;r(r.P+r.F*n(3)(function(){i&&h.call(i)}),"Array",{slice:function(t,e){var n=f(this.length),r=c(this);if(e=void 0===e?n:e,"Array"==r)return h.call(this,t,e);for(var i=l(t,n),o=l(e,n),a=f(o-i),s=new Array(a),u=0;u<a;u++)s[u]="String"==r?this.charAt(i+u):this[i+u];return s}})},function(t,e,n){"use strict";var r=n(1),i=n(24),o=n(17),a=n(3),s=[].sort,u=[1,2,3];r(r.P+r.F*(a(function(){u.sort(void 0)})||!a(function(){u.sort(null)})||!n(19)(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),i(t))}})},function(t,e,n){"use strict";var r=n(1),i=n(22)(0),o=n(19)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,e,n){var r=n(221);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(5),i=n(67),o=n(7)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var r=n(1),i=n(22)(1);r(r.P+r.F*!n(19)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(1),i=n(22)(2);r(r.P+r.F*!n(19)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(1),i=n(22)(3);r(r.P+r.F*!n(19)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(1),i=n(22)(4);r(r.P+r.F*!n(19)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(1),i=n(105);r(r.P+r.F*!n(19)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";var r=n(1),i=n(105);r(r.P+r.F*!n(19)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var r=n(1),i=n(50)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(19)(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(1),i=n(16),o=n(27),a=n(11),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(19)(s)),"Array",{lastIndexOf:function(t){if(u)return s.apply(this,arguments)||0;var e=i(this),n=a(e.length),r=n-1;for(1<arguments.length&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);0<=r;r--)if(r in e&&e[r]===t)return r||0;return-1}})},function(t,e,n){var r=n(1);r(r.P,"Array",{copyWithin:n(106)}),n(42)("copyWithin")},function(t,e,n){var r=n(1);r(r.P,"Array",{fill:n(82)}),n(42)("fill")},function(t,e,n){"use strict";var r=n(1),i=n(22)(5),o="find",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{find:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),n(42)(o)},function(t,e,n){"use strict";var r=n(1),i=n(22)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),n(42)(o)},function(t,e,n){n(43)("Array")},function(t,e,n){var r=n(4),o=n(71),i=n(8).f,a=n(38).f,s=n(77),u=n(84),c=r.RegExp,l=c,f=c.prototype,h=/a/g,p=/a/g,d=new c(h)!==h;if(n(9)&&(!d||n(3)(function(){return p[n(7)("match")]=!1,c(h)!=h||c(p)==p||"/a/i"!=c(h,"i")}))){c=function(t,e){var n=this instanceof c,r=s(t),i=void 0===e;return!n&&r&&t.constructor===c&&i?t:o(d?new l(r&&!i?t.source:t,e):l((r=t instanceof c)?t.source:t,r&&i?u.call(t):e),n?this:f,c)};for(var y=function(e){e in c||i(c,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})},m=a(l),g=0;m.length>g;)y(m[g++]);(f.constructor=c).prototype=f,n(12)(r,"RegExp",c)}n(43)("RegExp")},function(t,e,n){"use strict";n(108);var r=n(6),i=n(84),o=n(9),a="toString",s=/./[a],u=function(t){n(12)(RegExp.prototype,a,t,!0)};n(3)(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?u(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):s.name!=a&&u(function(){return s.call(this)})},function(t,e,n){n(55)("match",1,function(r,i,t){return[function(t){"use strict";var e=r(this),n=null==t?void 0:t[i];return void 0!==n?n.call(t,e):new RegExp(t)[i](String(e))},t]})},function(t,e,n){n(55)("replace",2,function(i,o,a){return[function(t,e){"use strict";var n=i(this),r=null==t?void 0:t[o];return void 0!==r?r.call(t,n,e):a.call(String(n),t,e)},a]})},function(t,e,n){n(55)("search",1,function(r,i,t){return[function(t){"use strict";var e=r(this),n=null==t?void 0:t[i];return void 0!==n?n.call(t,e):new RegExp(t)[i](String(e))},t]})},function(t,e,n){n(55)("split",2,function(i,o,a){"use strict";var p=n(77),d=a,y=[].push,t="split",m="length";if("c"=="abbc"[t](/(b)*/)[1]||4!="test"[t](/(?:)/,-1)[m]||2!="ab"[t](/(?:ab)*/)[m]||4!="."[t](/(.?)(.?)/)[m]||1<"."[t](/()()/)[m]||""[t](/.?/)[m]){var g=void 0===/()??/.exec("")[1];a=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!p(t))return d.call(n,t,e);var r,i,o,a,s,u=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,f=void 0===e?4294967295:e>>>0,h=new RegExp(t.source,c+"g");for(g||(r=new RegExp("^"+h.source+"$(?!\\s)",c));(i=h.exec(n))&&!(l<(o=i.index+i[0][m])&&(u.push(n.slice(l,i.index)),!g&&1<i[m]&&i[0].replace(r,function(){for(s=1;s<arguments[m]-2;s++)void 0===arguments[s]&&(i[s]=void 0)}),1<i[m]&&i.index<n[m]&&y.apply(u,i.slice(1)),a=i[0][m],l=o,u[m]>=f));)h.lastIndex===i.index&&h.lastIndex++;return l===n[m]?!a&&h.test("")||u.push(""):u.push(n.slice(l)),u[m]>f?u.slice(0,f):u}}else"0"[t](void 0,0)[m]&&(a=function(t,e){return void 0===t&&0===e?[]:d.call(this,t,e)});return[function(t,e){var n=i(this),r=null==t?void 0:t[o];return void 0!==r?r.call(t,n,e):a.call(String(n),t,e)},a]})},function(t,e,n){var s=n(4),u=n(85).set,c=s.MutationObserver||s.WebKitMutationObserver,l=s.process,f=s.Promise,h="process"==n(25)(l);t.exports=function(){var n,r,i,t=function(){var t,e;for(h&&(t=l.domain)&&t.exit();n;){e=n.fn,n=n.next;try{e()}catch(t){throw n?i():r=void 0,t}}r=void 0,t&&t.enter()};if(h)i=function(){l.nextTick(t)};else if(!c||s.navigator&&s.navigator.standalone)if(f&&f.resolve){var e=f.resolve(void 0);i=function(){e.then(t)}}else i=function(){u.call(s,t)};else{var o=!0,a=document.createTextNode("");new c(t).observe(a,{characterData:!0}),i=function(){a.data=o=!o}}return function(t){var e={fn:t,next:void 0};r&&(r.next=e),n||(n=e,i()),r=e}}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){"use strict";var r=n(112),i=n(46);t.exports=n(59)("Map",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(i(this,"Map"),0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(112),i=n(46);t.exports=n(59)("Set",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var o,r=n(22)(0),a=n(12),i=n(30),s=n(94),u=n(113),c=n(5),l=n(3),f=n(46),h="WeakMap",p=i.getWeak,d=Object.isExtensible,y=u.ufstore,m={},g=function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},v={get:function(t){if(c(t)){var e=p(t);return!0===e?y(f(this,h)).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(f(this,h),t,e)}},b=t.exports=n(59)(h,g,v,u,!0,!0);l(function(){return 7!=(new b).set((Object.freeze||Object)(m),7).get(m)})&&(s((o=u.getConstructor(g,h)).prototype,v),i.NEED=!0,r(["delete","has","get","set"],function(r){var t=b.prototype,i=t[r];a(t,r,function(t,e){if(!c(t)||d(t))return i.call(this,t,e);this._f||(this._f=new o);var n=this._f[r](t,e);return"set"==r?this:n})}))},function(t,e,n){"use strict";var r=n(113),i=n(46);n(59)("WeakSet",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"WeakSet"),t,!0)}},r,!1,!0)},function(t,e,n){"use strict";var r=n(1),i=n(60),o=n(86),c=n(6),l=n(36),f=n(11),a=n(5),s=n(4).ArrayBuffer,h=n(57),p=o.ArrayBuffer,d=o.DataView,u=i.ABV&&s.isView,y=p.prototype.slice,m=i.VIEW,g="ArrayBuffer";r(r.G+r.W+r.F*(s!==p),{ArrayBuffer:p}),r(r.S+r.F*!i.CONSTR,g,{isView:function(t){return u&&u(t)||a(t)&&m in t}}),r(r.P+r.U+r.F*n(3)(function(){return!new p(2).slice(1,void 0).byteLength}),g,{slice:function(t,e){if(void 0!==y&&void 0===e)return y.call(c(this),t);for(var n=c(this).byteLength,r=l(t,n),i=l(void 0===e?n:e,n),o=new(h(this,p))(f(i-r)),a=new d(this),s=new d(o),u=0;r<i;)s.setUint8(u++,a.getUint8(r++));return o}}),n(43)(g)},function(t,e,n){var r=n(1);r(r.G+r.W+r.F*!n(60).ABV,{DataView:n(86).DataView})},function(t,e,n){n(28)("Int8",1,function(r){return function(t,e,n){return r(this,t,e,n)}})},function(t,e,n){n(28)("Uint8",1,function(r){return function(t,e,n){return r(this,t,e,n)}})},function(t,e,n){n(28)("Uint8",1,function(r){return function(t,e,n){return r(this,t,e,n)}},!0)},function(t,e,n){n(28)("Int16",2,function(r){return function(t,e,n){return r(this,t,e,n)}})},function(t,e,n){n(28)("Uint16",2,function(r){return function(t,e,n){return r(this,t,e,n)}})},function(t,e,n){n(28)("Int32",4,function(r){return function(t,e,n){return r(this,t,e,n)}})},function(t,e,n){n(28)("Uint32",4,function(r){return function(t,e,n){return r(this,t,e,n)}})},function(t,e,n){n(28)("Float32",4,function(r){return function(t,e,n){return r(this,t,e,n)}})},function(t,e,n){n(28)("Float64",8,function(r){return function(t,e,n){return r(this,t,e,n)}})},function(t,e,n){var r=n(1),o=n(24),a=n(6),s=(n(4).Reflect||{}).apply,u=Function.apply;r(r.S+r.F*!n(3)(function(){s(function(){})}),"Reflect",{apply:function(t,e,n){var r=o(t),i=a(n);return s?s(r,e,i):u.call(r,e,i)}})},function(t,e,n){var r=n(1),s=n(37),u=n(24),c=n(6),l=n(5),i=n(3),f=n(95),h=(n(4).Reflect||{}).construct,p=i(function(){function t(){}return!(h(function(){},[],t)instanceof t)}),d=!i(function(){h(function(){})});r(r.S+r.F*(p||d),"Reflect",{construct:function(t,e){u(t),c(e);var n=arguments.length<3?t:u(arguments[2]);if(d&&!p)return h(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(f.apply(t,r))}var i=n.prototype,o=s(l(i)?i:Object.prototype),a=Function.apply.call(t,o,e);return l(a)?a:o}})},function(t,e,n){var r=n(8),i=n(1),o=n(6),a=n(29);i(i.S+i.F*n(3)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){o(t),e=a(e,!0),o(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var r=n(1),i=n(20).f,o=n(6);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var r=n(1),i=n(6),o=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(103)(o,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),r(r.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,n){var a=n(20),s=n(39),u=n(14),r=n(1),c=n(5),l=n(6);r(r.S,"Reflect",{get:function t(e,n){var r,i,o=arguments.length<3?e:arguments[2];return l(e)===o?e[n]:(r=a.f(e,n))?u(r,"value")?r.value:void 0!==r.get?r.get.call(o):void 0:c(i=s(e))?t(i,n,o):void 0}})},function(t,e,n){var r=n(20),i=n(1),o=n(6);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(o(t),e)}})},function(t,e,n){var r=n(1),i=n(39),o=n(6);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,e,n){var r=n(1);r(r.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var r=n(1),i=n(6),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,e,n){var r=n(1);r(r.S,"Reflect",{ownKeys:n(115)})},function(t,e,n){var r=n(1),i=n(6),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,n){var u=n(8),c=n(20),l=n(39),f=n(14),r=n(1),h=n(32),p=n(6),d=n(5);r(r.S,"Reflect",{set:function t(e,n,r){var i,o,a=arguments.length<4?e:arguments[3],s=c.f(p(e),n);if(!s){if(d(o=l(e)))return t(o,n,r,a);s=h(0)}if(f(s,"value")){if(!1===s.writable||!d(a))return!1;if(i=c.f(a,n)){if(i.get||i.set||!1===i.writable)return!1;i.value=r,u.f(a,n,i)}else u.f(a,n,h(0,r));return!0}return void 0!==s.set&&(s.set.call(a,r),!0)}})},function(t,e,n){var r=n(1),i=n(69);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){n(273),t.exports=n(10).Array.includes},function(t,e,n){"use strict";var r=n(1),i=n(50)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0)}}),n(42)("includes")},function(t,e,n){n(275),t.exports=n(10).String.padStart},function(t,e,n){"use strict";var r=n(1),i=n(116),o=n(58);r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padStart:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!0)}})},function(t,e,n){n(277),t.exports=n(10).String.padEnd},function(t,e,n){"use strict";var r=n(1),i=n(116),o=n(58);r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padEnd:function(t){return i(this,t,1<arguments.length?arguments[1]:void 0,!1)}})},function(t,e,n){n(279),t.exports=n(64).f("asyncIterator")},function(t,e,n){n(90)("asyncIterator")},function(t,e,n){n(281),t.exports=n(10).Object.getOwnPropertyDescriptors},function(t,e,n){var r=n(1),u=n(115),c=n(16),l=n(20),f=n(80);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=c(t),i=l.f,o=u(r),a={},s=0;o.length>s;)void 0!==(n=i(r,e=o[s++]))&&f(a,e,n);return a}})},function(t,e,n){n(283),t.exports=n(10).Object.values},function(t,e,n){var r=n(1),i=n(117)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,e,n){n(285),t.exports=n(10).Object.entries},function(t,e,n){var r=n(1),i=n(117)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},function(t,e,n){"use strict";n(109),n(287),t.exports=n(10).Promise.finally},function(t,e,n){"use strict";var r=n(1),i=n(10),o=n(4),a=n(57),s=n(111);r(r.P+r.R,"Promise",{finally:function(e){var n=a(this,i.Promise||o.Promise),t="function"==typeof e;return this.then(t?function(t){return s(n,e()).then(function(){return t})}:e,t?function(t){return s(n,e()).then(function(){throw t})}:e)}})},function(t,e,n){n(289),n(290),n(291),t.exports=n(10)},function(t,e,n){var r=n(4),i=n(1),o=n(58),a=[].slice,s=/MSIE .\./.test(o),u=function(i){return function(t,e){var n=2<arguments.length,r=!!n&&a.call(arguments,2);return i(n?function(){("function"==typeof t?t:Function(t)).apply(this,r)}:t,e)}};i(i.G+i.B+i.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(t,e,n){var r=n(1),i=n(85);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,n){for(var r=n(83),i=n(35),o=n(12),a=n(4),s=n(15),u=n(41),c=n(7),l=c("iterator"),f=c("toStringTag"),h=u.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(p),y=0;y<d.length;y++){var m,g=d[y],v=p[g],b=a[g],w=b&&b.prototype;if(w&&(w[l]||s(w,l,h),w[f]||s(w,f,g),u[g]=h,v))for(m in r)w[m]||o(w,m,r[m],!0)}},function(O,t){!function(t){"use strict";var u,e=Object.prototype,c=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag",a="object"==typeof O,s=t.regeneratorRuntime;if(s)a&&(O.exports=s);else{(s=t.regeneratorRuntime=a?O.exports:{}).wrap=b;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",y={},l={};l[i]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(x([])));g&&g!==e&&c.call(g,i)&&(l=g);var v=T.prototype=S.prototype=Object.create(l);E.prototype=v.constructor=T,T.constructor=E,T[o]=E.displayName="GeneratorFunction",s.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,T):(t.__proto__=T,o in t||(t[o]="GeneratorFunction")),t.prototype=Object.create(v),t},s.awrap=function(t){return{__await:t}},_(C.prototype),C.prototype[r]=function(){return this},s.AsyncIterator=C,s.async=function(t,e,n,r){var i=new C(b(t,e,n,r));return s.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},_(v),v[o]="Generator",v[i]=function(){return this},v.toString=function(){return"[object Generator]"},s.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},s.values=x,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(D),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=u)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=u),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=c.call(i,"catchLoc"),s=c.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),D(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;D(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=u),y}}}function b(t,e,n,r){var o,a,s,u,i=e&&e.prototype instanceof S?e:S,c=Object.create(i.prototype),l=new N(r||[]);return c._invoke=(o=t,a=n,s=l,u=f,function(t,e){if(u===p)throw new Error("Generator is already running");if(u===d){if("throw"===t)throw e;return A()}for(s.method=t,s.arg=e;;){var n=s.delegate;if(n){var r=I(n,s);if(r){if(r===y)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(u===f)throw u=d,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);u=p;var i=w(o,a,s);if("normal"===i.type){if(u=s.done?d:h,i.arg===y)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(u=d,s.method="throw",s.arg=i.arg)}}),c}function w(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function S(){}function E(){}function T(){}function _(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function C(u){var e;this._invoke=function(n,r){function t(){return new Promise(function(t,e){!function e(t,n,r,i){var o=w(u[t],u,n);if("throw"!==o.type){var a=o.arg,s=a.value;return s&&"object"==typeof s&&c.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):Promise.resolve(s).then(function(t){a.value=t,r(a)},i)}i(o.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function I(t,e){var n=t.iterator[e.method];if(n===u){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=u,I(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var r=w(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,y;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=u),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function x(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(c.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=u,t.done=!0,t};return r.next=r}}return{next:A}}function A(){return{value:u,done:!0}}}(function(){return this}()||Function("return this")())},function(t,e,n){"use strict";
/** @license React v16.6.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=n(118),r="function"==typeof Symbol&&Symbol.for,f=r?Symbol.for("react.element"):60103,c=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,a=r?Symbol.for("react.profiler"):60114,s=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,y=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,g="function"==typeof Symbol&&Symbol.iterator;function v(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(t,e,n,r,i,o,a,s){if(!t){if((t=void 0)===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(t=Error(e.replace(/%s/g,function(){return u[c++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w={};function S(t,e,n){this.props=t,this.context=e,this.refs=w,this.updater=n||b}function E(){}function T(t,e,n){this.props=t,this.context=e,this.refs=w,this.updater=n||b}S.prototype.isReactComponent={},S.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t&&v("85"),this.updater.enqueueSetState(this,t,e,"setState")},S.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},E.prototype=S.prototype;var _=T.prototype=new E;_.constructor=T,l(_,S.prototype),_.isPureReactComponent=!0;var C={current:null,currentDispatcher:null},I=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function D(t,e,n){var r=void 0,i={},o=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)I.call(e,r)&&!k.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:f,type:t,key:o,ref:a,props:i,_owner:C.current}}function N(t){return"object"==typeof t&&null!==t&&t.$$typeof===f}var x=/\/+/g,A=[];function O(t,e,n,r){if(A.length){var i=A.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function P(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,A.length<10&&A.push(t)}function R(t,e,n){return null==t?0:function t(e,n,r,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case f:case c:a=!0}}if(a)return r(i,e,""===n?"."+M(e,0):n),1;if(a=0,n=""===n?".":n+":",Array.isArray(e))for(var s=0;s<e.length;s++){var u=n+M(o=e[s],s);a+=t(o,u,r,i)}else if("function"==typeof(u=null===e||"object"!=typeof e?null:"function"==typeof(u=g&&e[g]||e["@@iterator"])?u:null))for(e=u.call(e),s=0;!(o=e.next()).done;)a+=t(o=o.value,u=n+M(o,s++),r,i);else"object"===o&&v("31","[object Object]"==(r=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":r,"");return a}(t,"",e,n)}function M(t,e){return"object"==typeof t&&null!==t&&null!=t.key?(n=t.key,r={"=":"=0",":":"=2"},"$"+(""+n).replace(/[=:]/g,function(t){return r[t]})):e.toString(36);var n,r}function L(t,e){t.func.call(t.context,e,t.count++)}function F(t,e,n){var r,i,o=t.result,a=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?U(t,o,n,function(t){return t}):null!=t&&(N(t)&&(i=a+(!(r=t).key||e&&e.key===t.key?"":(""+t.key).replace(x,"$&/")+"/")+n,t={$$typeof:f,type:r.type,key:i,ref:r.ref,props:r.props,_owner:r._owner}),o.push(t))}function U(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(x,"$&/")+"/"),R(t,F,e=O(e,o,r,i)),P(e)}var q={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return U(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;R(t,L,e=O(null,null,e,n)),P(e)},count:function(t){return R(t,function(){return null},null)},toArray:function(t){var e=[];return U(t,e,null,function(t){return t}),e},only:function(t){return N(t)||v("143"),t}},createRef:function(){return{current:null}},Component:S,PureComponent:T,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:u,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:p,render:t}},lazy:function(t){return{$$typeof:m,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:y,type:t,compare:void 0===e?null:e}},Fragment:i,StrictMode:o,Suspense:d,createElement:D,cloneElement:function(t,e,n){null==t&&v("267",t);var r=void 0,i=l({},t.props),o=t.key,a=t.ref,s=t._owner;if(null!=e){void 0!==e.ref&&(a=e.ref,s=C.current),void 0!==e.key&&(o=""+e.key);var u=void 0;for(r in t.type&&t.type.defaultProps&&(u=t.type.defaultProps),e)I.call(e,r)&&!k.hasOwnProperty(r)&&(i[r]=void 0===e[r]&&void 0!==u?u[r]:e[r])}if(1===(r=arguments.length-2))i.children=n;else if(1<r){u=Array(r);for(var c=0;c<r;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:f,type:t.type,key:o,ref:a,props:i,_owner:s}},createFactory:function(t){var e=D.bind(null,t);return e.type=t,e},isValidElement:N,version:"16.6.3",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:C,assign:l}};q.unstable_ConcurrentMode=h,q.unstable_Profiler=a;var B={default:q},j=q||B;t.exports=j.default||j},function(t,e,n){"use strict";
/** @license React v16.6.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=n(0),v=n(118),r=n(295);function M(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(t,e,n,r,i,o,a,s){if(!t){if((t=void 0)===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(t=Error(e.replace(/%s/g,function(){return u[c++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}i||M("227");var l=!1,f=null,h=!1,p=null,c={onError:function(t){l=!0,f=t}};function d(t,e,n,r,i,o,a,s,u){l=!1,f=null,function(t,e,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(t){this.onError(t)}}.apply(c,arguments)}var y=null,m={};function o(){if(y)for(var t in m){var e=m[t],n=y.indexOf(t);if(-1<n||M("96",t),!b[n])for(var r in e.extractEvents||M("97",t),n=(b[n]=e).eventTypes){var i=void 0,o=n[r],a=e,s=r;w.hasOwnProperty(s)&&M("99",s);var u=(w[s]=o).phasedRegistrationNames;if(u){for(i in u)u.hasOwnProperty(i)&&g(u[i],a,s);i=!0}else i=!!o.registrationName&&(g(o.registrationName,a,s),!0);i||M("98",r,t)}}}function g(t,e,n){S[t]&&M("100",t),S[t]=e,u[t]=e.eventTypes[n].dependencies}var b=[],w={},S={},u={},a=null,s=null,E=null;function T(t,e,n){var r=t.type||"unknown-event";t.currentTarget=E(n),function(t,e,n,r,i,o,a,s,u){if(d.apply(this,arguments),l){if(l){var c=f;l=!1,f=null}else M("198"),c=void 0;h||(h=!0,p=c)}}(r,e,void 0,t),t.currentTarget=null}function _(t,e){return null==e&&M("30"),null==t?e:Array.isArray(t)?(Array.isArray(e)?t.push.apply(t,e):t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function C(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var I=null;function k(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)T(t,e[r],n[r]);else e&&T(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}var D={injectEventPluginOrder:function(t){y&&M("101"),y=Array.prototype.slice.call(t),o()},injectEventPluginsByName:function(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];m.hasOwnProperty(e)&&m[e]===r||(m[e]&&M("102",e),m[e]=r,n=!0)}n&&o()}};function N(t,e){var n=t.stateNode;if(!n)return null;var r=a(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}return t?null:(n&&"function"!=typeof n&&M("231",e,typeof n),n)}function x(t){if(null!==t&&(I=_(I,t)),t=I,I=null,t&&(C(t,k),I&&M("95"),h))throw t=p,h=!1,p=null,t}var A=Math.random().toString(36).slice(2),O="__reactInternalInstance$"+A,P="__reactEventHandlers$"+A;function R(t){if(t[O])return t[O];for(;!t[O];){if(!t.parentNode)return null;t=t.parentNode}return 5===(t=t[O]).tag||6===t.tag?t:null}function L(t){return!(t=t[O])||5!==t.tag&&6!==t.tag?null:t}function F(t){if(5===t.tag||6===t.tag)return t.stateNode;M("33")}function U(t){return t[P]||null}function q(t){for(;(t=t.return)&&5!==t.tag;);return t||null}function B(t,e,n){(e=N(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=_(n._dispatchListeners,e),n._dispatchInstances=_(n._dispatchInstances,t))}function j(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=q(e);for(e=n.length;0<e--;)B(n[e],"captured",t);for(e=0;e<n.length;e++)B(n[e],"bubbled",t)}}function V(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=N(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=_(n._dispatchListeners,e),n._dispatchInstances=_(n._dispatchInstances,t))}function W(t){t&&t.dispatchConfig.registrationName&&V(t._targetInst,null,t)}function z(t){C(t,j)}var K=!("undefined"==typeof window||!window.document||!window.document.createElement);function Q(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var G={animationend:Q("Animation","AnimationEnd"),animationiteration:Q("Animation","AnimationIteration"),animationstart:Q("Animation","AnimationStart"),transitionend:Q("Transition","TransitionEnd")},H={},Y={};function X(t){if(H[t])return H[t];if(!G[t])return t;var e,n=G[t];for(e in n)if(n.hasOwnProperty(e)&&e in Y)return H[t]=n[e];return t}K&&(Y=document.createElement("div").style,"AnimationEvent"in window||(delete G.animationend.animation,delete G.animationiteration.animation,delete G.animationstart.animation),"TransitionEvent"in window||delete G.transitionend.transition);var $=X("animationend"),J=X("animationiteration"),Z=X("animationstart"),tt=X("transitionend"),et="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nt=null,rt=null,it=null;function ot(){if(it)return it;var t,e,n=rt,r=n.length,i="value"in nt?nt.value:nt.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return it=i.slice(t,1<e?1-e:void 0)}function at(){return!0}function st(){return!1}function ut(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?at:st,this.isPropagationStopped=st,this}function ct(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function lt(t){t instanceof this||M("279"),t.destructor(),this.eventPool.length<10&&this.eventPool.push(t)}function ft(t){t.eventPool=[],t.getPooled=ct,t.release=lt}v(ut.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=at)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=at)},persist:function(){this.isPersistent=at},isPersistent:st,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=st,this._dispatchInstances=this._dispatchListeners=null}}),ut.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ut.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var i=new e;return v(i,n.prototype),((n.prototype=i).constructor=n).Interface=v({},r.Interface,t),n.extend=r.extend,ft(n),n},ft(ut);var ht=ut.extend({data:null}),pt=ut.extend({data:null}),dt=[9,13,27,32],yt=K&&"CompositionEvent"in window,mt=null;K&&"documentMode"in document&&(mt=document.documentMode);var gt=K&&"TextEvent"in window&&!mt,vt=K&&(!yt||mt&&8<mt&&mt<=11),bt=String.fromCharCode(32),wt={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},St=!1;function Et(t,e){switch(t){case"keyup":return-1!==dt.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Tt(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var _t=!1;var Ct={eventTypes:wt,extractEvents:function(t,e,n,r){var i=void 0,o=void 0;if(yt)t:{switch(t){case"compositionstart":i=wt.compositionStart;break t;case"compositionend":i=wt.compositionEnd;break t;case"compositionupdate":i=wt.compositionUpdate;break t}i=void 0}else _t?Et(t,n)&&(i=wt.compositionEnd):"keydown"===t&&229===n.keyCode&&(i=wt.compositionStart);return o=i?(vt&&"ko"!==n.locale&&(_t||i!==wt.compositionStart?i===wt.compositionEnd&&_t&&(o=ot()):(rt="value"in(nt=r)?nt.value:nt.textContent,_t=!0)),i=ht.getPooled(i,e,n,r),o?i.data=o:null!==(o=Tt(n))&&(i.data=o),z(i),i):null,(t=gt?function(t,e){switch(t){case"compositionend":return Tt(e);case"keypress":return 32!==e.which?null:(St=!0,bt);case"textInput":return(t=e.data)===bt&&St?null:t;default:return null}}(t,n):function(t,e){if(_t)return"compositionend"===t||!yt&&Et(t,e)?(t=ot(),it=rt=nt=null,_t=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vt&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=pt.getPooled(wt.beforeInput,e,n,r)).data=t,z(e)):e=null,null===o?e:null===e?o:[o,e]}},It=null,kt=null,Dt=null;function Nt(t){if(t=s(t)){"function"!=typeof It&&M("280");var e=a(t.stateNode);It(t.stateNode,t.type,e)}}function xt(t){kt?Dt?Dt.push(t):Dt=[t]:kt=t}function At(){if(kt){var t=kt,e=Dt;if(Dt=kt=null,Nt(t),e)for(t=0;t<e.length;t++)Nt(e[t])}}function Ot(t,e){return t(e)}function Pt(t,e,n){return t(e,n)}function Rt(){}var Mt=!1;function Lt(t,e){if(Mt)return t(e);Mt=!0;try{return Ot(t,e)}finally{Mt=!1,(null!==kt||null!==Dt)&&(Rt(),At())}}var Ft={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ut(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Ft[t.type]:"textarea"===e}function qt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function Bt(t){if(!K)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"==typeof e[t]),e}function jt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Vt(t){t._valueTracker||(t._valueTracker=function(t){var e=jt(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Wt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=jt(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}var zt=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kt=/^(.*)[\\\/]/,Qt="function"==typeof Symbol&&Symbol.for,Gt=Qt?Symbol.for("react.element"):60103,Ht=Qt?Symbol.for("react.portal"):60106,Yt=Qt?Symbol.for("react.fragment"):60107,Xt=Qt?Symbol.for("react.strict_mode"):60108,$t=Qt?Symbol.for("react.profiler"):60114,Jt=Qt?Symbol.for("react.provider"):60109,Zt=Qt?Symbol.for("react.context"):60110,te=Qt?Symbol.for("react.concurrent_mode"):60111,ee=Qt?Symbol.for("react.forward_ref"):60112,ne=Qt?Symbol.for("react.suspense"):60113,re=Qt?Symbol.for("react.memo"):60115,ie=Qt?Symbol.for("react.lazy"):60116,oe="function"==typeof Symbol&&Symbol.iterator;function ae(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=oe&&t[oe]||t["@@iterator"])?t:null}function se(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case te:return"ConcurrentMode";case Yt:return"Fragment";case Ht:return"Portal";case $t:return"Profiler";case Xt:return"StrictMode";case ne:return"Suspense"}if("object"==typeof t)switch(t.$$typeof){case Zt:return"Context.Consumer";case Jt:return"Context.Provider";case ee:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case re:return se(t.type);case ie:if(t=1===t._status?t._result:null)return se(t)}return null}function ue(t){var e="";do{t:switch(t.tag){case 2:case 16:case 0:case 1:case 5:case 8:case 13:var n=t._debugOwner,r=t._debugSource,i=se(t.type),o=null;n&&(o=se(n.type)),n=i,i="",r?i=" (at "+r.fileName.replace(Kt,"")+":"+r.lineNumber+")":o&&(i=" (created by "+o+")"),o="\n    in "+(n||"Unknown")+i;break t;default:o=""}e+=o,t=t.return}while(t);return e}var ce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,le=Object.prototype.hasOwnProperty,fe={},he={};function pe(t,e,n,r,i){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e}var de={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){de[t]=new pe(t,0,!1,t,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];de[e]=new pe(e,1,!1,t[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){de[t]=new pe(t,2,!1,t.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){de[t]=new pe(t,2,!1,t,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){de[t]=new pe(t,3,!1,t.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(t){de[t]=new pe(t,3,!0,t,null)}),["capture","download"].forEach(function(t){de[t]=new pe(t,4,!1,t,null)}),["cols","rows","size","span"].forEach(function(t){de[t]=new pe(t,6,!1,t,null)}),["rowSpan","start"].forEach(function(t){de[t]=new pe(t,5,!1,t.toLowerCase(),null)});var ye=/[\-:]([a-z])/g;function me(t){return t[1].toUpperCase()}function ge(t,e,n,r){var i,o=de.hasOwnProperty(e)?de[e]:null;(null!==o?0===o.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null==e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||e<1}return!1}(e,n,o,r)&&(n=null),r||null===o?(i=e,(le.call(he,i)||!le.call(fe,i)&&(ce.test(i)?he[i]=!0:!(fe[i]=!0)))&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n))):o.mustUseProperty?t[o.propertyName]=null===n?3!==o.type&&"":n:(e=o.attributeName,r=o.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}function ve(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function be(t,e){var n=e.checked;return v({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function we(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=ve(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Se(t,e){null!=(e=e.checked)&&ge(t,"checked",e,!1)}function Ee(t,e){Se(t,e);var n=ve(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?_e(t,e.type,n):e.hasOwnProperty("defaultValue")&&_e(t,e.type,ve(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Te(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function _e(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ye,me);de[e]=new pe(e,1,!1,t,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ye,me);de[e]=new pe(e,1,!1,t,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ye,me);de[e]=new pe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace")}),de.tabIndex=new pe("tabIndex",1,!1,"tabindex",null);var Ce={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Ie(t,e,n){return(t=ut.getPooled(Ce.change,t,e,n)).type="change",xt(n),z(t),t}var ke=null,De=null;function Ne(t){x(t)}function xe(t){if(Wt(F(t)))return t}function Ae(t,e){if("change"===t)return e}var Oe=!1;function Pe(){ke&&(ke.detachEvent("onpropertychange",Re),De=ke=null)}function Re(t){"value"===t.propertyName&&xe(De)&&Lt(Ne,t=Ie(De,t,qt(t)))}function Me(t,e,n){"focus"===t?(Pe(),De=n,(ke=e).attachEvent("onpropertychange",Re)):"blur"===t&&Pe()}function Le(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return xe(De)}function Fe(t,e){if("click"===t)return xe(e)}function Ue(t,e){if("input"===t||"change"===t)return xe(e)}K&&(Oe=Bt("input")&&(!document.documentMode||9<document.documentMode));var qe={eventTypes:Ce,_isInputEventSupported:Oe,extractEvents:function(t,e,n,r){var i=e?F(e):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=Ae:Ut(i)?Oe?o=Ue:(o=Le,a=Me):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Fe),o&&(o=o(t,e)))return Ie(o,n,r);a&&a(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&_e(i,"number",i.value)}},Be=ut.extend({view:null,detail:null}),je={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ve(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=je[t])&&!!e[t]}function We(){return Ve}var ze=0,Ke=0,Qe=!1,Ge=!1,He=Be.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:We,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=ze;return ze=t.screenX,Qe?"mousemove"===t.type?t.screenX-e:0:(Qe=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Ke;return Ke=t.screenY,Ge?"mousemove"===t.type?t.screenY-e:0:(Ge=!0,0)}}),Ye=He.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Xe={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},$e={eventTypes:Xe,extractEvents:function(t,e,n,r){var i="mouseover"===t||"pointerover"===t,o="mouseout"===t||"pointerout"===t;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=e,e=(e=n.relatedTarget||n.toElement)?R(e):null):o=null,o===e)return null;var a=void 0,s=void 0,u=void 0,c=void 0;"mouseout"===t||"mouseover"===t?(a=He,s=Xe.mouseLeave,u=Xe.mouseEnter,c="mouse"):"pointerout"!==t&&"pointerover"!==t||(a=Ye,s=Xe.pointerLeave,u=Xe.pointerEnter,c="pointer");var l=null==o?i:F(o);if(i=null==e?i:F(e),(t=a.getPooled(s,o,n,r)).type=c+"leave",t.target=l,t.relatedTarget=i,(n=a.getPooled(u,e,n,r)).type=c+"enter",n.target=i,n.relatedTarget=l,r=e,o&&r)t:{for(i=r,c=0,a=e=o;a;a=q(a))c++;for(a=0,u=i;u;u=q(u))a++;for(;0<c-a;)e=q(e),c--;for(;0<a-c;)i=q(i),a--;for(;c--;){if(e===i||e===i.alternate)break t;e=q(e),i=q(i)}e=null}else e=null;for(i=e,e=[];o&&o!==i&&(null===(c=o.alternate)||c!==i);)e.push(o),o=q(o);for(o=[];r&&r!==i&&(null===(c=r.alternate)||c!==i);)o.push(r),r=q(r);for(r=0;r<e.length;r++)V(e[r],"bubbled",t);for(r=o.length;0<r--;)V(o[r],"captured",n);return[t,n]}},Je=Object.prototype.hasOwnProperty;function Ze(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function tn(t,e){if(Ze(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Je.call(e,n[r])||!Ze(t[n[r]],e[n[r]]))return!1;return!0}function en(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!=(2&e.effectTag))return 1;for(;e.return;)if(0!=(2&(e=e.return).effectTag))return 1}return 3===e.tag?2:3}function nn(t){2!==en(t)&&M("188")}function rn(t){if(!(t=function(t){var e=t.alternate;if(!e)return 3===(e=en(t))&&M("188"),1===e?null:t;for(var n=t,r=e;;){var i=n.return,o=i?i.alternate:null;if(!i||!o)break;if(i.child===o.child){for(var a=i.child;a;){if(a===n)return nn(i),t;if(a===r)return nn(i),e;a=a.sibling}M("188")}if(n.return!==r.return)n=i,r=o;else{a=!1;for(var s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}a||M("189")}}n.alternate!==r&&M("190")}return 3!==n.tag&&M("188"),n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e=(e.child.return=e).child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}var on=ut.extend({animationName:null,elapsedTime:null,pseudoElement:null}),an=ut.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sn=Be.extend({relatedTarget:null});function un(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ln={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn=Be.extend({key:function(t){if(t.key){var e=cn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=un(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?ln[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:We,charCode:function(t){return"keypress"===t.type?un(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?un(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),hn=He.extend({dataTransfer:null}),pn=Be.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:We}),dn=ut.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),yn=He.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),mn=[["abort","abort"],[$,"animationEnd"],[J,"animationIteration"],[Z,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[tt,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],gn={},vn={};function bn(t,e){var n=t[0],r="on"+((t=t[1])[0].toUpperCase()+t.slice(1));e={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:e},gn[t]=e,vn[n]=e}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(t){bn(t,!0)}),mn.forEach(function(t){bn(t,!1)});var wn={eventTypes:gn,isInteractiveTopLevelEventType:function(t){return void 0!==(t=vn[t])&&!0===t.isInteractive},extractEvents:function(t,e,n,r){var i=vn[t];if(!i)return null;switch(t){case"keypress":if(0===un(n))return null;case"keydown":case"keyup":t=fn;break;case"blur":case"focus":t=sn;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=He;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=pn;break;case $:case J:case Z:t=on;break;case tt:t=dn;break;case"scroll":t=Be;break;case"wheel":t=yn;break;case"copy":case"cut":case"paste":t=an;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Ye;break;default:t=ut}return z(e=t.getPooled(i,e,n,r)),e}},Sn=wn.isInteractiveTopLevelEventType,En=[];function Tn(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;t.ancestors.push(n),n=R(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=qt(t.nativeEvent);r=t.topLevelType;for(var o=t.nativeEvent,a=null,s=0;s<b.length;s++){var u=b[s];u&&(u=u.extractEvents(r,e,o,i))&&(a=_(a,u))}x(a)}}var _n=!0;function Cn(t,e){if(!e)return null;var n=(Sn(t)?kn:Dn).bind(null,t);e.addEventListener(t,n,!1)}function In(t,e){if(!e)return null;var n=(Sn(t)?kn:Dn).bind(null,t);e.addEventListener(t,n,!0)}function kn(t,e){Pt(Dn,t,e)}function Dn(t,e){if(_n){var n=qt(e);if(null===(n=R(n))||"number"!=typeof n.tag||2===en(n)||(n=null),En.length){var r=En.pop();r.topLevelType=t,r.nativeEvent=e,r.targetInst=n,t=r}else t={topLevelType:t,nativeEvent:e,targetInst:n,ancestors:[]};try{Lt(Tn,t)}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,En.length<10&&En.push(t)}}}var Nn={},xn=0,An="_reactListenersID"+(""+Math.random()).slice(2);function On(t){return Object.prototype.hasOwnProperty.call(t,An)||(t[An]=xn++,Nn[t[An]]={}),Nn[t[An]]}function Pn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Rn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Mn(t,e){var n,r=Rn(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&e<=n)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Rn(r)}}function Ln(){for(var t=window,e=Pn();e instanceof t.HTMLIFrameElement;){try{t=e.contentDocument.defaultView}catch(t){break}e=Pn(t.document)}return e}function Fn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var Un=K&&"documentMode"in document&&document.documentMode<=11,qn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Bn=null,jn=null,Vn=null,Wn=!1;function zn(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Wn||null==Bn||Bn!==Pn(n)?null:(n="selectionStart"in(n=Bn)&&Fn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Vn&&tn(Vn,n)?null:(Vn=n,(t=ut.getPooled(qn.select,jn,t,e)).type="select",t.target=Bn,z(t),t))}var Kn={eventTypes:qn,extractEvents:function(t,e,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){t:{o=On(o),i=u.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break t}}o=!0}i=!o}if(i)return null;switch(o=e?F(e):window,t){case"focus":(Ut(o)||"true"===o.contentEditable)&&(Bn=o,jn=e,Vn=null);break;case"blur":Vn=jn=Bn=null;break;case"mousedown":Wn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Wn=!1,zn(n,r);case"selectionchange":if(Un)break;case"keydown":case"keyup":return zn(n,r)}return null}};function Qn(t,e){var n,r;return t=v({children:void 0},e),n=e.children,r="",i.Children.forEach(n,function(t){null!=t&&(r+=t)}),(e=r)&&(t.children=e),t}function Gn(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ve(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function Hn(t,e){return null!=e.dangerouslySetInnerHTML&&M("91"),v({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yn(t,e){var n=e.value;null==n&&(n=e.defaultValue,null!=(e=e.children)&&(null!=n&&M("92"),Array.isArray(e)&&(e.length<=1||M("93"),e=e[0]),n=e),null==n&&(n="")),t._wrapperState={initialValue:ve(n)}}function Xn(t,e){var n=ve(e.value),r=ve(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function $n(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}D.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),a=U,s=L,E=F,D.injectEventPluginsByName({SimpleEventPlugin:wn,EnterLeaveEventPlugin:$e,ChangeEventPlugin:qe,SelectEventPlugin:Kn,BeforeInputEventPlugin:Ct});var Jn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Zn(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tr(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Zn(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var er,nr=void 0,rr=(er=function(t,e){if(t.namespaceURI!==Jn.svg||"innerHTML"in t)t.innerHTML=e;else{for((nr=nr||document.createElement("div")).innerHTML="<svg>"+e+"</svg>",e=nr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction(function(){return er(t,e)})}:er);function ir(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var or={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ar=["Webkit","ms","Moz","O"];function sr(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||or.hasOwnProperty(t)&&or[t]?(""+e).trim():e+"px"}function ur(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=sr(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(or).forEach(function(e){ar.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),or[t]=or[e]})});var cr=v({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lr(t,e){e&&(cr[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML)&&M("137",t,""),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&M("60"),"object"==typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML||M("61")),null!=e.style&&"object"!=typeof e.style&&M("62",""))}function fr(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function hr(t,e){var n=On(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=u[e];for(var r=0;r<e.length;r++){var i=e[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":In("scroll",t);break;case"focus":case"blur":In("focus",t),In("blur",t),n.blur=!0,n.focus=!0;break;case"cancel":case"close":Bt(i)&&In(i,t);break;case"invalid":case"submit":case"reset":break;default:-1===et.indexOf(i)&&Cn(i,t)}n[i]=!0}}}function pr(){}var dr=null,yr=null;function mr(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function gr(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var vr="function"==typeof setTimeout?setTimeout:void 0,br="function"==typeof clearTimeout?clearTimeout:void 0;function wr(t){for(t=t.nextSibling;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}function Sr(t){for(t=t.firstChild;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}new Set;var Er=[],Tr=-1;function _r(t){Tr<0||(t.current=Er[Tr],Er[Tr]=null,Tr--)}function Cr(t,e){Er[++Tr]=t.current,t.current=e}var Ir={},kr={current:Ir},Dr={current:!1},Nr=Ir;function xr(t,e){var n=t.type.contextTypes;if(!n)return Ir;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Ar(t){return null!=(t=t.childContextTypes)}function Or(t){_r(Dr),_r(kr)}function Pr(t){_r(Dr),_r(kr)}function Rr(t,e,n){kr.current!==Ir&&M("168"),Cr(kr,e),Cr(Dr,n)}function Mr(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())i in t||M("108",se(e)||"Unknown",i);return v({},n,r)}function Lr(t){var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||Ir,Nr=kr.current,Cr(kr,e),Cr(Dr,Dr.current),!0}function Fr(t,e,n){var r=t.stateNode;r||M("169"),n?(e=Mr(t,e,Nr),r.__reactInternalMemoizedMergedChildContext=e,_r(Dr),_r(kr),Cr(kr,e)):_r(Dr),Cr(Dr,n)}var Ur=null,qr=null;function Br(e){return function(t){try{return e(t)}catch(t){}}}function jr(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.firstContextDependency=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Vr(t,e,n,r){return new jr(t,e,n,r)}function Wr(t){return!(!(t=t.prototype)||!t.isReactComponent)}function zr(t,e){var n=t.alternate;return null===n?((n=Vr(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,(n.alternate=t).alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,n.firstContextDependency=t.firstContextDependency,n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Kr(t,e,n,r,i,o){var a=2;if("function"==typeof(r=t))Wr(t)&&(a=1);else if("string"==typeof t)a=5;else t:switch(t){case Yt:return Qr(n.children,i,o,e);case te:return Gr(n,3|i,o,e);case Xt:return Gr(n,2|i,o,e);case $t:return(t=Vr(12,n,e,4|i)).elementType=$t,t.type=$t,t.expirationTime=o,t;case ne:return(t=Vr(13,n,e,i)).elementType=ne,t.type=ne,t.expirationTime=o,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case Jt:a=10;break t;case Zt:a=9;break t;case ee:a=11;break t;case re:a=14;break t;case ie:a=16,r=null;break t}M("130",null==t?t:typeof t,"")}return(e=Vr(a,n,e,i)).elementType=t,e.type=r,e.expirationTime=o,e}function Qr(t,e,n,r){return(t=Vr(7,t,r,e)).expirationTime=n,t}function Gr(t,e,n,r){return t=Vr(8,t,r,e),e=0==(1&e)?Xt:te,t.elementType=e,t.type=e,t.expirationTime=n,t}function Hr(t,e,n){return(t=Vr(6,t,null,e)).expirationTime=n,t}function Yr(t,e,n){return(e=Vr(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Xr(t,e){t.didError=!1;var n=t.earliestPendingTime;0===n?t.earliestPendingTime=t.latestPendingTime=e:n<e?t.earliestPendingTime=e:t.latestPendingTime>e&&(t.latestPendingTime=e),Zr(e,t)}function $r(t,e){t.didError=!1;var n=t.latestPingedTime;0!==n&&e<=n&&(t.latestPingedTime=0),n=t.earliestPendingTime;var r=t.latestPendingTime;n===e?t.earliestPendingTime=r===e?t.latestPendingTime=0:r:r===e&&(t.latestPendingTime=n),n=t.earliestSuspendedTime,r=t.latestSuspendedTime,0===n?t.earliestSuspendedTime=t.latestSuspendedTime=e:n<e?t.earliestSuspendedTime=e:e<r&&(t.latestSuspendedTime=e),Zr(e,t)}function Jr(t,e){var n=t.earliestPendingTime;return e<n&&(e=n),e<(t=t.earliestSuspendedTime)&&(e=t),e}function Zr(t,e){var n=e.earliestSuspendedTime,r=e.latestSuspendedTime,i=e.earliestPendingTime,o=e.latestPingedTime;0===(i=0!==i?i:o)&&(0===t||r<t)&&(i=r),0!==(t=i)&&t<n&&(t=n),e.nextExpirationTimeToWorkOn=i,e.expirationTime=t}var ti=!1;function ei(t){return{baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ni(t){return{baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ri(t){return{expirationTime:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function ii(t,e){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e)}function oi(t,e){var n=t.alternate;if(null===n){var r=t.updateQueue,i=null;null===r&&(r=t.updateQueue=ei(t.memoizedState))}else r=t.updateQueue,i=n.updateQueue,null===r?null===i?(r=t.updateQueue=ei(t.memoizedState),i=n.updateQueue=ei(n.memoizedState)):r=t.updateQueue=ni(i):null===i&&(i=n.updateQueue=ni(r));null===i||r===i?ii(r,e):null===r.lastUpdate||null===i.lastUpdate?(ii(r,e),ii(i,e)):(ii(r,e),i.lastUpdate=e)}function ai(t,e){var n=t.updateQueue;null===(n=null===n?t.updateQueue=ei(t.memoizedState):si(t,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=e:(n.lastCapturedUpdate.next=e,n.lastCapturedUpdate=e)}function si(t,e){var n=t.alternate;return null!==n&&e===n.updateQueue&&(e=t.updateQueue=ni(e)),e}function ui(t,e,n,r,i,o){switch(n.tag){case 1:return"function"==typeof(t=n.payload)?t.call(o,r,i):t;case 3:t.effectTag=-2049&t.effectTag|64;case 0:if(null==(i="function"==typeof(t=n.payload)?t.call(o,r,i):t))break;return v({},r,i);case 2:ti=!0}return r}function ci(t,e,n,r,i){ti=!1;for(var o=(e=si(t,e)).baseState,a=null,s=0,u=e.firstUpdate,c=o;null!==u;){var l=u.expirationTime;l<i?(null===a&&(a=u,o=c),s<l&&(s=l)):(c=ui(t,0,u,c,n,r),null!==u.callback&&(t.effectTag|=32,(u.nextEffect=null)===e.lastEffect?e.firstEffect=e.lastEffect=u:(e.lastEffect.nextEffect=u,e.lastEffect=u))),u=u.next}for(l=null,u=e.firstCapturedUpdate;null!==u;){var f=u.expirationTime;f<i?(null===l&&(l=u,null===a&&(o=c)),s<f&&(s=f)):(c=ui(t,0,u,c,n,r),null!==u.callback&&(t.effectTag|=32,(u.nextEffect=null)===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=u:(e.lastCapturedEffect.nextEffect=u,e.lastCapturedEffect=u))),u=u.next}null===a&&(e.lastUpdate=null),null===l?e.lastCapturedUpdate=null:t.effectTag|=32,null===a&&null===l&&(o=c),e.baseState=o,e.firstUpdate=a,e.firstCapturedUpdate=l,t.expirationTime=s,t.memoizedState=c}function li(t,e,n){null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),fi(e.firstEffect,n),e.firstEffect=e.lastEffect=null,fi(e.firstCapturedEffect,n),e.firstCapturedEffect=e.lastCapturedEffect=null}function fi(t,e){for(;null!==t;){var n=t.callback;if(null!==n){t.callback=null;var r=e;"function"!=typeof n&&M("191",n),n.call(r)}t=t.nextEffect}}function hi(t,e){return{value:t,source:e,stack:ue(e)}}var pi={current:null},di=null,yi=null,mi=null;function gi(t,e){var n=t.type._context;Cr(pi,n._currentValue),n._currentValue=e}function vi(t){var e=pi.current;_r(pi),t.type._context._currentValue=e}function bi(t){mi=yi=null,(di=t).firstContextDependency=null}function wi(t,e){return mi!==t&&!1!==e&&0!==e&&("number"==typeof e&&1073741823!==e||(mi=t,e=1073741823),e={context:t,observedBits:e,next:null},null===yi?(null===di&&M("293"),di.firstContextDependency=yi=e):yi=yi.next=e),t._currentValue}var Si={},Ei={current:Si},Ti={current:Si},_i={current:Si};function Ci(t){return t===Si&&M("174"),t}function Ii(t,e){Cr(_i,e),Cr(Ti,t),Cr(Ei,Si);var n=e.nodeType;switch(n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tr(null,"");break;default:e=tr(e=(n=8===n?e.parentNode:e).namespaceURI||null,n=n.tagName)}_r(Ei),Cr(Ei,e)}function ki(t){_r(Ei),_r(Ti),_r(_i)}function Di(t){Ci(_i.current);var e=Ci(Ei.current),n=tr(e,t.type);e!==n&&(Cr(Ti,t),Cr(Ei,n))}function Ni(t){Ti.current===t&&(_r(Ei),_r(Ti))}function xi(t,e){if(t&&t.defaultProps)for(var n in e=v({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var Ai=zt.ReactCurrentOwner,Oi=(new i.Component).refs;function Pi(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:v({},e,n),t.memoizedState=n,null!==(r=t.updateQueue)&&0===t.expirationTime&&(r.baseState=n)}var Ri={isMounted:function(t){return!!(t=t._reactInternalFiber)&&2===en(t)},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=_a(),i=ri(r=Xo(r,t));i.payload=e,null!=n&&(i.callback=n),Ko(),oi(t,i),Zo(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=_a(),i=ri(r=Xo(r,t));i.tag=1,i.payload=e,null!=n&&(i.callback=n),Ko(),oi(t,i),Zo(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=_a(),r=ri(n=Xo(n,t));r.tag=2,null!=e&&(r.callback=e),Ko(),oi(t,r),Zo(t,n)}};function Mi(t,e,n,r,i,o,a){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!tn(n,r)||!tn(i,o))}function Li(t,e,n){var r=!1,i=Ir,o=e.contextType;return e=new e(n,o="object"==typeof o&&null!==o?Ai.currentDispatcher.readContext(o):(i=Ar(e)?Nr:kr.current,(r=null!=(r=e.contextTypes))?xr(t,i):Ir)),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Ri,(t.stateNode=e)._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Fi(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ri.enqueueReplaceState(e,e.state,null)}function Ui(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Oi;var o=e.contextType;i.context="object"==typeof o&&null!==o?Ai.currentDispatcher.readContext(o):xr(t,o=Ar(e)?Nr:kr.current),null!==(o=t.updateQueue)&&(ci(t,o,n,i,r),i.state=t.memoizedState),"function"==typeof(o=e.getDerivedStateFromProps)&&(Pi(t,e,o,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Ri.enqueueReplaceState(i,i.state,null),null!==(o=t.updateQueue)&&(ci(t,o,n,i,r),i.state=t.memoizedState)),"function"==typeof i.componentDidMount&&(t.effectTag|=4)}var qi=Array.isArray;function Bi(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&M("289"),r=n.stateNode),r||M("147",t);var i=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===Oi&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}"string"!=typeof t&&M("284"),n._owner||M("290",t)}return t}function ji(t,e){"textarea"!==t.type&&M("31","[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function Vi(f){function h(t,e){if(f){var n=t.lastEffect;null!==n?(n.nextEffect=e,t.lastEffect=e):t.firstEffect=t.lastEffect=e,e.nextEffect=null,e.effectTag=8}}function p(t,e){if(!f)return null;for(;null!==e;)h(t,e),e=e.sibling;return null}function d(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(t,e,n){return(t=zr(t,e)).index=0,t.sibling=null,t}function y(t,e,n){return t.index=n,f?null!==(n=t.alternate)?(n=n.index)<e?(t.effectTag=2,e):n:(t.effectTag=2,e):e}function s(t){return f&&null===t.alternate&&(t.effectTag=2),t}function o(t,e,n,r){return null===e||6!==e.tag?(e=Hr(n,t.mode,r)).return=t:(e=a(e,n)).return=t,e}function u(t,e,n,r){return null!==e&&e.elementType===n.type?(r=a(e,n.props)).ref=Bi(t,e,n):(r=Kr(n.type,n.key,n.props,null,t.mode,r)).ref=Bi(t,e,n),r.return=t,r}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?(e=Yr(n,t.mode,r)).return=t:(e=a(e,n.children||[])).return=t,e}function l(t,e,n,r,i){return null===e||7!==e.tag?(e=Qr(n,t.mode,r,i)).return=t:(e=a(e,n)).return=t,e}function m(t,e,n){if("string"==typeof e||"number"==typeof e)return(e=Hr(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case Gt:return(n=Kr(e.type,e.key,e.props,null,t.mode,n)).ref=Bi(t,null,e),n.return=t,n;case Ht:return(e=Yr(e,t.mode,n)).return=t,e}if(qi(e)||ae(e))return(e=Qr(e,t.mode,n,null)).return=t,e;ji(t,e)}return null}function g(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:o(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Gt:return n.key===i?n.type===Yt?l(t,e,n.props.children,r,i):u(t,e,n,r):null;case Ht:return n.key===i?c(t,e,n,r):null}if(qi(n)||ae(n))return null!==i?null:l(t,e,n,r,null);ji(t,n)}return null}function v(t,e,n,r,i){if("string"==typeof r||"number"==typeof r)return o(e,t=t.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Gt:return t=t.get(null===r.key?n:r.key)||null,r.type===Yt?l(e,t,r.props.children,i,r.key):u(e,t,r,i);case Ht:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(qi(r)||ae(r))return l(e,t=t.get(n)||null,r,i,null);ji(e,r)}return null}return function(t,e,n,r){var i="object"==typeof n&&null!==n&&n.type===Yt&&null===n.key;i&&(n=n.props.children);var o="object"==typeof n&&null!==n;if(o)switch(n.$$typeof){case Gt:t:{for(o=n.key,i=e;null!==i;){if(i.key===o){if(7===i.tag?n.type===Yt:i.elementType===n.type){p(t,i.sibling),(e=a(i,n.type===Yt?n.props.children:n.props)).ref=Bi(t,i,n),e.return=t,t=e;break t}p(t,i);break}h(t,i),i=i.sibling}t=n.type===Yt?((e=Qr(n.props.children,t.mode,r,n.key)).return=t,e):((r=Kr(n.type,n.key,n.props,null,t.mode,r)).ref=Bi(t,e,n),r.return=t,r)}return s(t);case Ht:t:{for(i=n.key;null!==e;){if(e.key===i){if(4===e.tag&&e.stateNode.containerInfo===n.containerInfo&&e.stateNode.implementation===n.implementation){p(t,e.sibling),(e=a(e,n.children||[])).return=t,t=e;break t}p(t,e);break}h(t,e),e=e.sibling}(e=Yr(n,t.mode,r)).return=t,t=e}return s(t)}if("string"==typeof n||"number"==typeof n)return n=""+n,s(t=((e=null!==e&&6===e.tag?(p(t,e.sibling),a(e,n)):(p(t,e),Hr(n,t.mode,r))).return=t,e));if(qi(n))return function(e,t,n,r){for(var i=null,o=null,a=t,s=t=0,u=null;null!==a&&s<n.length;s++){a.index>s?(u=a,a=null):u=a.sibling;var c=g(e,a,n[s],r);if(null===c){null===a&&(a=u);break}f&&a&&null===c.alternate&&h(e,a),t=y(c,t,s),null===o?i=c:o.sibling=c,o=c,a=u}if(s===n.length)return p(e,a),i;if(null===a){for(;s<n.length;s++)(a=m(e,n[s],r))&&(t=y(a,t,s),null===o?i=a:o.sibling=a,o=a);return i}for(a=d(e,a);s<n.length;s++)(u=v(a,e,s,n[s],r))&&(f&&null!==u.alternate&&a.delete(null===u.key?s:u.key),t=y(u,t,s),null===o?i=u:o.sibling=u,o=u);return f&&a.forEach(function(t){return h(e,t)}),i}(t,e,n,r);if(ae(n))return function(e,t,n,r){var i=ae(n);"function"!=typeof i&&M("150"),null==(n=i.call(n))&&M("151");for(var o=i=null,a=t,s=t=0,u=null,c=n.next();null!==a&&!c.done;s++,c=n.next()){a.index>s?(u=a,a=null):u=a.sibling;var l=g(e,a,c.value,r);if(null===l){a||(a=u);break}f&&a&&null===l.alternate&&h(e,a),t=y(l,t,s),null===o?i=l:o.sibling=l,o=l,a=u}if(c.done)return p(e,a),i;if(null===a){for(;!c.done;s++,c=n.next())null!==(c=m(e,c.value,r))&&(t=y(c,t,s),null===o?i=c:o.sibling=c,o=c);return i}for(a=d(e,a);!c.done;s++,c=n.next())null!==(c=v(a,e,s,c.value,r))&&(f&&null!==c.alternate&&a.delete(null===c.key?s:c.key),t=y(c,t,s),null===o?i=c:o.sibling=c,o=c);return f&&a.forEach(function(t){return h(e,t)}),i}(t,e,n,r);if(o&&ji(t,n),void 0===n&&!i)switch(t.tag){case 1:case 0:M("152",(r=t.type).displayName||r.name||"Component")}return p(t,e)}}var Wi=Vi(!0),zi=Vi(!1),Ki=null,Qi=null,Gi=!1;function Hi(t,e){var n=Vr(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Yi(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1}}function Xi(t){if(Gi){var e=Qi;if(e){var n=e;if(!Yi(t,e)){if(!(e=wr(n))||!Yi(t,e))return t.effectTag|=2,Gi=!1,void(Ki=t);Hi(Ki,n)}Ki=t,Qi=Sr(e)}else t.effectTag|=2,Gi=!1,Ki=t}}function $i(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag;)t=t.return;Ki=t}function Ji(t){if(t!==Ki)return!1;if(!Gi)return $i(t),!(Gi=!0);var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!gr(e,t.memoizedProps))for(e=Qi;e;)Hi(t,e),e=wr(e);return $i(t),Qi=Ki?wr(t.stateNode):null,!0}function Zi(){Qi=Ki=null,Gi=!1}var to=zt.ReactCurrentOwner;function eo(t,e,n,r){e.child=null===t?zi(e,null,n,r):Wi(e,t.child,n,r)}function no(t,e,n,r,i){n=n.render;var o=e.ref;return bi(e),r=n(r,o),e.effectTag|=1,eo(t,e,r,i),e.child}function ro(t,e,n,r,i,o){if(null!==t)return a=t.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:tn)(i,r)&&t.ref===e.ref)?fo(t,e,o):(e.effectTag|=1,(t=zr(a,r)).ref=e.ref,(t.return=e).child=t);var a=n.type;return"function"!=typeof a||Wr(a)||void 0!==a.defaultProps||null!==n.compare?((t=Kr(n.type,null,r,null,e.mode,o)).ref=e.ref,(t.return=e).child=t):(e.tag=15,e.type=a,io(t,e,a,r,i,o))}function io(t,e,n,r,i,o){return null!==t&&i<o&&tn(t.memoizedProps,r)&&t.ref===e.ref?fo(t,e,o):ao(t,e,n,r,o)}function oo(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function ao(t,e,n,r,i){var o=Ar(n)?Nr:kr.current;return o=xr(e,o),bi(e),n=n(r,o),e.effectTag|=1,eo(t,e,n,i),e.child}function so(t,e,n,r,i){if(Ar(n)){var o=!0;Lr(e)}else o=!1;if(bi(e),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),Li(e,n,r),Ui(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,c=n.contextType;c="object"==typeof c&&null!==c?Ai.currentDispatcher.readContext(c):xr(e,c=Ar(n)?Nr:kr.current);var l=n.getDerivedStateFromProps,f="function"==typeof l||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Fi(e,a,r,c),ti=!1;var h=e.memoizedState;u=a.state=h;var p=e.updateQueue;null!==p&&(ci(e,p,r,a,i),u=e.memoizedState),r=s!==r||h!==u||Dr.current||ti?("function"==typeof l&&(Pi(e,n,l,r),u=e.memoizedState),(s=ti||Mi(e,n,s,r,h,u,c))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(e.effectTag|=4)):("function"==typeof a.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=c,s):("function"==typeof a.componentDidMount&&(e.effectTag|=4),!1)}else a=e.stateNode,s=e.memoizedProps,a.props=e.type===e.elementType?s:xi(e.type,s),u=a.context,c="object"==typeof(c=n.contextType)&&null!==c?Ai.currentDispatcher.readContext(c):xr(e,c=Ar(n)?Nr:kr.current),(f="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Fi(e,a,r,c),ti=!1,u=e.memoizedState,h=a.state=u,null!==(p=e.updateQueue)&&(ci(e,p,r,a,i),h=e.memoizedState),r=s!==r||u!==h||Dr.current||ti?("function"==typeof l&&(Pi(e,n,l,r),h=e.memoizedState),(l=ti||Mi(e,n,s,r,u,h,c))?(f||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,c),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,c)),"function"==typeof a.componentDidUpdate&&(e.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=h),a.props=r,a.state=h,a.context=c,l):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),!1);return uo(t,e,n,r,o,i)}function uo(t,e,n,r,i,o){oo(t,e);var a=0!=(64&e.effectTag);if(!r&&!a)return i&&Fr(e,n,!1),fo(t,e,o);r=e.stateNode,to.current=e;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&a?(e.child=Wi(e,t.child,null,o),e.child=Wi(e,null,s,o)):eo(t,e,s,o),e.memoizedState=r.state,i&&Fr(e,n,!0),e.child}function co(t){var e=t.stateNode;e.pendingContext?Rr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Rr(0,e.context,!1),Ii(t,e.containerInfo)}function lo(t,e,n){var r=e.mode,i=e.pendingProps,o=e.memoizedState;if(0==(64&e.effectTag)){o=null;var a=!1}else o={timedOutAt:null!==o?o.timedOutAt:0},a=!0,e.effectTag&=-65;return null===t?a?(a=i.fallback,i=Qr(null,r,0,null),0==(1&e.mode)&&(i.child=null!==e.memoizedState?e.child.child:e.child),r=Qr(a,r,n,null),i.sibling=r,(n=i).return=r.return=e):n=r=zi(e,null,i.children,n):null!==t.memoizedState?(t=(r=t.child).sibling,a?(n=i.fallback,i=zr(r,r.pendingProps),0==(1&e.mode)&&((a=null!==e.memoizedState?e.child.child:e.child)!==r.child&&(i.child=a)),r=i.sibling=zr(t,n,t.expirationTime),(n=i).childExpirationTime=0,n.return=r.return=e):n=r=Wi(e,r.child,i.children,n)):(t=t.child,a?(a=i.fallback,(i=Qr(null,r,0,null)).child=t,0==(1&e.mode)&&(i.child=null!==e.memoizedState?e.child.child:e.child),(r=i.sibling=Qr(a,r,n,null)).effectTag|=2,(n=i).childExpirationTime=0,n.return=r.return=e):r=n=Wi(e,t,i.children,n)),e.memoizedState=o,e.child=n,r}function fo(t,e,n){if(null!==t&&(e.firstContextDependency=t.firstContextDependency),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child&&M("153"),null!==e.child){for(n=zr(t=e.child,t.pendingProps,t.expirationTime),(e.child=n).return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=zr(t,t.pendingProps,t.expirationTime)).return=e;n.sibling=null}return e.child}function ho(t,e,n){var r=e.expirationTime;if(null!==t&&t.memoizedProps===e.pendingProps&&!Dr.current&&r<n){switch(e.tag){case 3:co(e),Zi();break;case 5:Di(e);break;case 1:Ar(e.type)&&Lr(e);break;case 4:Ii(e,e.stateNode.containerInfo);break;case 10:gi(e,e.memoizedProps.value);break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&n<=r?lo(t,e,n):null!==(e=fo(t,e,n))?e.sibling:null}return fo(t,e,n)}switch(e.expirationTime=0,e.tag){case 2:r=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps;var i=xr(e,kr.current);if(bi(e),i=r(t,i),e.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(e.tag=1,Ar(r)){var o=!0;Lr(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var a=r.getDerivedStateFromProps;"function"==typeof a&&Pi(e,r,a,t),i.updater=Ri,Ui((e.stateNode=i)._reactInternalFiber=e,r,t,n),e=uo(null,e,r,!0,o,n)}else e.tag=0,eo(null,e,i,n),e=e.child;return e;case 16:switch(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),o=e.pendingProps,t=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:throw e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._result=t}}(i),e.type=t,i=e.tag=function(t){if("function"==typeof t)return Wr(t)?1:0;if(null!=t){if((t=t.$$typeof)===ee)return 11;if(t===re)return 14}return 2}(t),o=xi(t,o),a=void 0,i){case 0:a=ao(null,e,t,o,n);break;case 1:a=so(null,e,t,o,n);break;case 11:a=no(null,e,t,o,n);break;case 14:a=ro(null,e,t,xi(t.type,o),r,n);break;default:M("283",t)}return a;case 0:return r=e.type,i=e.pendingProps,ao(t,e,r,i=e.elementType===r?i:xi(r,i),n);case 1:return r=e.type,i=e.pendingProps,so(t,e,r,i=e.elementType===r?i:xi(r,i),n);case 3:return co(e),null===(r=e.updateQueue)&&M("282"),i=null!==(i=e.memoizedState)?i.element:null,ci(e,r,e.pendingProps,null,n),e=(r=e.memoizedState.element)===i?(Zi(),fo(t,e,n)):(i=e.stateNode,(i=(null===t||null===t.child)&&i.hydrate)&&(Qi=Sr(e.stateNode.containerInfo),Ki=e,i=Gi=!0),i?(e.effectTag|=2,e.child=zi(e,null,r,n)):(eo(t,e,r,n),Zi()),e.child);case 5:return Di(e),null===t&&Xi(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,a=i.children,gr(r,i)?a=null:null!==o&&gr(r,o)&&(e.effectTag|=16),oo(t,e),e=1!==n&&1&e.mode&&i.hidden?(e.expirationTime=1,null):(eo(t,e,a,n),e.child);case 6:return null===t&&Xi(e),null;case 13:return lo(t,e,n);case 4:return Ii(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Wi(e,null,r,n):eo(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,no(t,e,r,i=e.elementType===r?i:xi(r,i),n);case 7:return eo(t,e,e.pendingProps,n),e.child;case 8:case 12:return eo(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,gi(e,o=i.value),null!==a){var s=a.value;if(0===(o=s===o&&(0!==s||1/s==1/o)||s!=s&&o!=o?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(a.children===i.children&&!Dr.current){e=fo(t,e,n);break t}}else for(null!==(a=e.child)&&(a.return=e);null!==a;){if(null!==(s=a.firstContextDependency))do{if(s.context===r&&0!=(s.observedBits&o)){if(1===a.tag){var u=ri(n);u.tag=2,oi(a,u)}a.expirationTime<n&&(a.expirationTime=n),null!==(u=a.alternate)&&u.expirationTime<n&&(u.expirationTime=n);for(var c=a.return;null!==c;){if(u=c.alternate,c.childExpirationTime<n)c.childExpirationTime=n,null!==u&&u.childExpirationTime<n&&(u.childExpirationTime=n);else{if(!(null!==u&&u.childExpirationTime<n))break;u.childExpirationTime=n}c=c.return}}u=a.child,s=s.next}while(null!==s);else u=10===a.tag&&a.type===e.type?null:a.child;if(null!==u)u.return=a;else for(u=a;null!==u;){if(u===e){u=null;break}if(null!==(a=u.sibling)){a.return=u.return,u=a;break}u=u.return}a=u}}eo(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,bi(e),r=r(i=wi(i,o.unstable_observedBits)),e.effectTag|=1,eo(t,e,r,n),e.child;case 14:return ro(t,e,i=e.type,o=xi(i.type,e.pendingProps),r,n);case 15:return io(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xi(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,Ar(r)?(t=!0,Lr(e)):t=!1,bi(e),Li(e,r,i),Ui(e,r,i,n),uo(null,e,r,!0,t,n);default:M("156")}}function po(t){t.effectTag|=4}var yo=void 0,mo=void 0,go=void 0,vo=void 0;function bo(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=ue(n)),null!==n&&se(n.type),e=e.value,null!==t&&1===t.tag&&se(t.type);try{console.error(e)}catch(t){setTimeout(function(){throw t})}}function wo(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Yo(e,t)}else t.current=null}function So(e){switch("function"==typeof qr&&qr(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n.destroy;if(null!==r){var i=e;try{r()}catch(t){Yo(i,t)}}n=n.next}while(n!==t)}break;case 1:if(wo(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Yo(e,t)}break;case 5:wo(e);break;case 4:_o(e)}}function Eo(t){return 5===t.tag||3===t.tag||4===t.tag}function To(t){t:{for(var e=t.return;null!==e;){if(Eo(e)){var n=e;break t}e=e.return}M("160"),n=void 0}var r=e=void 0;switch(n.tag){case 5:e=n.stateNode,r=!1;break;case 3:case 4:e=n.stateNode.containerInfo,r=!0;break;default:M("161")}16&n.effectTag&&(ir(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||Eo(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n=(n.child.return=n).child}if(!(2&n.effectTag)){n=n.stateNode;break t}}for(var i=t;;){if(5===i.tag||6===i.tag)if(n)if(r){var o=e,a=i.stateNode,s=n;8===o.nodeType?o.parentNode.insertBefore(a,s):o.insertBefore(a,s)}else e.insertBefore(i.stateNode,n);else r?(a=e,s=i.stateNode,8===a.nodeType?(o=a.parentNode).insertBefore(s,a):(o=a).appendChild(s),null!=(a=a._reactRootContainer)||null!==o.onclick||(o.onclick=pr)):e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i=(i.child.return=i).child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function _o(t){for(var e=t,n=!1,r=void 0,i=void 0;;){if(!n){n=e.return;t:for(;;){switch(null===n&&M("160"),n.tag){case 5:r=n.stateNode,i=!1;break t;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break t}n=n.return}n=!0}if(5===e.tag||6===e.tag){t:for(var o=e,a=o;;)if(So(a),null!==a.child&&4!==a.tag)a.child.return=a,a=a.child;else{if(a===o)break;for(;null===a.sibling;){if(null===a.return||a.return===o)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}i?(o=r,a=e.stateNode,8===o.nodeType?o.parentNode.removeChild(a):o.removeChild(a)):r.removeChild(e.stateNode)}else if(4===e.tag?(r=e.stateNode.containerInfo,i=!0):So(e),null!==e.child){e=(e.child.return=e).child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;4===(e=e.return).tag&&(n=!1)}e.sibling.return=e.return,e=e.sibling}}function Co(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 1:break;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if((e.updateQueue=null)!==o){for(n[P]=r,"input"===t&&"radio"===r.type&&null!=r.name&&Se(n,r),fr(t,i),e=fr(t,r),i=0;i<o.length;i+=2){var a=o[i],s=o[i+1];"style"===a?ur(n,s):"dangerouslySetInnerHTML"===a?rr(n,s):"children"===a?ir(n,s):ge(n,a,s,e)}switch(t){case"input":Ee(n,r);break;case"textarea":Xn(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(t=r.value)?Gn(n,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?Gn(n,!!r.multiple,r.defaultValue,!0):Gn(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 6:null===e.stateNode&&M("162"),e.stateNode.nodeValue=e.memoizedProps;break;case 3:case 12:break;case 13:if(null===(n=(t=e).memoizedState)?r=!1:(r=!0,t=e.child,0===n.timedOutAt&&(n.timedOutAt=_a())),null!==t)t:for(e=n=t;;){if(5===e.tag)(t=e.stateNode).style.display=r?"none":(t=e.stateNode,sr("display",o=null!=(o=e.memoizedProps.style)&&o.hasOwnProperty("display")?o.display:null));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState){(t=e.child.sibling).return=e,e=t;continue}if(null!==e.child){e=(e.child.return=e).child;continue}}if(e===n)break t;for(;null===e.sibling;){if(null===e.return||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}break;case 17:break;default:M("163")}}function Io(t,e,n){(n=ri(n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ra(r),bo(t,e)},n}function ko(n,r,t){(t=ri(t)).tag=3;var i=n.type.getDerivedStateFromError;if("function"==typeof i){var e=r.value;t.payload=function(){return i(e)}}var o=n.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(t.callback=function(){"function"!=typeof i&&(null===Wo?Wo=new Set([this]):Wo.add(this));var t=r.value,e=r.stack;bo(n,r),this.componentDidCatch(t,{componentStack:null!==e?e:""})}),t}function Do(t){switch(t.tag){case 1:Ar(t.type)&&Or();var e=t.effectTag;return 2048&e?(t.effectTag=-2049&e|64,t):null;case 3:return ki(),Pr(),0!=(64&(e=t.effectTag))&&M("285"),t.effectTag=-2049&e|64,t;case 5:return Ni(t),null;case 13:return 2048&(e=t.effectTag)?(t.effectTag=-2049&e|64,t):null;case 4:return ki(),null;case 10:return vi(t),null;default:return null}}yo=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n=(n.child.return=n).child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},mo=function(){},go=function(t,e,n,r,i){var o=t.memoizedProps;if(o!==r){var a=e.stateNode;switch(Ci(Ei.current),t=null,n){case"input":o=be(a,o),r=be(a,r),t=[];break;case"option":o=Qn(a,o),r=Qn(a,r),t=[];break;case"select":o=v({},o,{value:void 0}),r=v({},r,{value:void 0}),t=[];break;case"textarea":o=Hn(a,o),r=Hn(a,r),t=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(a.onclick=pr)}lr(n,r),a=n=void 0;var s=null;for(n in o)if(!r.hasOwnProperty(n)&&o.hasOwnProperty(n)&&null!=o[n])if("style"===n){var u=o[n];for(a in u)u.hasOwnProperty(a)&&(s||(s={}),s[a]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(S.hasOwnProperty(n)?t||(t=[]):(t=t||[]).push(n,null));for(n in r){var c=r[n];if(u=null!=o?o[n]:void 0,r.hasOwnProperty(n)&&c!==u&&(null!=c||null!=u))if("style"===n)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(s||(s={}),s[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(s||(s={}),s[a]=c[a])}else s||(t||(t=[]),t.push(n,s)),s=c;else"dangerouslySetInnerHTML"===n?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(t=t||[]).push(n,""+c)):"children"===n?u===c||"string"!=typeof c&&"number"!=typeof c||(t=t||[]).push(n,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(S.hasOwnProperty(n)?(null!=c&&hr(i,n),t||u===c||(t=[])):(t=t||[]).push(n,c))}s&&(t=t||[]).push("style",s),i=t,(e.updateQueue=i)&&po(e)}},vo=function(t,e,n,r){n!==r&&po(e)};var No={readContext:wi},xo=zt.ReactCurrentOwner,Ao=1073741822,Oo=0,Po=!1,Ro=null,Mo=null,Lo=0,Fo=-1,Uo=!1,qo=null,Bo=!1,jo=null,Vo=null,Wo=null;function zo(){if(null!==Ro)for(var t=Ro.return;null!==t;){var e=t;switch(e.tag){case 1:var n=e.type.childContextTypes;null!=n&&Or();break;case 3:ki(),Pr();break;case 5:Ni(e);break;case 4:ki();break;case 10:vi(e)}t=t.return}Lo=0,Uo=!(Fo=-1),Ro=Mo=null}function Ko(){null!==Vo&&(r.unstable_cancelCallback(jo),Vo())}function Qo(t){for(;;){var e=t.alternate,n=t.return,r=t.sibling;if(0==(1024&t.effectTag)){t:{var i=e,o=Lo,a=(e=Ro=t).pendingProps;switch(e.tag){case 2:case 16:break;case 15:case 0:break;case 1:Ar(e.type)&&Or();break;case 3:ki(),Pr(),(a=e.stateNode).pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==i&&null!==i.child||(Ji(e),e.effectTag&=-3),mo(e);break;case 5:Ni(e);var s=Ci(_i.current);if(o=e.type,null!==i&&null!=e.stateNode)go(i,e,o,a,s),i.ref!==e.ref&&(e.effectTag|=128);else if(a){var u=Ci(Ei.current);if(Ji(e)){i=(a=e).stateNode;var c=a.type,l=a.memoizedProps,f=s;switch(i[O]=a,i[P]=l,o=void 0,s=c){case"iframe":case"object":Cn("load",i);break;case"video":case"audio":for(c=0;c<et.length;c++)Cn(et[c],i);break;case"source":Cn("error",i);break;case"img":case"image":case"link":Cn("error",i),Cn("load",i);break;case"form":Cn("reset",i),Cn("submit",i);break;case"details":Cn("toggle",i);break;case"input":we(i,l),Cn("invalid",i),hr(f,"onChange");break;case"select":i._wrapperState={wasMultiple:!!l.multiple},Cn("invalid",i),hr(f,"onChange");break;case"textarea":Yn(i,l),Cn("invalid",i),hr(f,"onChange")}for(o in lr(s,l),c=null,l)l.hasOwnProperty(o)&&(u=l[o],"children"===o?"string"==typeof u?i.textContent!==u&&(c=["children",u]):"number"==typeof u&&i.textContent!==""+u&&(c=["children",""+u]):S.hasOwnProperty(o)&&null!=u&&hr(f,o));switch(s){case"input":Vt(i),Te(i,l,!0);break;case"textarea":Vt(i),$n(i);break;case"select":case"option":break;default:"function"==typeof l.onClick&&(i.onclick=pr)}o=c,a.updateQueue=o,(a=null!==o)&&po(e)}else{l=e,i=o,f=a,c=9===s.nodeType?s:s.ownerDocument,u===Jn.html&&(u=Zn(i)),u===Jn.html?"script"===i?((i=c.createElement("div")).innerHTML="<script><\/script>",c=i.removeChild(i.firstChild)):"string"==typeof f.is?c=c.createElement(i,{is:f.is}):(c=c.createElement(i),"select"===i&&f.multiple&&(c.multiple=!0)):c=c.createElementNS(u,i),(i=c)[O]=l,i[P]=a,yo(i,e,!1,!1),f=i;var h=s,p=fr(c=o,l=a);switch(c){case"iframe":case"object":Cn("load",f),s=l;break;case"video":case"audio":for(s=0;s<et.length;s++)Cn(et[s],f);s=l;break;case"source":Cn("error",f),s=l;break;case"img":case"image":case"link":Cn("error",f),Cn("load",f),s=l;break;case"form":Cn("reset",f),Cn("submit",f),s=l;break;case"details":Cn("toggle",f),s=l;break;case"input":we(f,l),s=be(f,l),Cn("invalid",f),hr(h,"onChange");break;case"option":s=Qn(f,l);break;case"select":f._wrapperState={wasMultiple:!!l.multiple},s=v({},l,{value:void 0}),Cn("invalid",f),hr(h,"onChange");break;case"textarea":Yn(f,l),s=Hn(f,l),Cn("invalid",f),hr(h,"onChange");break;default:s=l}lr(c,s),u=void 0;var d=c,y=f,m=s;for(u in m)if(m.hasOwnProperty(u)){var g=m[u];"style"===u?ur(y,g):"dangerouslySetInnerHTML"===u?null!=(g=g?g.__html:void 0)&&rr(y,g):"children"===u?"string"==typeof g?("textarea"!==d||""!==g)&&ir(y,g):"number"==typeof g&&ir(y,""+g):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(S.hasOwnProperty(u)?null!=g&&hr(h,u):null!=g&&ge(y,u,g,p))}switch(c){case"input":Vt(f),Te(f,l,!1);break;case"textarea":Vt(f),$n(f);break;case"option":null!=l.value&&f.setAttribute("value",""+ve(l.value));break;case"select":(s=f).multiple=!!l.multiple,null!=(f=l.value)?Gn(s,!!l.multiple,f,!1):null!=l.defaultValue&&Gn(s,!!l.multiple,l.defaultValue,!0);break;default:"function"==typeof s.onClick&&(f.onclick=pr)}(a=mr(o,a))&&po(e),e.stateNode=i}null!==e.ref&&(e.effectTag|=128)}else null===e.stateNode&&M("166");break;case 6:i&&null!=e.stateNode?vo(i,e,i.memoizedProps,a):("string"!=typeof a&&(null===e.stateNode&&M("166")),i=Ci(_i.current),Ci(Ei.current),Ji(e)?(o=(a=e).stateNode,i=a.memoizedProps,o[O]=a,(a=o.nodeValue!==i)&&po(e)):(o=e,(a=(9===i.nodeType?i:i.ownerDocument).createTextNode(a))[O]=e,o.stateNode=a));break;case 11:break;case 13:if(a=e.memoizedState,0!=(64&e.effectTag)){e.expirationTime=o,Ro=e;break t}a=null!==a,o=null!==i&&null!==i.memoizedState,null!==i&&!a&&o&&(null!==(i=i.child.sibling)&&(s=e.firstEffect,i.nextEffect=null!==s?(e.firstEffect=i,s):(e.firstEffect=e.lastEffect=i,null),i.effectTag=8)),(a!==o||0==(1&e.effectTag)&&a)&&(e.effectTag|=4);break;case 7:case 8:case 12:break;case 4:ki(),mo(e);break;case 10:vi(e);break;case 9:case 14:break;case 17:Ar(e.type)&&Or();break;default:M("156")}Ro=null}if(e=t,1===Lo||1!==e.childExpirationTime){for(a=0,o=e.child;null!==o;)a<(i=o.expirationTime)&&(a=i),a<(s=o.childExpirationTime)&&(a=s),o=o.sibling;e.childExpirationTime=a}if(null!==Ro)return Ro;null!==n&&0==(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=t.firstEffect),n.lastEffect=t.lastEffect),1<t.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=t:n.firstEffect=t,n.lastEffect=t))}else{if(null!==(t=Do(t)))return t.effectTag&=1023,t;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;t=n}return null}function Go(t){var e=ho(t.alternate,t,Lo);return t.memoizedProps=t.pendingProps,null===e&&(e=Qo(t)),xo.current=null,e}function Ho(e,t){Po&&M("243"),Ko(),Po=!0,xo.currentDispatcher=No;var n=e.nextExpirationTimeToWorkOn;n===Lo&&e===Mo&&null!==Ro||(zo(),Lo=n,Ro=zr((Mo=e).current,null),e.pendingCommitExpirationTime=0);for(var r=!1;;){try{if(t)for(;null!==Ro&&!Da();)Ro=Go(Ro);else for(;null!==Ro;)Ro=Go(Ro)}catch(t){if(mi=yi=di=null,null===Ro)r=!0,Ra(t);else{null===Ro&&M("271");var i=Ro,o=i.return;if(null!==o){t:{var a=e,s=o,u=i,c=t;if(o=Lo,u.effectTag|=1024,u.firstEffect=u.lastEffect=null,null!==c&&"object"==typeof c&&"function"==typeof c.then){var l=c;c=s;var f=-1,h=-1;do{if(13===c.tag){var p=c.alternate;if(null!==p&&null!==(p=p.memoizedState)){h=10*(1073741822-p.timedOutAt);break}"number"==typeof(p=c.pendingProps.maxDuration)&&(p<=0?f=0:(-1===f||p<f)&&(f=p))}c=c.return}while(null!==c);c=s;do{if((p=13===c.tag)&&(p=void 0!==c.memoizedProps.fallback&&null===c.memoizedState),p){if(s=$o.bind(null,a,c,u,0==(1&c.mode)?1073741823:o),l.then(s,s),0==(1&c.mode)){c.effectTag|=64,u.effectTag&=-1957,1===u.tag&&null===u.alternate&&(u.tag=17),u.expirationTime=o;break t}0<=(a=-1===f?1073741823:(-1===h&&(h=10*(1073741822-Jr(a,o))-5e3),h+f))&&Fo<a&&(Fo=a),c.effectTag|=2048,c.expirationTime=o;break t}c=c.return}while(null!==c);c=Error((se(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ue(u))}Uo=!0,c=hi(c,u),a=s;do{switch(a.tag){case 3:u=c,a.effectTag|=2048,a.expirationTime=o,ai(a,o=Io(a,u,o));break t;case 1:if(u=c,s=a.type,l=a.stateNode,0==(64&a.effectTag)&&("function"==typeof s.getDerivedStateFromError||null!==l&&"function"==typeof l.componentDidCatch&&(null===Wo||!Wo.has(l)))){a.effectTag|=2048,a.expirationTime=o,ai(a,o=ko(a,u,o));break t}}a=a.return}while(null!==a)}Ro=Qo(i);continue}r=!0,Ra(t)}}break}if(Po=!1,mi=yi=di=xo.currentDispatcher=null,r)Mo=null,e.finishedWork=null;else if(null!==Ro)e.finishedWork=null;else{if(null===(r=e.current.alternate)&&M("281"),Mo=null,Uo){if(i=e.latestPendingTime,o=e.latestSuspendedTime,a=e.latestPingedTime,0!==i&&i<n||0!==o&&o<n||0!==a&&a<n)return $r(e,n),void Ta(e,r,n,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,void Ta(e,r,n=e.nextExpirationTimeToWorkOn=n,t=e.expirationTime=1073741823,-1)}t&&-1!==Fo?($r(e,n),(t=10*(1073741822-Jr(e,n)))<Fo&&(Fo=t),t=10*(1073741822-_a()),t=Fo-t,Ta(e,r,n,e.expirationTime,t<0?0:t)):(e.pendingCommitExpirationTime=n,e.finishedWork=r)}}function Yo(t,e){for(var n=t.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Wo||!Wo.has(r)))return oi(n,t=ko(n,t=hi(e,t),1073741823)),void Zo(n,1073741823);break;case 3:return oi(n,t=Io(n,t=hi(e,t),1073741823)),void Zo(n,1073741823)}n=n.return}3===t.tag&&(oi(t,n=Io(t,n=hi(e,t),1073741823)),Zo(t,1073741823))}function Xo(t,e){return 0!==Oo?t=Oo:Po?t=Bo?1073741823:Lo:1&e.mode?(t=pa?1073741822-10*(1+((1073741822-t+15)/10|0)):1073741822-25*(1+((1073741822-t+500)/25|0)),null!==Mo&&t===Lo&&--t):t=1073741823,pa&&(0===ua||t<ua)&&(ua=t),t}function $o(t,e,n,r){var i=t.earliestSuspendedTime,o=t.latestSuspendedTime;if(0!==i&&r<=i&&o<=r){o=i=r,t.didError=!1;var a=t.latestPingedTime;(0===a||o<a)&&(t.latestPingedTime=o),Zr(o,t)}else Xr(t,i=Xo(i=_a(),e));0!=(1&e.mode)&&t===Mo&&Lo===r&&(Mo=null),Jo(e,i),0==(1&e.mode)&&(Jo(n,i),1===n.tag&&null!==n.stateNode&&((e=ri(i)).tag=2,oi(n,e))),0!==(n=t.expirationTime)&&Ca(t,n)}function Jo(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return i}function Zo(t,e){null!==(t=Jo(t,e))&&(!Po&&0!==Lo&&Lo<e&&zo(),Xr(t,e),Po&&!Bo&&Mo===t||Ca(t,t.expirationTime),va<ba&&(ba=0,M("185")))}function ta(t,e,n,r,i){var o=Oo;Oo=1073741823;try{return t(e,n,r,i)}finally{Oo=o}}var ea=null,na=null,ra=0,ia=void 0,oa=!1,aa=null,sa=0,ua=0,ca=!1,la=null,fa=!1,ha=!1,pa=!1,da=null,ya=r.unstable_now(),ma=1073741822-(ya/10|0),ga=ma,va=50,ba=0,wa=null;function Sa(){ma=1073741822-((r.unstable_now()-ya)/10|0)}function Ea(t,e){if(0!==ra){if(e<ra)return;null!==ia&&r.unstable_cancelCallback(ia)}ra=e,t=r.unstable_now()-ya,ia=r.unstable_scheduleCallback(Na,{timeout:10*(1073741822-e)-t})}function Ta(t,e,n,r,i){t.expirationTime=r,0!==i||Da()?0<i&&(t.timeoutHandle=vr(function(t,e,n){t.pendingCommitExpirationTime=n,t.finishedWork=e,Sa(),ga=ma,Aa(t,n)}.bind(null,t,e,n),i)):(t.pendingCommitExpirationTime=n,t.finishedWork=e)}function _a(){return oa||(Ia(),0!==sa&&1!==sa||(Sa(),ga=ma)),ga}function Ca(t,e){null===t.nextScheduledRoot?(t.expirationTime=e,null===na?(ea=na=t,t.nextScheduledRoot=t):(na=na.nextScheduledRoot=t).nextScheduledRoot=ea):e>t.expirationTime&&(t.expirationTime=e),oa||(fa?ha&&Oa(aa=t,sa=1073741823,!1):1073741823===e?xa(1073741823,!1):Ea(t,e))}function Ia(){var t=0,e=null;if(null!==na)for(var n=na,r=ea;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===na)&&M("244"),r===r.nextScheduledRoot){ea=na=r.nextScheduledRoot=null;break}if(r===ea)ea=i=r.nextScheduledRoot,na.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===na){(na=n).nextScheduledRoot=ea,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(t<i&&(t=i,e=r),r===na)break;if(1073741823===t)break;r=(n=r).nextScheduledRoot}}aa=e,sa=t}var ka=!1;function Da(){return!!ka||!!r.unstable_shouldYield()&&(ka=!0)}function Na(){try{if(!Da()&&null!==ea){Sa();var t=ea;do{var e=t.expirationTime;0!==e&&ma<=e&&(t.nextExpirationTimeToWorkOn=ma),t=t.nextScheduledRoot}while(t!==ea)}xa(0,!0)}finally{ka=!1}}function xa(t,e){if(Ia(),e)for(Sa(),ga=ma;null!==aa&&0!==sa&&t<=sa&&!(ka&&sa<ma);)Oa(aa,sa,sa<ma),Ia(),Sa(),ga=ma;else for(;null!==aa&&0!==sa&&t<=sa;)Oa(aa,sa,!1),Ia();if(e&&(ra=0,ia=null),0!==sa&&Ea(aa,sa),ba=0,(wa=null)!==da)for(t=da,da=null,e=0;e<t.length;e++){var n=t[e];try{n._onComplete()}catch(t){ca||(ca=!0,la=t)}}if(ca)throw t=la,la=null,ca=!1,t}function Aa(t,e){oa&&M("253"),Oa(aa=t,sa=e,!1),xa(1073741823,!1)}function Oa(t,e,n){if(oa&&M("245"),oa=!0,n){var r=t.finishedWork;null!==r?Pa(t,r,e):(t.finishedWork=null,-1!==(r=t.timeoutHandle)&&(t.timeoutHandle=-1,br(r)),Ho(t,n),null!==(r=t.finishedWork)&&(Da()?t.finishedWork=r:Pa(t,r,e)))}else null!==(r=t.finishedWork)?Pa(t,r,e):(t.finishedWork=null,-1!==(r=t.timeoutHandle)&&(t.timeoutHandle=-1,br(r)),Ho(t,n),null!==(r=t.finishedWork)&&Pa(t,r,e));oa=!1}function Pa(t,e,n){var r=t.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===da?da=[r]:da.push(r),r._defer))return t.finishedWork=e,void(t.expirationTime=0);t.finishedWork=null,t===wa?ba++:(wa=t,ba=0),Bo=Po=!0,t.current===e&&M("177"),0===(n=t.pendingCommitExpirationTime)&&M("261"),t.pendingCommitExpirationTime=0,r=e.expirationTime;var i=e.childExpirationTime;if(r=r<i?i:r,t.didError=!1,0===r?(t.earliestPendingTime=0,t.latestPendingTime=0,t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0):(0!==(i=t.latestPendingTime)&&(r<i?t.earliestPendingTime=t.latestPendingTime=0:t.earliestPendingTime>r&&(t.earliestPendingTime=t.latestPendingTime)),0===(i=t.earliestSuspendedTime)?Xr(t,r):r<t.latestSuspendedTime?(t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0,Xr(t,r)):i<r&&Xr(t,r)),Zr(0,t),xo.current=null,r=1<e.effectTag?null!==e.lastEffect?(e.lastEffect.nextEffect=e).firstEffect:e:e.firstEffect,dr=_n,Fn(i=Ln())){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{var a=(o=(o=i.ownerDocument)&&o.defaultView||window).getSelection&&o.getSelection();if(a&&0!==a.rangeCount){o=a.anchorNode;var s=a.anchorOffset,u=a.focusNode;a=a.focusOffset;try{o.nodeType,u.nodeType}catch(t){o=null;break t}var c=0,l=-1,f=-1,h=0,p=0,d=i,y=null;e:for(;;){for(var m;d!==o||0!==s&&3!==d.nodeType||(l=c+s),d!==u||0!==a&&3!==d.nodeType||(f=c+a),3===d.nodeType&&(c+=d.nodeValue.length),null!==(m=d.firstChild);)y=d,d=m;for(;;){if(d===i)break e;if(y===o&&++h===s&&(l=c),y===u&&++p===a&&(f=c),null!==(m=d.nextSibling))break;y=(d=y).parentNode}d=m}o=-1===l||-1===f?null:{start:l,end:f}}else o=null}o=o||{start:0,end:0}}else o=null;for(_n=!(yr={focusedElem:i,selectionRange:o}),qo=r;null!==qo;){i=!1,o=void 0;try{for(;null!==qo;){if(256&qo.effectTag)t:{var g=qo.alternate;switch((s=qo).tag){case 0:case 11:case 15:break t;case 1:if(256&s.effectTag&&null!==g){var v=g.memoizedProps,b=g.memoizedState,w=s.stateNode,S=w.getSnapshotBeforeUpdate(s.elementType===s.type?v:xi(s.type,v),b);w.__reactInternalSnapshotBeforeUpdate=S}break t;case 3:case 5:case 6:case 4:case 17:break t;default:M("163")}}qo=qo.nextEffect}}catch(t){i=!0,o=t}i&&(null===qo&&M("178"),Yo(qo,o),null!==qo&&(qo=qo.nextEffect))}for(qo=r;null!==qo;){g=!1,v=void 0;try{for(;null!==qo;){var E=qo.effectTag;if(16&E&&ir(qo.stateNode,""),128&E){var T=qo.alternate;if(null!==T){var _=T.ref;null!==_&&("function"==typeof _?_(null):_.current=null)}}switch(14&E){case 2:To(qo),qo.effectTag&=-3;break;case 6:To(qo),qo.effectTag&=-3,Co(qo.alternate,qo);break;case 4:Co(qo.alternate,qo);break;case 8:_o(b=qo),b.return=null,b.child=null,b.alternate&&(b.alternate.child=null,b.alternate.return=null)}qo=qo.nextEffect}}catch(t){g=!0,v=t}g&&(null===qo&&M("178"),Yo(qo,v),null!==qo&&(qo=qo.nextEffect))}if(_=yr,T=Ln(),E=_.focusedElem,v=_.selectionRange,T!==E&&E&&E.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(E.ownerDocument.documentElement,E)){null!==v&&Fn(E)&&(T=v.start,void 0===(_=v.end)&&(_=T),"selectionStart"in E?(E.selectionStart=T,E.selectionEnd=Math.min(_,E.value.length)):(_=(T=E.ownerDocument||document)&&T.defaultView||window).getSelection&&(_=_.getSelection(),b=E.textContent.length,g=Math.min(v.start,b),v=void 0===v.end?g:Math.min(v.end,b),!_.extend&&v<g&&(b=v,v=g,g=b),b=Mn(E,g),w=Mn(E,v),b&&w&&(1!==_.rangeCount||_.anchorNode!==b.node||_.anchorOffset!==b.offset||_.focusNode!==w.node||_.focusOffset!==w.offset)&&((T=T.createRange()).setStart(b.node,b.offset),_.removeAllRanges(),v<g?(_.addRange(T),_.extend(w.node,w.offset)):(T.setEnd(w.node,w.offset),_.addRange(T))))),T=[];for(_=E;_=_.parentNode;)1===_.nodeType&&T.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"==typeof E.focus&&E.focus(),E=0;E<T.length;E++)(_=T[E]).element.scrollLeft=_.left,_.element.scrollTop=_.top}for(_n=!!dr,dr=yr=null,t.current=e,qo=r;null!==qo;){r=!1,E=void 0;try{for(T=n;null!==qo;){var C=qo.effectTag;if(36&C){var I=qo.alternate;switch(g=T,(_=qo).tag){case 0:case 11:case 15:break;case 1:var k=_.stateNode;if(4&_.effectTag)if(null===I)k.componentDidMount();else{var D=_.elementType===_.type?I.memoizedProps:xi(_.type,I.memoizedProps);k.componentDidUpdate(D,I.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var N=_.updateQueue;null!==N&&li(0,N,k);break;case 3:var x=_.updateQueue;if(null!==x){if((v=null)!==_.child)switch(_.child.tag){case 5:v=_.child.stateNode;break;case 1:v=_.child.stateNode}li(0,x,v)}break;case 5:var A=_.stateNode;null===I&&4&_.effectTag&&mr(_.type,_.memoizedProps)&&A.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:M("163")}}if(128&C){var O=qo.ref;if(null!==O){var P=qo.stateNode;switch(qo.tag){case 5:var R=P;break;default:R=P}"function"==typeof O?O(R):O.current=R}}qo=qo.nextEffect}}catch(t){r=!0,E=t}r&&(null===qo&&M("178"),Yo(qo,E),null!==qo&&(qo=qo.nextEffect))}Po=Bo=!1,"function"==typeof Ur&&Ur(e.stateNode),0===(e=(C=e.expirationTime)<(e=e.childExpirationTime)?e:C)&&(Wo=null),t.expirationTime=e,t.finishedWork=null}function Ra(t){null===aa&&M("246"),aa.expirationTime=0,ca||(ca=!0,la=t)}function Ma(t,e){var n=fa;fa=!0;try{return t(e)}finally{(fa=n)||oa||xa(1073741823,!1)}}function La(t,e){if(fa&&!ha){ha=!0;try{return t(e)}finally{ha=!1}}return t(e)}function Fa(t,e,n){if(pa)return t(e,n);fa||oa||0===ua||(xa(ua,!1),ua=0);var r=pa,i=fa;fa=pa=!0;try{return t(e,n)}finally{pa=r,(fa=i)||oa||xa(1073741823,!1)}}function Ua(t,e,n,r,i){var o=e.current;t:if(n){e:{2===en(n=n._reactInternalFiber)&&1===n.tag||M("170");var a=n;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Ar(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(null!==a);M("171"),a=void 0}if(1===n.tag){var s=n.type;if(Ar(s)){n=Mr(n,s,a);break t}}n=a}else n=Ir;return null===e.context?e.context=n:e.pendingContext=n,e=i,(i=ri(r)).payload={element:t},null!==(e=void 0===e?null:e)&&(i.callback=e),Ko(),oi(o,i),Zo(o,r),r}function qa(t,e,n,r){var i=e.current;return Ua(t,e,n,i=Xo(_a(),i),r)}function Ba(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function ja(t){var e=1073741822-25*(1+((1073741822-_a()+500)/25|0));Ao<=e&&(e=Ao-1),this._expirationTime=Ao=e,this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Va(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Wa(t,e,n){t={current:e=Vr(3,null,null,e?3:0),containerInfo:t,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=e.stateNode=t}function za(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Ka(t,e,n,r,i){za(n)||M("200");var o=n._reactRootContainer;if(o){if("function"==typeof i){var a=i;i=function(){var t=Ba(o._internalRoot);a.call(t)}}null!=t?o.legacy_renderSubtreeIntoContainer(t,e,i):o.render(e,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Wa(t,!1,e)}(n,r),"function"==typeof i){var s=i;i=function(){var t=Ba(o._internalRoot);s.call(t)}}La(function(){null!=t?o.legacy_renderSubtreeIntoContainer(t,e,i):o.render(e,i)})}return Ba(o._internalRoot)}function Qa(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return za(e)||M("200"),function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ht,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)}It=function(t,e,n){switch(e){case"input":if(Ee(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=U(r);i||M("90"),Wt(r),Ee(r,i)}}}break;case"textarea":Xn(t,n);break;case"select":null!=(e=n.value)&&Gn(t,!!n.multiple,e,!1)}},ja.prototype.render=function(t){this._defer||M("250"),this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,n=this._expirationTime,r=new Va;return Ua(t,e,null,n,r._onCommit),r},ja.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},ja.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(this._defer&&null!==e||M("251"),this._hasChildren){var n=this._expirationTime;if(e!==this){this._hasChildren&&(n=this._expirationTime=e._expirationTime,this.render(this._children));for(var r=null,i=e;i!==this;)i=(r=i)._next;null===r&&M("251"),r._next=i._next,this._next=e,t.firstBatch=this}this._defer=!1,Aa(t,n),e=this._next,(this._next=null)!==(e=t.firstBatch=e)&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},ja.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},Va.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},Va.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var n=t[e];"function"!=typeof n&&M("191",n),n()}}},Wa.prototype.render=function(t,e){var n=this._internalRoot,r=new Va;return null!==(e=void 0===e?null:e)&&r.then(e),qa(t,n,null,r._onCommit),r},Wa.prototype.unmount=function(t){var e=this._internalRoot,n=new Va;return null!==(t=void 0===t?null:t)&&n.then(t),qa(null,e,null,n._onCommit),n},Wa.prototype.legacy_renderSubtreeIntoContainer=function(t,e,n){var r=this._internalRoot,i=new Va;return null!==(n=void 0===n?null:n)&&i.then(n),qa(e,r,t,i._onCommit),i},Wa.prototype.createBatch=function(){var t=new ja(this),e=t._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)(n.firstBatch=t)._next=null;else{for(n=null;null!==r&&r._expirationTime>=e;)r=(n=r)._next;t._next=r,null!==n&&(n._next=t)}return t},Rt=function(){oa||0===ua||(xa(ua,!1),ua=0)};var Ga,Ha,Ya={createPortal:Qa,findDOMNode:function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;return void 0===e&&("function"==typeof t.render?M("188"):M("268",Object.keys(t))),t=null===(t=rn(e))?null:t.stateNode},hydrate:function(t,e,n){return Ka(null,t,e,!0,n)},render:function(t,e,n){return Ka(null,t,e,!1,n)},unstable_renderSubtreeIntoContainer:function(t,e,n,r){return(null==t||void 0===t._reactInternalFiber)&&M("38"),Ka(t,e,n,!1,r)},unmountComponentAtNode:function(t){return za(t)||M("40"),!!t._reactRootContainer&&(La(function(){Ka(null,null,t,!1,function(){t._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Qa.apply(void 0,arguments)},unstable_batchedUpdates:Ot=Ma,unstable_interactiveUpdates:Pt=Fa,flushSync:function(t,e){oa&&M("187");var n=fa;fa=!0;try{return ta(t,e)}finally{fa=n,xa(1073741823,!1)}},unstable_flushControlled:function(t){var e=fa;fa=!0;try{ta(t)}finally{(fa=e)||oa||xa(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[L,F,U,D.injectEventPluginsByName,w,z,function(t){C(t,W)},xt,At,Dn,x]},unstable_createRoot:function(t,e){return za(t)||M("299","unstable_createRoot"),new Wa(t,!0,null!=e&&!0===e.hydrate)}};Ha=(Ga={findFiberByHostInstance:R,bundleType:0,version:"16.6.3",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(t){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return;try{var n=e.inject(t);Ur=Br(function(t){return e.onCommitFiberRoot(n,t)}),qr=Br(function(t){return e.onCommitFiberUnmount(n,t)})}catch(t){}}(v({},Ga,{findHostInstanceByFiber:function(t){return null===(t=rn(t))?null:t.stateNode},findFiberByHostInstance:function(t){return Ha?Ha(t):null}}));var Xa=Ya;t.exports=Xa.default||Xa},function(t,e,n){"use strict";t.exports=n(296)},function(t,q,e){"use strict";(function(t){
/** @license React v0.11.3
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
Object.defineProperty(q,"__esModule",{value:!0});var a=null,r=!1,s=3,i=-1,u=-1,o=!1,c=!1;function l(){if(!o){var t=a.expirationTime;c?E():c=!0,S(e,t)}}function f(){var t=a,e=a.next;if(a===e)a=null;else{var n=a.previous;a=n.next=e,e.previous=n}t.next=t.previous=null,n=t.callback,e=t.expirationTime,t=t.priorityLevel;var r=s,i=u;s=t,u=e;try{var o=n()}finally{s=r,u=i}if("function"==typeof o)if(o={callback:o,priorityLevel:t,expirationTime:e,next:null,previous:null},null===a)a=o.next=o.previous=o;else{n=null,t=a;do{if(t.expirationTime>=e){n=t;break}t=t.next}while(t!==a);null===n?n=a:n===a&&(a=o,l()),(e=n.previous).next=n.previous=o,o.next=n,o.previous=e}}function h(){if(-1===i&&null!==a&&1===a.priorityLevel){o=!0;try{for(;f(),null!==a&&1===a.priorityLevel;);}finally{o=!1,null!==a?l():c=!1}}}function e(t){o=!0;var e=r;r=t;try{if(t)for(;null!==a;){var n=q.unstable_now();if(!(a.expirationTime<=n))break;for(;f(),null!==a&&a.expirationTime<=n;);}else if(null!==a)for(;f(),null!==a&&!T(););}finally{o=!1,r=e,null!==a?l():c=!1,h()}}var n,p,d=Date,y="function"==typeof setTimeout?setTimeout:void 0,m="function"==typeof clearTimeout?clearTimeout:void 0,g="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,v="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function b(e){n=g(function(t){m(p),e(t)}),p=y(function(){v(n),e(q.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var w=performance;q.unstable_now=function(){return w.now()}}else q.unstable_now=function(){return d.now()};var S,E,T,_=null;if("undefined"!=typeof window?_=window:void 0!==t&&(_=t),_&&_._schedMock){var C=_._schedMock;S=C[0],E=C[1],T=C[2],q.unstable_now=C[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var I=null,k=function(t){if(null!==I)try{I(t)}finally{I=null}};S=function(t){null!==I?setTimeout(S,0,t):(I=t,setTimeout(k,0,!1))},E=function(){I=null},T=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof g&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var D=null,N=!1,x=-1,A=!1,O=!1,P=0,R=33,M=33;T=function(){return P<=q.unstable_now()};var L=new MessageChannel,F=L.port2;L.port1.onmessage=function(){N=!1;var t=D,e=x;D=null,x=-1;var n=q.unstable_now(),r=!1;if(P-n<=0){if(!(-1!==e&&e<=n))return A||(A=!0,b(U)),D=t,void(x=e);r=!0}if(null!==t){O=!0;try{t(r)}finally{O=!1}}};var U=function(t){if(null!==D){b(U);var e=t-P+M;e<M&&R<M?(e<8&&(e=8),M=e<R?R:e):R=e,P=t+M,N||(N=!0,F.postMessage(void 0))}else A=!1};S=function(t,e){D=t,x=e,O||e<0?F.postMessage(void 0):A||(A=!0,b(U))},E=function(){D=null,N=!1,x=-1}}q.unstable_ImmediatePriority=1,q.unstable_UserBlockingPriority=2,q.unstable_NormalPriority=3,q.unstable_IdlePriority=5,q.unstable_LowPriority=4,q.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=s,r=i;s=t,i=q.unstable_now();try{return e()}finally{s=n,i=r,h()}},q.unstable_scheduleCallback=function(t,e){var n=-1!==i?i:q.unstable_now();if("object"==typeof e&&null!==e&&"number"==typeof e.timeout)e=n+e.timeout;else switch(s){case 1:e=n+-1;break;case 2:e=n+250;break;case 5:e=n+1073741823;break;case 4:e=n+1e4;break;default:e=n+5e3}if(t={callback:t,priorityLevel:s,expirationTime:e,next:null,previous:null},null===a)a=t.next=t.previous=t,l();else{n=null;var r=a;do{if(r.expirationTime>e){n=r;break}r=r.next}while(r!==a);null===n?n=a:n===a&&(a=t,l()),(e=n.previous).next=n.previous=t,t.next=n,t.previous=e}return t},q.unstable_cancelCallback=function(t){var e=t.next;if(null!==e){if(e===t)a=null;else{t===a&&(a=e);var n=t.previous;(n.next=e).previous=n}t.next=t.previous=null}},q.unstable_wrapCallback=function(n){var r=s;return function(){var t=s,e=i;s=r,i=q.unstable_now();try{return n.apply(this,arguments)}finally{s=t,i=e,h()}}},q.unstable_getCurrentPriorityLevel=function(){return s},q.unstable_shouldYield=function(){return!r&&(null!==a&&a.expirationTime<u||T())}}).call(this,e(31))},function(t,e,n){"use strict";var s=n(298);function r(){}t.exports=function(){function t(t,e,n,r,i,o){if(o!==s){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}var n={array:t.isRequired=t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=r,n.PropTypes=n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";
/** @license React v16.6.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,y=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116;function g(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case f:case h:case a:case u:case s:return t;default:switch(t=t&&t.$$typeof){case l:case p:case c:return t;default:return e}}case o:return e}}}function v(t){return g(t)===h}e.typeOf=g,e.AsyncMode=f,e.ConcurrentMode=h,e.ContextConsumer=l,e.ContextProvider=c,e.Element=i,e.ForwardRef=p,e.Fragment=a,e.Profiler=u,e.Portal=o,e.StrictMode=s,e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===a||t===h||t===u||t===s||t===d||"object"==typeof t&&null!==t&&(t.$$typeof===m||t.$$typeof===y||t.$$typeof===c||t.$$typeof===l||t.$$typeof===p)},e.isAsyncMode=function(t){return v(t)||g(t)===f},e.isConcurrentMode=v,e.isContextConsumer=function(t){return g(t)===l},e.isContextProvider=function(t){return g(t)===c},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return g(t)===p},e.isFragment=function(t){return g(t)===a},e.isProfiler=function(t){return g(t)===u},e.isPortal=function(t){return g(t)===o},e.isStrictMode=function(t){return g(t)===s}},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},,function(t,e,n){"use strict";n(303);var r,i=(r=n(120))&&"object"==typeof r&&"default"in r?r.default:r;t.exports=i},function(t,e,on){"use strict";on.r(e),function(e,t){on(306);var n=setTimeout;function r(){}function o(t){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function i(n,r){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,o._immediateFn(function(){var t=1===n._state?r.onFulfilled:r.onRejected;if(null!==t){var e;try{e=t(n._value)}catch(t){return void s(r.promise,t)}a(r.promise,e)}else(1===n._state?a:s)(r.promise,n._value)})):n._deferreds.push(r)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void l((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,u(e)}catch(t){s(e,t)}var r,i}function s(t,e){t._state=2,t._value=e,u(t)}function u(t){2===t._state&&0===t._deferreds.length&&o._immediateFn(function(){t._handled||o._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)i(t,t._deferreds[e]);t._deferreds=null}function c(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function l(t,e){var n=!1;try{t(function(t){n||(n=!0,a(e,t))},function(t){n||(n=!0,s(e,t))})}catch(t){if(n)return;n=!0,s(e,t)}}o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){var n=new this.constructor(r);return i(this,new c(t,e,n)),n},o.prototype.finally=function(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})},o.all=function(e){return new o(function(r,i){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(e);if(0===o.length)return r([]);var a=o.length;function s(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void n.call(t,function(t){s(e,t)},i)}o[e]=t,0==--a&&r(o)}catch(t){i(t)}}for(var t=0;t<o.length;t++)s(t,o[t])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(n){return new o(function(t,e){e(n)})},o.race=function(i){return new o(function(t,e){for(var n=0,r=i.length;n<r;n++)i[n].then(t,e)})},o._immediateFn="function"==typeof e&&function(t){e(t)}||function(t){n(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var f=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("unable to locate global object")}();function h(t,e){return t(e={exports:{}},e.exports),e.exports}f.Promise||(f.Promise=o);var y=h(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),m=h(function(t){var e=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=e)}),p=(m.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),d=function(t){if(!p(t))throw TypeError(t+" is not an object!");return t},g=function(t){try{return!!t()}catch(t){return!0}},v=!g(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),b=y.document,w=p(b)&&p(b.createElement),S=function(t){return w?b.createElement(t):{}},E=!v&&!g(function(){return 7!=Object.defineProperty(S("div"),"a",{get:function(){return 7}}).a}),T=function(t,e){if(!p(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!p(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!p(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!p(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},_=Object.defineProperty,C={f:v?Object.defineProperty:function(t,e,n){if(d(t),e=T(e,!0),d(n),E)try{return _(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},I=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},k=v?function(t,e,n){return C.f(t,e,I(1,n))}:function(t,e,n){return t[e]=n,t},D={}.hasOwnProperty,N=function(t,e){return D.call(t,e)},x=0,A=Math.random(),O=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++x+A).toString(36))},P=h(function(t){var o=O("src"),e="toString",n=Function[e],a=(""+n).split(e);m.inspectSource=function(t){return n.call(t)},(t.exports=function(t,e,n,r){var i="function"==typeof n;i&&(N(n,"name")||k(n,"name",e)),t[e]!==n&&(i&&(N(n,o)||k(n,o,t[e]?""+t[e]:a.join(String(e)))),t===y?t[e]=n:r?t[e]?t[e]=n:k(t,e,n):(delete t[e],k(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[o]||n.call(this)})}),R=function(r,i,t){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}},M="prototype",L=function(t,e,n){var r,i,o,a,s=t&L.F,u=t&L.G,c=t&L.S,l=t&L.P,f=t&L.B,h=u?y:c?y[e]||(y[e]={}):(y[e]||{})[M],p=u?m:m[e]||(m[e]={}),d=p[M]||(p[M]={});for(r in u&&(n=e),n)o=((i=!s&&h&&void 0!==h[r])?h:n)[r],a=f&&i?R(o,y):l&&"function"==typeof o?R(Function.call,o):o,h&&P(h,r,o,t&L.U),p[r]!=o&&k(p,r,a),l&&d[r]!=o&&(d[r]=o)};y.core=m,L.F=1,L.G=2,L.S=4,L.P=8,L.B=16,L.W=32,L.U=64,L.R=128;var F=L,U={}.toString,q=function(t){return U.call(t).slice(8,-1)},B=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==q(t)?t.split(""):Object(t)},j=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},V=function(t){return Object(j(t))},W=Math.ceil,z=Math.floor,K=function(t){return isNaN(t=+t)?0:(0<t?z:W)(t)},Q=Math.min,G=function(t){return 0<t?Q(K(t),9007199254740991):0},H=Array.isArray||function(t){return"Array"==q(t)},Y="__core-js_shared__",X=y[Y]||(y[Y]={}),$=function(t){return X[t]||(X[t]={})},J=h(function(t){var e=$("wks"),n=y.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:O)("Symbol."+t))}).store=e}),Z=J("species"),tt=function(t,e){return H(n=t)&&("function"!=typeof(r=n.constructor)||r!==Array&&!H(r.prototype)||(r=void 0),p(r)&&null===(r=r[Z])&&(r=void 0)),new(void 0===r?Array:r)(e);var n,r},et=function(f,t){var h=1==f,p=2==f,d=3==f,y=4==f,m=6==f,g=5==f||m,v=t||tt;return function(t,e,n){for(var r,i,o=V(t),a=B(o),s=R(e,n,3),u=G(a.length),c=0,l=h?v(t,u):p?v(t,0):void 0;c<u;c++)if((g||c in a)&&(i=s(r=a[c],c,o),f))if(h)l[c]=i;else if(i)switch(f){case 3:return!0;case 5:return r;case 6:return c;case 2:l.push(r)}else if(y)return!1;return m?-1:d||y?y:l}},nt=J("unscopables"),rt=Array.prototype;null==rt[nt]&&k(rt,nt,{});var it=function(t){rt[nt][t]=!0},ot=et(5),at=!0;"find"in[]&&Array(1).find(function(){at=!1}),F(F.P+F.F*at,"Array",{find:function(t){return ot(this,t,1<arguments.length?arguments[1]:void 0)}}),it("find");m.Array.find;var st=et(6),ut="findIndex",ct=!0;ut in[]&&Array(1)[ut](function(){ct=!1}),F(F.P+F.F*ct,"Array",{findIndex:function(t){return st(this,t,1<arguments.length?arguments[1]:void 0)}}),it(ut);m.Array.findIndex;var lt,ft=function(t){return B(j(t))},ht=Math.max,pt=Math.min,dt=$("keys"),yt=function(t){return dt[t]||(dt[t]=O(t))},mt=(lt=!1,function(t,e,n){var r,i,o,a=ft(t),s=G(a.length),u=(i=s,(r=K(r=n))<0?ht(r+i,0):pt(r,i));if(lt&&e!=e){for(;u<s;)if((o=a[u++])!=o)return!0}else for(;u<s;u++)if((lt||u in a)&&a[u]===e)return lt||u||0;return!lt&&-1}),gt=yt("IE_PROTO"),vt=function(t,e){var n,r=ft(t),i=0,o=[];for(n in r)n!=gt&&N(r,n)&&o.push(n);for(;e.length>i;)N(r,n=e[i++])&&(~mt(o,n)||o.push(n));return o},bt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),wt=Object.keys||function(t){return vt(t,bt)},St={f:Object.getOwnPropertySymbols},Et={f:{}.propertyIsEnumerable},Tt=Object.assign,_t=!Tt||g(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=Tt({},t)[n]||Object.keys(Tt({},e)).join("")!=r})?function(t,e){for(var n=V(t),r=arguments.length,i=1,o=St.f,a=Et.f;i<r;)for(var s,u=B(arguments[i++]),c=o?wt(u).concat(o(u)):wt(u),l=c.length,f=0;f<l;)a.call(u,s=c[f++])&&(n[s]=u[s]);return n}:Tt;F(F.S+F.F,"Object",{assign:_t});m.Object.assign;var Ct=J("match"),It=function(t,e,n){if(p(r=e)&&(void 0!==(i=r[Ct])?i:"RegExp"==q(r)))throw TypeError("String#"+n+" doesn't accept regex!");var r,i;return String(j(t))},kt=J("match"),Dt="startsWith",Nt=""[Dt];F(F.P+F.F*function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[kt]=!1,!"/./"[e](n)}catch(t){}}return!0}(Dt),"String",{startsWith:function(t){var e=It(this,t,Dt),n=G(Math.min(1<arguments.length?arguments[1]:void 0,e.length)),r=String(t);return Nt?Nt.call(e,r,n):e.slice(n,n+r.length)===r}});m.String.startsWith;F(F.P,"String",{repeat:function(t){var e=String(j(this)),n="",r=K(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}});m.String.repeat;var xt=h(function(t){var n=O("meta"),e=C.f,r=0,i=Object.isExtensible||function(){return!0},o=!g(function(){return i(Object.preventExtensions({}))}),a=function(t){e(t,n,{value:{i:"O"+ ++r,w:{}}})},s=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!p(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!N(t,n)){if(!i(t))return"F";if(!e)return"E";a(t)}return t[n].i},getWeak:function(t,e){if(!N(t,n)){if(!i(t))return!0;if(!e)return!1;a(t)}return t[n].w},onFreeze:function(t){return o&&s.NEED&&i(t)&&!N(t,n)&&a(t),t}}}),At=(xt.KEY,xt.NEED,xt.fastKey,xt.getWeak,xt.onFreeze,C.f),Ot=J("toStringTag"),Pt=function(t,e,n){t&&!N(t=n?t:t.prototype,Ot)&&At(t,Ot,{configurable:!0,value:e})},Rt={f:J},Mt=C.f,Lt=function(t){var e=m.Symbol||(m.Symbol=y.Symbol||{});"_"==t.charAt(0)||t in e||Mt(e,t,{value:Rt.f(t)})},Ft=v?Object.defineProperties:function(t,e){d(t);for(var n,r=wt(e),i=r.length,o=0;o<i;)C.f(t,n=r[o++],e[n]);return t},Ut=y.document,qt=Ut&&Ut.documentElement,Bt=yt("IE_PROTO"),jt=function(){},Vt="prototype",Wt=function(){var t,e=S("iframe"),n=bt.length;for(e.style.display="none",qt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Wt=t.F;n--;)delete Wt[Vt][bt[n]];return Wt()},zt=Object.create||function(t,e){var n;return null!==t?(jt[Vt]=d(t),n=new jt,jt[Vt]=null,n[Bt]=t):n=Wt(),void 0===e?n:Ft(n,e)},Kt=bt.concat("length","prototype"),Qt={f:Object.getOwnPropertyNames||function(t){return vt(t,Kt)}},Gt=Qt.f,Ht={}.toString,Yt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Xt={f:function(t){return Yt&&"[object Window]"==Ht.call(t)?function(t){try{return Gt(t)}catch(t){return Yt.slice()}}(t):Gt(ft(t))}},$t=Object.getOwnPropertyDescriptor,Jt={f:v?$t:function(t,e){if(t=ft(t),e=T(e,!0),E)try{return $t(t,e)}catch(t){}if(N(t,e))return I(!Et.f.call(t,e),t[e])}},Zt=xt.KEY,te=Jt.f,ee=C.f,ne=Xt.f,re=y.Symbol,ie=y.JSON,oe=ie&&ie.stringify,ae="prototype",se=J("_hidden"),ue=J("toPrimitive"),ce={}.propertyIsEnumerable,le=$("symbol-registry"),fe=$("symbols"),he=$("op-symbols"),pe=Object[ae],de="function"==typeof re,ye=y.QObject,me=!ye||!ye[ae]||!ye[ae].findChild,ge=v&&g(function(){return 7!=zt(ee({},"a",{get:function(){return ee(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=te(pe,e);r&&delete pe[e],ee(t,e,n),r&&t!==pe&&ee(pe,e,r)}:ee,ve=function(t){var e=fe[t]=zt(re[ae]);return e._k=t,e},be=de&&"symbol"==typeof re.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof re},we=function(t,e,n){return t===pe&&we(he,e,n),d(t),e=T(e,!0),d(n),N(fe,e)?(n.enumerable?(N(t,se)&&t[se][e]&&(t[se][e]=!1),n=zt(n,{enumerable:I(0,!1)})):(N(t,se)||ee(t,se,I(1,{})),t[se][e]=!0),ge(t,e,n)):ee(t,e,n)},Se=function(t,e){d(t);for(var n,r=function(t){var e=wt(t),n=St.f;if(n)for(var r,i=n(t),o=Et.f,a=0;i.length>a;)o.call(t,r=i[a++])&&e.push(r);return e}(e=ft(e)),i=0,o=r.length;i<o;)we(t,n=r[i++],e[n]);return t},Ee=function(t){var e=ce.call(this,t=T(t,!0));return!(this===pe&&N(fe,t)&&!N(he,t))&&(!(e||!N(this,t)||!N(fe,t)||N(this,se)&&this[se][t])||e)},Te=function(t,e){if(t=ft(t),e=T(e,!0),t!==pe||!N(fe,e)||N(he,e)){var n=te(t,e);return!n||!N(fe,e)||N(t,se)&&t[se][e]||(n.enumerable=!0),n}},_e=function(t){for(var e,n=ne(ft(t)),r=[],i=0;n.length>i;)N(fe,e=n[i++])||e==se||e==Zt||r.push(e);return r},Ce=function(t){for(var e,n=t===pe,r=ne(n?he:ft(t)),i=[],o=0;r.length>o;)!N(fe,e=r[o++])||n&&!N(pe,e)||i.push(fe[e]);return i};de||(P((re=function(){if(this instanceof re)throw TypeError("Symbol is not a constructor!");var e=O(0<arguments.length?arguments[0]:void 0),n=function(t){this===pe&&n.call(he,t),N(this,se)&&N(this[se],e)&&(this[se][e]=!1),ge(this,e,I(1,t))};return v&&me&&ge(pe,e,{configurable:!0,set:n}),ve(e)})[ae],"toString",function(){return this._k}),Jt.f=Te,C.f=we,Qt.f=Xt.f=_e,Et.f=Ee,St.f=Ce,v&&P(pe,"propertyIsEnumerable",Ee,!0),Rt.f=function(t){return ve(J(t))}),F(F.G+F.W+F.F*!de,{Symbol:re});for(var Ie="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ke=0;Ie.length>ke;)J(Ie[ke++]);for(var De=wt(J.store),Ne=0;De.length>Ne;)Lt(De[Ne++]);F(F.S+F.F*!de,"Symbol",{for:function(t){return N(le,t+="")?le[t]:le[t]=re(t)},keyFor:function(t){if(!be(t))throw TypeError(t+" is not a symbol!");for(var e in le)if(le[e]===t)return e},useSetter:function(){me=!0},useSimple:function(){me=!1}}),F(F.S+F.F*!de,"Object",{create:function(t,e){return void 0===e?zt(t):Se(zt(t),e)},defineProperty:we,defineProperties:Se,getOwnPropertyDescriptor:Te,getOwnPropertyNames:_e,getOwnPropertySymbols:Ce}),ie&&F(F.S+F.F*(!de||g(function(){var t=re();return"[null]"!=oe([t])||"{}"!=oe({a:t})||"{}"!=oe(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(p(e)||void 0!==t)&&!be(t))return H(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!be(e))return e}),r[1]=e,oe.apply(ie,r)}}),re[ae][ue]||k(re[ae],ue,re[ae].valueOf),Pt(re,"Symbol"),Pt(Math,"Math",!0),Pt(y.JSON,"JSON",!0);var xe=J("toStringTag"),Ae="Arguments"==q(function(){return arguments}()),Oe={};Oe[J("toStringTag")]="z",Oe+""!="[object z]"&&P(Object.prototype,"toString",function(){return"[object "+(void 0===(t=this)?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),xe))?n:Ae?q(e):"Object"==(r=q(e))&&"function"==typeof e.callee?"Arguments":r)+"]";var t,e,n,r},!0),Lt("asyncIterator"),Lt("observable");m.Symbol;var Pe={},Re={};k(Re,J("iterator"),function(){return this});var Me,Le=yt("IE_PROTO"),Fe=Object.prototype,Ue=Object.getPrototypeOf||function(t){return t=V(t),N(t,Le)?t[Le]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Fe:null},qe=J("iterator"),Be=!([].keys&&"next"in[].keys()),je="values",Ve=function(){return this},We=function(t,e,n,r,i,o,a){var s,u,c;u=e,c=r,(s=n).prototype=zt(Re,{next:I(1,c)}),Pt(s,u+" Iterator");var l,f,h,p=function(t){if(!Be&&t in g)return g[t];switch(t){case"keys":case je:return function(){return new n(this,t)}}return function(){return new n(this,t)}},d=e+" Iterator",y=i==je,m=!1,g=t.prototype,v=g[qe]||g["@@iterator"]||i&&g[i],b=v||p(i),w=i?y?p("entries"):b:void 0,S="Array"==e&&g.entries||v;if(S&&(h=Ue(S.call(new t)))!==Object.prototype&&h.next&&(Pt(h,d,!0),"function"!=typeof h[qe]&&k(h,qe,Ve)),y&&v&&v.name!==je&&(m=!0,b=function(){return v.call(this)}),(Be||m||!g[qe])&&k(g,qe,b),Pe[e]=b,Pe[d]=Ve,i)if(l={values:y?b:p(je),keys:o?b:p("keys"),entries:w},a)for(f in l)f in g||P(g,f,l[f]);else F(F.P+F.F*(Be||m),e,l);return l},ze=(Me=!0,function(t,e){var n,r,i=String(j(t)),o=K(e),a=i.length;return o<0||a<=o?Me?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===a||(r=i.charCodeAt(o+1))<56320||57343<r?Me?i.charAt(o):n:Me?i.slice(o,o+2):r-56320+(n-55296<<10)+65536});We(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=ze(e,n),this._i+=t.length,{value:t,done:!1})});var Ke=function(t,e){return{value:e,done:!!t}},Qe=We(Array,"Array",function(t,e){this._t=ft(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Ke(1)):Ke(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");Pe.Arguments=Pe.Array,it("keys"),it("values"),it("entries");for(var Ge=J("iterator"),He=J("toStringTag"),Ye=Pe.Array,Xe={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},$e=wt(Xe),Je=0;Je<$e.length;Je++){var Ze,tn=$e[Je],en=Xe[tn],nn=y[tn],rn=nn&&nn.prototype;if(rn&&(rn[Ge]||k(rn,Ge,Ye),rn[He]||k(rn,He,tn),Pe[tn]=Ye,en))for(Ze in Qe)rn[Ze]||P(rn,Ze,Qe[Ze],!0)}Rt.f("iterator")}.call(this,on(304).setImmediate,on(31))},function(t,i,o){(function(t){var e=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}i.setTimeout=function(){return new r(n.call(setTimeout,e,arguments),clearTimeout)},i.setInterval=function(){return new r(n.call(setInterval,e,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(e,this._id)},i.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},i.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},i._unrefActive=i.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},o(305),i.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,i.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,o(31))},function(t,e,n){(function(t,d){!function(n,r){"use strict";if(!n.setImmediate){var i,o,e,a,t,s=1,u={},c=!1,l=n.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(n);f=f&&f.setTimeout?f:n,i="[object process]"==={}.toString.call(n.process)?function(t){d.nextTick(function(){p(t)})}:function(){if(n.postMessage&&!n.importScripts){var t=!0,e=n.onmessage;return n.onmessage=function(){t=!1},n.postMessage("","*"),n.onmessage=e,t}}()?(a="setImmediate$"+Math.random()+"$",t=function(t){t.source===n&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))},n.addEventListener?n.addEventListener("message",t,!1):n.attachEvent("onmessage",t),function(t){n.postMessage(a+t,"*")}):n.MessageChannel?((e=new MessageChannel).port1.onmessage=function(t){p(t.data)},function(t){e.port2.postMessage(t)}):l&&"onreadystatechange"in l.createElement("script")?(o=l.documentElement,function(t){var e=l.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):function(t){setTimeout(p,0,t)},f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return u[s]=r,i(s),s++},f.clearImmediate=h}function h(t){delete u[t]}function p(t){if(c)setTimeout(p,0,t);else{var e=u[t];if(e){c=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(r,n)}}(e)}finally{h(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(31),n(119))},function(t,e){!function(t){"use strict";if(!t.fetch){var e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,a="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in t,i="ArrayBuffer"in t;if(i)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<o.indexOf(Object.prototype.toString.call(t))};d.prototype.append=function(t,e){t=f(t),e=h(e);var n=this.map[t];this.map[t]=n?n+","+e:e},d.prototype.delete=function(t){delete this.map[f(t)]},d.prototype.get=function(t){return t=f(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(f(t))},d.prototype.set=function(t,e){this.map[f(t)]=h(e)},d.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},d.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),p(n)},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),p(e)},d.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),p(n)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},b.call(w.prototype),b.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t};var l=[301,302,303,307,308];E.redirect=function(t,e){if(-1===l.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})},t.Headers=d,t.Request=w,t.Response=E,t.fetch=function(n,i){return new Promise(function(r,t){var e=new w(n,i),o=new XMLHttpRequest;o.onload=function(){var t,i,e={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",i=new d,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),n=e.shift().trim();if(n){var r=e.join(":").trim();i.append(n,r)}}),i)};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var n="response"in o?o.response:o.responseText;r(new E(n,e))},o.onerror=function(){t(new TypeError("Network request failed"))},o.ontimeout=function(){t(new TypeError("Network request failed"))},o.open(e.method,e.url,!0),"include"===e.credentials?o.withCredentials=!0:"omit"===e.credentials&&(o.withCredentials=!1),"responseType"in o&&a&&(o.responseType="blob"),e.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===e._bodyInit?null:e._bodyInit)})},t.fetch.polyfill=!0}function f(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function h(t){return"string"!=typeof t&&(t=String(t)),t}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function y(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function m(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function g(t){var e=new FileReader,n=m(e);return e.readAsArrayBuffer(t),n}function v(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(a&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(r&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(i&&a&&s(t))this._bodyArrayBuffer=v(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=v(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var t=y(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t,e,n,r=y(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=m(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(S)}),this.json=function(){return this.text().then(JSON.parse)},this}function w(t,e){var n,r,i=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),-1<c.indexOf(r)?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function S(t){var i=new FormData;return t.trim().split("&").forEach(function(t){if(t){var e=t.split("="),n=e.shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," ");i.append(decodeURIComponent(n),decodeURIComponent(r))}}),i}function E(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(308),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},a=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);e[n++]=i<128?i:(e[n++]=i<2048?i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,i>>6&63|128),63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,f=(3&o)<<4|s>>4,h=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(h=64)),r.push(n[l],n[f],n[h],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(191<i&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!=s){var l=a<<4&240|s>>2;if(r.push(l),64!=u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){try{return u.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=l(t[n],e[n]));return t}var f=function(){function t(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}return t.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},t}(),h=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},p="FirebaseError",d=Error.captureStackTrace;var y=function(t,e){if(this.code=t,this.message=e,d)d(this,m.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name=p,Object.defineProperty(this,"stack",{get:function(){return t.stack}})}};y.prototype=Object.create(Error.prototype),(y.prototype.constructor=y).prototype.name=p;var m=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,r){void 0===r&&(r={});var e,n=this.errors[t],i=this.service+"/"+t;e=void 0===n?"Error":n.replace(this.pattern,function(t,e){var n=r[e];return void 0!==n?n.toString():"<"+e+"?>"}),e=this.serviceName+": "+e+" ("+i+").";var o=new y(i,e);for(var a in r)r.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=r[a]);return o},t}();function g(t){return JSON.parse(t)}var v=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=g(c(o[0])||""),n=g(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},b=function(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])},w=function(n,t){return b(t,function(t,e){n[t]=e}),n},S=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},E=function(n){function t(){var t=n.call(this)||this;t.chain_=[],t.buf_=[],t.W_=[],t.pad_=[],t.inbuf_=0,t.total_=0,t.blockSize=64,t.pad_[0]=128;for(var e=1;e<t.blockSize;++e)t.pad_[e]=0;return t.reset(),t}return r.__extends(t,n),t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++){a=r<40?r<20?(o=l^u&(c^l),1518500249):(o=u^c^l,1859775393):r<60?(o=u&c|l&(u|c),2400959708):(o=u^c^l,3395469782);i=(s<<5|s>>>27)+o+f+a+n[r]&4294967295;f=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(function(){this.blockSize=-1});var T=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},t.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=_),void 0===r.error&&(r.error=_),void 0===r.complete&&(r.complete=_);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function _(){}function C(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}e.assert=a,e.assertionError=o,e.base64=u,e.base64Decode=c,e.base64Encode=function(t){var e=s(t);return u.encodeByteArray(e,!0)},e.CONSTANTS=i,e.deepCopy=function(t){return l(void 0,t)},e.deepExtend=l,e.patchProperty=function(t,e,n){t[e]=n},e.Deferred=f,e.getUA=h,e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.ErrorFactory=m,e.FirebaseError=y,e.patchCapture=function(t){var e=d;return d=t,e},e.jsonEval=g,e.stringify=function(t){return JSON.stringify(t)},e.decode=v,e.isAdmin=function(t){var e=v(t).claims;return"object"==typeof e&&!0===e.admin},e.issuedAtTime=function(t){var e=v(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.isValidFormat=function(t){var e=v(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e,n,r=v(t).claims,i=Math.floor((new Date).getTime()/1e3);return"object"==typeof r&&(r.hasOwnProperty("nbf")?e=r.nbf:r.hasOwnProperty("iat")&&(e=r.iat),n=r.hasOwnProperty("exp")?r.exp:e+86400),i&&e&&n&&e<=i&&i<=n},e.clone=function(t){return w({},t)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.every=function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!e(n,t[n]))return!1;return!0},e.extend=w,e.findKey=S,e.findValue=function(t,e,n){var r=S(t,e,n);return r&&t[r]},e.forEach=b,e.getAnyKey=function(t){for(var e in t)return e},e.getCount=function(t){var e=0;for(var n in t)e++;return e},e.getValues=function(t){var e=[],n=0;for(var r in t)e[n++]=t[r];return e},e.isEmpty=function(t){for(var e in t)return!1;return!0},e.isNonNullObject=function(t){return"object"==typeof t&&null!==t},e.map=function(t,e,n){var r={};for(var i in t)r[i]=e.call(n,t[i],i,t);return r},e.safeGet=function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]},e.querystring=function(t){var n=[];return b(t,function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}),n.length?"&"+n.join("&"):""},e.querystringDecode=function(t){var n={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var e=t.split("=");n[e[0]]=e[1]}}),n},e.Sha1=E,e.async=function(n,r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve(!0).then(function(){n.apply(void 0,t)}).catch(function(t){r&&r(t)})}},e.createSubscribe=function(t,e){var n=new T(t,e);return n.subscribe.bind(n)},e.errorPrefix=C,e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(C(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(C(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(C(t,e,r)+"must be a valid firebase namespace.")},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(55296<=i&&i<=56319){var o=i-55296;a(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}e[n++]=i<128?i:(e[n++]=i<2048?i>>6|192:(e[n++]=i<65536?i>>12|224:(e[n++]=i>>18|240,i>>12&63|128),i>>6&63|128),63&i|128)}return e}},function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return a}),n.d(e,"__decorate",function(){return s}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return l}),n.d(e,"__generator",function(){return f}),n.d(e,"__exportStar",function(){return h}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return d}),n.d(e,"__spread",function(){return y}),n.d(e,"__await",function(){return m}),n.d(e,"__asyncGenerator",function(){return g}),n.d(e,"__asyncDelegator",function(){return v}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return w}),n.d(e,"__importStar",function(){return S}),n.d(e,"__importDefault",function(){return E});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);return 3<o&&a&&Object.defineProperty(e,n,a),a}function u(n,r){return function(t,e){r(t,e,n)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(o,a,s,u){return new(s||(s=Promise))(function(t,e){function n(t){try{i(u.next(t))}catch(t){e(t)}}function r(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new s(function(t){t(e.value)}).then(n,r)}i((u=u.apply(o,a||[])).next())})}function f(n,r){var i,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&e[0]?"return":e[0]?"throw":"next"])&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[0,a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function h(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function g(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(t,e||[]),a=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(r){o[r]&&(i[r]=function(n){return new Promise(function(t,e){1<a.push([r,n,t,e])||s(r,n)})})}function s(t,e){try{(n=o[t](e)).value instanceof m?Promise.resolve(n.value.v).then(u,c):l(a[0][2],n)}catch(t){l(a[0][3],t)}var n}function u(t){s("next",t)}function c(t){s("throw",t)}function l(t,e){t(e),a.shift(),a.length&&s(a[0][0],a[0][1])}}function v(r){var t,i;return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,n){r[e]&&(t[e]=function(t){return(i=!i)?{value:m(r[e](t)),done:"return"===e}:n?n(t):t})}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):p(t)}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function S(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function E(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";n.r(e);n(310)},function(t,$o,Jo){"use strict";(function(i){Object.defineProperty($o,"__esModule",{value:!0});var t,h,e,n=(t=Jo(120))&&"object"==typeof t&&"default"in t?t.default:t,o=Jo(311),p=Jo(312),f=Jo(313),a=n.SDK_VERSION,s=new o.Logger("@firebase/firestore");function d(){return s.logLevel===o.LogLevel.DEBUG?h.DEBUG:s.logLevel===o.LogLevel.SILENT?h.SILENT:h.ERROR}function r(t){switch(t){case h.DEBUG:s.logLevel=o.LogLevel.DEBUG;break;case h.ERROR:s.logLevel=o.LogLevel.ERROR;break;case h.SILENT:s.logLevel=o.LogLevel.SILENT;break;default:s.error("Firestore ("+a+"): Invalid value passed to `setLogLevel`")}}function y(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(s.logLevel<=o.LogLevel.DEBUG){var i=n.map(c);s.debug.apply(s,["Firestore ("+a+") ["+t+"]: "+e].concat(i))}}function u(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(s.logLevel<=o.LogLevel.ERROR){var r=e.map(c);s.error.apply(s,["Firestore ("+a+"): "+t].concat(r))}}function c(e){if("string"==typeof e)return e;var t=l.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function S(t){var e="FIRESTORE ("+a+") INTERNAL ASSERTION FAILED: "+t;throw u(e),new Error(e)}function m(t,e){t||S(e)}(e=h||(h={}))[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.SILENT=2]="SILENT";var l=function(){function e(){}return e.setPlatform=function(t){e.platform&&S("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||S("Platform not set"),e.platform},e}();function g(){return l.getPlatform().emptyByteString}var v={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},b=function(r){function t(t,e){var n=r.call(this,e)||this;return n.code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}return p.__extends(t,r),t}(Error);function w(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new b(v.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function E(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function T(t,e){return void 0!==t?t:e}function _(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function C(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function I(t){for(var e in m(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function k(t,e,n){if(e.length!==n)throw new b(v.INVALID_ARGUMENT,"Function "+t+"() requires "+W(n,"argument")+", but was called with "+W(e.length,"argument")+".")}function D(t,e,n){if(e.length<n)throw new b(v.INVALID_ARGUMENT,"Function "+t+"() requires at least "+W(n,"argument")+", but was called with "+W(e.length,"argument")+".")}function N(t,e,n,r){if(e.length<n||e.length>r)throw new b(v.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+W(e.length,"argument")+".")}function x(t,e,n,r){L(t,e,V(n)+" argument",r)}function A(t,e,n,r){void 0!==r&&x(t,e,n,r)}function O(t,e,n,r){L(t,e,n+" option",r)}function P(t,e,n,r){void 0!==r&&O(t,e,n,r)}function R(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new b(v.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+U(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new b(v.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be "+n+", but the value at index "+o+" was: "+U(r[o]))}(t,e,n,r,i)}function M(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(U(u))}var c=U(r);throw new b(v.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function L(t,e,n,r){if(!("object"===e?F(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=U(r);throw new b(v.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function F(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function U(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return 20<t.length&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"!=typeof t)return"function"==typeof t?"a function":S("Unknown wrong type: "+typeof t);if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&1<e.length)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}function q(t,e,n){if(void 0===n)throw new b(v.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+V(e)+" argument, but it was undefined.")}function B(n,t,r){C(t,function(t,e){if(r.indexOf(t)<0)throw new b(v.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+n+"(). Available options: "+r.join(", "))})}function j(t,e,n,r){var i=U(r);return new b(v.INVALID_ARGUMENT,"Function "+t+"() requires its "+V(n)+" argument to be a "+e+", but it was: "+i)}function V(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function W(t,e){return t+" "+e+(1===t?"":"s")}var z=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return m(20===e.length,"Invalid auto ID: "+e),e},t}();function K(t,e){return t<e?-1:e<t?1:0}function Q(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function G(){if("undefined"==typeof Uint8Array)throw new b(v.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function H(){if(!l.getPlatform().base64Available)throw new b(v.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Y,X,$,J,Z=function(){function e(t){H(),this._binaryString=t}return e.fromBase64String=function(t){k("Blob.fromBase64String",arguments,1),x("Blob.fromBase64String","string",1,t),H();try{return new e(l.getPlatform().atob(t))}catch(t){throw new b(v.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){if(k("Blob.fromUint8Array",arguments,1),G(),!(t instanceof Uint8Array))throw j("Blob.fromUint8Array","Uint8Array",1,t);return new e(Array.prototype.map.call(t,function(t){return String.fromCharCode(t)}).join(""))},e.prototype.toBase64=function(){return k("Blob.toBase64",arguments,0),H(),l.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){k("Blob.toUint8Array",arguments,0),G();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(t){return this._binaryString===t._binaryString},e.prototype._compareTo=function(t){return K(this._binaryString,t._binaryString)},e}(),tt=w(Z,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),et=function(){function t(t,e){if(k("GeoPoint",arguments,2),x("GeoPoint","number",1,t),x("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new b(v.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new b(v.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return K(this._lat,t._lat)||K(this._long,t._long)},t}(),nt=function(){function n(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new b(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new b(v.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new b(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new b(v.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return n.now=function(){return n.fromMillis(Date.now())},n.fromDate=function(t){return n.fromMillis(t.getTime())},n.fromMillis=function(t){var e=Math.floor(t/1e3);return new n(e,1e6*(t-1e3*e))},n.prototype.toDate=function(){return new Date(this.toMillis())},n.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},n.prototype._compareTo=function(t){return this.seconds===t.seconds?K(this.nanoseconds,t.nanoseconds):K(this.seconds,t.seconds)},n.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},n.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},n}(),rt=function(t,e,n,r){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r},it=function(){function e(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(t){return K(this.projectId,t.projectId)||K(this.database,t.database)},e}(),ot=function(){function n(t,e,n){this.init(t,e,n)}return n.prototype.init=function(t,e,n){void 0===e?e=0:e>t.length&&S("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&S("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n},n.prototype.construct=function(t,e,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(t,e,n),r},Object.defineProperty(n.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),n.prototype.isEqual=function(t){return 0===n.comparator(this,t)},n.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach(function(t){e.push(t)}):"string"==typeof t?e.push(t):S("Unknown parameter type for Path.child(): "+t),this.construct(e)},n.prototype.limit=function(){return this.offset+this.length},n.prototype.popFirst=function(t){return t=void 0===t?1:t,m(this.length>=t,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},n.prototype.popLast=function(){return m(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},n.prototype.firstSegment=function(){return m(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},n.prototype.lastSegment=function(){return m(!this.isEmpty(),"Can't call lastSegment() on empty path"),this.segments[this.limit()-1]},n.prototype.get=function(t){return m(t<this.length,"Index out of range"),this.segments[this.offset+t]},n.prototype.isEmpty=function(){return 0===this.length},n.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},n.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},n.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},n.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},n.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},n}(),at=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p.__extends(e,t),e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(0<=t.indexOf("//"))throw new b(v.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter(function(t){return 0<t.length}))},e.EMPTY_PATH=new e([]),e}(ot),st=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ut=function(t){function u(){return null!==t&&t.apply(this,arguments)||this}return p.__extends(u,t),u.isValidIdentifier=function(t){return st.test(t)},u.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),u.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},u.prototype.toString=function(){return this.canonicalString()},u.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},u.keyField=function(){return new u(["__name__"])},u.fromServerFormat=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new b(v.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var a=t[r];if("\\"===a){if(r+1===t.length)throw new b(v.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var s=t[r+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new b(v.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=s,r+=2}else"`"===a?o=!o:"."!==a||o?n+=a:i(),r++}if(i(),o)throw new b(v.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new u(e)},u.EMPTY_PATH=new u([]),u}(ot),ct=function(){function e(t){this.path=t,m(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.isEqual=function(t){return null!==t&&0===at.comparator(this.path,t.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(t,e){return at.comparator(t.path,e.path)},e.isDocumentKey=function(t){return t.length%2==0},e.fromSegments=function(t){return new e(new at(t.slice()))},e.fromPathString=function(t){return new e(at.fromString(t))},e.EMPTY=new e(new at([])),e}(),lt=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return ct.comparator(t.key,e.key)},t}(),ft=function(o){function e(t,e,n,r){var i=o.call(this,t,e)||this;return i.data=n,i.hasLocalMutations=!!r.hasLocalMutations,i.hasCommittedMutations=!!r.hasCommittedMutations,i}return p.__extends(e,o),e.prototype.field=function(t){return this.data.field(t)},e.prototype.fieldValue=function(t){var e=this.field(t);return e?e.value():void 0},e.prototype.value=function(){return this.data.value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.data.isEqual(t.data)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return void 0!==r&&void 0!==i?r.compareTo(i):S("Trying to compare documents on fields that don't exist")},e}(lt),ht=function(i){function e(t,e,n){var r=i.call(this,t,e)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}return p.__extends(e,i),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(lt),pt=function(n){function e(t,e){return n.call(this,t,e)||this}return p.__extends(e,n),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(lt),dt=function(){function n(t,e){this.comparator=t,this.root=e||mt.EMPTY}return n.prototype.insert=function(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,mt.BLACK,null,null))},n.prototype.remove=function(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,mt.BLACK,null,null))},n.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},n.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},n.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(n.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),n.prototype.minKey=function(){return this.root.minKey()},n.prototype.maxKey=function(){return this.root.maxKey()},n.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},n.prototype.forEach=function(n){this.inorderTraversal(function(t,e){return n(t,e),!1})},n.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},n.prototype.getIterator=function(){return new yt(this.root,null,this.comparator,!1)},n.prototype.getIteratorFrom=function(t){return new yt(this.root,t,this.comparator,!1)},n.prototype.getReverseIterator=function(){return new yt(this.root,null,this.comparator,!0)},n.prototype.getReverseIteratorFrom=function(t){return new yt(this.root,t,this.comparator,!0)},n}(),yt=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){m(0<this.nodeStack.length,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return 0<this.nodeStack.length},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),mt=function(){function o(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:o.RED,this.left=null!=r?r:o.EMPTY,this.right=null!=i?i:o.EMPTY,this.size=this.left.size+1+this.right.size}return o.prototype.copy=function(t,e,n,r,i){return new o(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},o.prototype.isEmpty=function(){return!1},o.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},o.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},o.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},o.prototype.minKey=function(){return this.min().key},o.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},o.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},o.prototype.removeMin=function(){if(this.left.isEmpty())return o.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},o.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return o.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()},o.prototype.isRed=function(){return this.color},o.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},o.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},o.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},o.prototype.rotateLeft=function(){var t=this.copy(null,null,o.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},o.prototype.rotateRight=function(){var t=this.copy(null,null,o.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},o.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},o.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},o.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw S("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw S("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw S("Black depths differ");return t+(this.isRed()?0:1)},o.EMPTY=null,o.RED=!0,o.BLACK=!1,o}(),gt=function(){function t(){this.size=0}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new mt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();mt.EMPTY=new gt,(X=Y||(Y={}))[X.NullValue=0]="NullValue",X[X.BooleanValue=1]="BooleanValue",X[X.NumberValue=2]="NumberValue",X[X.TimestampValue=3]="TimestampValue",X[X.StringValue=4]="StringValue",X[X.BlobValue=5]="BlobValue",X[X.RefValue=6]="RefValue",X[X.GeoPointValue=7]="GeoPointValue",X[X.ArrayValue=8]="ArrayValue",X[X.ObjectValue=9]="ObjectValue",(J=$||($={}))[J.Default=0]="Default",J[J.Estimate=1]="Estimate",J[J.Previous=2]="Previous";var vt=function(){function n(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return n.fromSnapshotOptions=function(t,e){switch(t.serverTimestamps){case"estimate":return new n($.Estimate,e);case"previous":return new n($.Previous,e);case"none":case void 0:return new n($.Default,e);default:return S("fromSnapshotOptions() called with invalid options.")}},n}(),bt=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return m(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),K(this.typeOrder,t.typeOrder)},t}(),wt=function(e){function n(){var t=e.call(this)||this;return t.typeOrder=Y.NullValue,t.internalValue=null,t}return p.__extends(n,e),n.prototype.value=function(t){return null},n.prototype.isEqual=function(t){return t instanceof n},n.prototype.compareTo=function(t){return t instanceof n?0:this.defaultCompareTo(t)},n.INSTANCE=new n,n}(bt),St=function(n){function e(t){var e=n.call(this)||this;return e.internalValue=t,e.typeOrder=Y.BooleanValue,e}return p.__extends(e,n),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?K(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(bt),Et=function(n){function r(t){var e=n.call(this)||this;return e.internalValue=t,e.typeOrder=Y.NumberValue,e}return p.__extends(r,n),r.prototype.value=function(t){return this.internalValue},r.prototype.compareTo=function(t){return t instanceof r?(e=this.internalValue,n=t.internalValue,e<n?-1:n<e?1:e===n?0:isNaN(e)?isNaN(n)?0:-1:1):this.defaultCompareTo(t);var e,n},r}(bt);function Tt(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var _t=function(e){function n(t){return e.call(this,t)||this}return p.__extends(n,e),n.prototype.isEqual=function(t){return t instanceof n&&Tt(this.internalValue,t.internalValue)},n}(Et),Ct=function(n){function e(t){var e=n.call(this,t)||this;return e.internalValue=t,e}return p.__extends(e,n),e.prototype.isEqual=function(t){return t instanceof e&&Tt(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(Et),It=function(n){function e(t){var e=n.call(this)||this;return e.internalValue=t,e.typeOrder=Y.StringValue,e}return p.__extends(e,n),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?K(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(bt),kt=function(n){function e(t){var e=n.call(this)||this;return e.internalValue=t,e.typeOrder=Y.TimestampValue,e}return p.__extends(e,n),e.prototype.value=function(t){return t&&t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof Dt?-1:this.defaultCompareTo(t)},e}(bt),Dt=function(r){function e(t,e){var n=r.call(this)||this;return n.localWriteTime=t,n.previousValue=e,n.typeOrder=Y.TimestampValue,n}return p.__extends(e,r),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===$.Estimate?new kt(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===$.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof kt?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(bt),Nt=function(n){function e(t){var e=n.call(this)||this;return e.internalValue=t,e.typeOrder=Y.BlobValue,e}return p.__extends(e,n),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(bt),xt=function(r){function n(t,e){var n=r.call(this)||this;return n.databaseId=t,n.key=e,n.typeOrder=Y.RefValue,n}return p.__extends(n,r),n.prototype.value=function(t){return this.key},n.prototype.isEqual=function(t){return t instanceof n&&(this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId))},n.prototype.compareTo=function(t){if(t instanceof n){var e=this.databaseId.compareTo(t.databaseId);return 0!==e?e:ct.comparator(this.key,t.key)}return this.defaultCompareTo(t)},n}(bt),At=function(n){function e(t){var e=n.call(this)||this;return e.internalValue=t,e.typeOrder=Y.GeoPointValue,e}return p.__extends(e,n),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(bt),Ot=function(n){function a(t){var e=n.call(this)||this;return e.internalValue=t,e.typeOrder=Y.ObjectValue,e}return p.__extends(a,n),a.prototype.value=function(n){var r={};return this.internalValue.inorderTraversal(function(t,e){r[t]=e.value(n)}),r},a.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},a.prototype.isEqual=function(t){if(t instanceof a){for(var e=this.internalValue.getIterator(),n=t.internalValue.getIterator();e.hasNext()&&n.hasNext();){var r=e.getNext(),i=n.getNext();if(r.key!==i.key||!r.value.isEqual(i.value))return!1}return!e.hasNext()&&!n.hasNext()}return!1},a.prototype.compareTo=function(t){if(t instanceof a){for(var e=this.internalValue.getIterator(),n=t.internalValue.getIterator();e.hasNext()&&n.hasNext();){var r=e.getNext(),i=n.getNext(),o=K(r.key,i.key)||r.value.compareTo(i.value);if(o)return o}return K(e.hasNext(),n.hasNext())}return this.defaultCompareTo(t)},a.prototype.set=function(t,e){if(m(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),e);var n=this.child(t.firstSegment());n instanceof a||(n=a.EMPTY);var r=n.set(t.popFirst(),e);return this.setChild(t.firstSegment(),r)},a.prototype.delete=function(t){if(m(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new a(this.internalValue.remove(t.firstSegment()));var e=this.child(t.firstSegment());if(e instanceof a){var n=e.delete(t.popFirst());return new a(this.internalValue.insert(t.firstSegment(),n))}return this},a.prototype.contains=function(t){return void 0!==this.field(t)},a.prototype.field=function(t){m(!t.isEmpty(),"Can't get field of empty path");var e=this;return t.forEach(function(t){e=e instanceof a&&e.internalValue.get(t)||void 0}),e},a.prototype.toString=function(){return JSON.stringify(this.value())},a.prototype.child=function(t){return this.internalValue.get(t)||void 0},a.prototype.setChild=function(t,e){return new a(this.internalValue.insert(t,e))},a.EMPTY=new a(new dt(K)),a}(bt),Pt=function(n){function i(t){var e=n.call(this)||this;return e.internalValue=t,e.typeOrder=Y.ArrayValue,e}return p.__extends(i,n),i.prototype.value=function(e){return this.internalValue.map(function(t){return t.value(e)})},i.prototype.forEach=function(t){this.internalValue.forEach(t)},i.prototype.isEqual=function(t){if(t instanceof i){if(this.internalValue.length!==t.internalValue.length)return!1;for(var e=0;e<this.internalValue.length;e++)if(!this.internalValue[e].isEqual(t.internalValue[e]))return!1;return!0}return!1},i.prototype.compareTo=function(t){if(t instanceof i){for(var e=Math.min(this.internalValue.length,t.internalValue.length),n=0;n<e;n++){var r=this.internalValue[n].compareTo(t.internalValue[n]);if(r)return r}return K(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},i.prototype.toString=function(){return JSON.stringify(this.value())},i}(bt),Rt=Number,Mt=Rt.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Lt=Rt.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Ft=Rt.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function Ut(t){return null==t}function qt(t){return Ft(t)&&t<=Lt&&Mt<=t}var Bt,jt,Vt=function(){function n(t,e,n,r,i,o){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null),this.path=t,this.explicitOrderBy=e,this.filters=n,this.limit=r,this.startAt=i,this.endAt=o,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return n.atPath=function(t){return new n(t)},Object.defineProperty(n.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)t.isKeyField()?this.memoizedOrderBy=[$t]:this.memoizedOrderBy=[new Xt(t),$t];else{m(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field.");for(var n=!(this.memoizedOrderBy=[]),r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=0<this.explicitOrderBy.length?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Ht.ASCENDING;this.memoizedOrderBy.push(a===Ht.ASCENDING?$t:Jt)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),n.prototype.addFilter=function(t){m(null==this.getInequalityFilterField()||!(t instanceof Kt)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),m(!ct.isDocumentKey(this.path),"No filtering allowed for document query");var e=this.filters.concat([t]);return new n(this.path,this.explicitOrderBy.slice(),e,this.limit,this.startAt,this.endAt)},n.prototype.addOrderBy=function(t){m(!ct.isDocumentKey(this.path),"No ordering allowed for document query"),m(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var e=this.explicitOrderBy.concat([t]);return new n(this.path,e,this.filters.slice(),this.limit,this.startAt,this.endAt)},n.prototype.withLimit=function(t){return new n(this.path,this.explicitOrderBy.slice(),this.filters.slice(),t,this.startAt,this.endAt)},n.prototype.withStartAt=function(t){return new n(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,t,this.endAt)},n.prototype.withEndAt=function(t){return new n(this.path,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,t)},n.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();t+="|f:";for(var e=0,n=this.filters;e<n.length;e++){t+=n[e].canonicalId(),t+=","}t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++){t+=i[r].canonicalId(),t+=","}Ut(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},n.prototype.toString=function(){var t="Query("+this.path.canonicalString();return 0<this.filters.length&&(t+=", filters: ["+this.filters.join(", ")+"]"),Ut(this.limit)||(t+=", limit: "+this.limit),0<this.explicitOrderBy.length&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},n.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return!!this.path.isEqual(t.path)&&(!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt))},n.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(t,e);if(0!==a)return a;n=n||o.field.isKeyField()}return m(n,"orderBy used that doesn't compare on key field"),0},n.prototype.matches=function(t){return this.matchesAncestor(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},n.prototype.hasLimit=function(){return!Ut(this.limit)},n.prototype.getFirstOrderByField=function(){return 0<this.explicitOrderBy.length?this.explicitOrderBy[0].field:null},n.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Kt&&n.isInequality())return n.field}return null},n.prototype.hasArrayContainsFilter=function(){return void 0!==this.filters.find(function(t){return t instanceof Kt&&t.op===zt.ARRAY_CONTAINS})},n.prototype.isDocumentQuery=function(){return ct.isDocumentKey(this.path)&&0===this.filters.length},n.prototype.matchesAncestor=function(t){var e=t.key.path;return ct.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isPrefixOf(e)&&this.path.length===e.length-1},n.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&void 0===t.field(r.field))return!1}return!0},n.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++){if(!n[e].matches(t))return!1}return!0},n.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,t))},n.prototype.assertValidBound=function(t){m(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},n}(),Wt=function(){function t(){}return t.create=function(t,e,n){if(n.isEqual(wt.INSTANCE)){if(e!==zt.EQUAL)throw new b(v.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new Qt(t)}if(n.isEqual(Ct.NAN)){if(e!==zt.EQUAL)throw new b(v.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new Gt(t)}return new Kt(t,e,n)},t}(),zt=function(){function e(t){this.name=t}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;default:return S("Unknown relation: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(t){return this.name===t.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e}(),Kt=function(i){function e(t,e,n){var r=i.call(this)||this;return r.field=t,r.op=e,r.value=n,r}return p.__extends(e,i),e.prototype.matches=function(t){if(this.field.isKeyField()){m(this.value instanceof xt,"Comparing on key, but filter value not a RefValue"),m(this.op!==zt.ARRAY_CONTAINS,"array-contains queries don't make sense on document keys.");var e=this.value,n=ct.comparator(t.key,e.key);return this.matchesComparison(n)}var r=t.field(this.field);return void 0!==r&&this.matchesValue(r)},e.prototype.matchesValue=function(t){var e=this;return this.op===zt.ARRAY_CONTAINS?t instanceof Pt&&void 0!==t.internalValue.find(function(t){return t.isEqual(e.value)}):this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case zt.LESS_THAN:return t<0;case zt.LESS_THAN_OR_EQUAL:return t<=0;case zt.EQUAL:return 0===t;case zt.GREATER_THAN:return 0<t;case zt.GREATER_THAN_OR_EQUAL:return 0<=t;default:return S("Unknown relation op"+this.op)}},e.prototype.isInequality=function(){return this.op!==zt.EQUAL&&this.op!==zt.ARRAY_CONTAINS},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&(this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value))},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}(Wt),Qt=function(n){function e(t){var e=n.call(this)||this;return e.field=t,e}return p.__extends(e,n),e.prototype.matches=function(t){var e=t.field(this.field);return void 0!==e&&null===e.value()},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},e.prototype.toString=function(){return this.field.canonicalString()+" IS null"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(Wt),Gt=function(n){function e(t){var e=n.call(this)||this;return e.field=t,e}return p.__extends(e,n),e.prototype.matches=function(t){var e=t.field(this.field),n=e&&e.value();return"number"==typeof n&&isNaN(n)},e.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},e.prototype.isEqual=function(t){return t instanceof e&&this.field.isEqual(t.field)},e}(Wt),Ht=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),Yt=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++){t+=n[e].toString()}return t},t.prototype.sortsBeforeDocument=function(t,e){m(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())m(o instanceof xt,"Bound has a non-key value where the key path is being used."),n=ct.comparator(o.key,e.key);else{var a=e.field(i.field);m(void 0!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===Ht.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var n=this.position[e],r=t.position[e];return n.isEqual(r)}return!0},t}(),Xt=function(){function t(t,e){this.field=t,void 0===e&&(e=Ht.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?ft.compareByKey(t,e):ft.compareByField(this.field,t,e);switch(this.dir){case Ht.ASCENDING:return n;case Ht.DESCENDING:return-1*n;default:return S("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),$t=new Xt(ut.keyField(),Ht.ASCENDING),Jt=new Xt(ut.keyField(),Ht.DESCENDING),Zt=function(){function n(t){this.timestamp=t}return n.fromMicroseconds=function(t){var e=Math.floor(t/1e6);return new n(new nt(e,t%1e6*1e3))},n.fromTimestamp=function(t){return new n(t)},n.forDeletedDoc=function(){return n.MIN},n.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},n.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},n.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},n.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},n.prototype.toTimestamp=function(){return this.timestamp},n.MIN=new n(new nt(0,0)),n}();(jt=Bt||(Bt={}))[jt.Listen=0]="Listen",jt[jt.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",jt[jt.LimboResolution=2]="LimboResolution";var te,ee,ne=function(){function e(t,e,n,r,i,o){void 0===i&&(i=Zt.MIN),void 0===o&&(o=g()),this.query=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}return e.prototype.copy=function(t){return new e(this.query,this.targetId,this.purpose,void 0===t.sequenceNumber?this.sequenceNumber:t.sequenceNumber,void 0===t.snapshotVersion?this.snapshotVersion:t.snapshotVersion,void 0===t.resumeToken?this.resumeToken:t.resumeToken)},e.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},e}(),re=function(){function o(t){this.comparator=t,this.data=new dt(this.comparator)}return o.fromMapKeys=function(t){var e=new o(t.comparator);return t.forEach(function(t){e=e.add(t)}),e},o.prototype.has=function(t){return null!==this.data.get(t)},o.prototype.first=function(){return this.data.minKey()},o.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(o.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),o.prototype.indexOf=function(t){return this.data.indexOf(t)},o.prototype.forEach=function(n){this.data.inorderTraversal(function(t,e){return n(t),!1})},o.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,t[1]))return;e(r.key)}},o.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();){if(!t(n.getNext().key))return}},o.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},o.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},o.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},o.prototype.isEmpty=function(){return this.data.isEmpty()},o.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},o.prototype.isEqual=function(t){if(!(t instanceof o))return!1;if(this.size!==t.size)return!1;for(var e=this.data.getIterator(),n=t.data.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},o.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},o.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},o.prototype.copy=function(t){var e=new o(this.comparator);return e.data=t,e},o}(),ie=function(){function n(t){this.fields=t}return n.fromArray=function(t){var e=new re(ut.comparator);return t.forEach(function(t){return e=e.add(t)}),new n(e)},n.prototype.covers=function(e){var n=!1;return this.fields.forEach(function(t){t.isPrefixOf(e)&&(n=!0)}),n},n.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},n}(),oe=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),ae=function(t,e){this.version=t,this.transformResults=e};(ee=te||(te={}))[ee.Set=0]="Set",ee[ee.Patch=1]="Patch",ee[ee.Transform=2]="Transform",ee[ee.Delete=3]="Delete";var se=function(){function e(t,e){this.updateTime=t,this.exists=e,m(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof ft&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof ft:(m(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(t){return e=this.updateTime,n=t.updateTime,(null!=e?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},e.NONE=new e,e}(),ue=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&m(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof ft?t.version:Zt.MIN},t}(),ce=function(i){function e(t,e,n){var r=i.call(this)||this;return r.key=t,r.value=e,r.precondition=n,r.type=te.Set,r}return p.__extends(e,i),e.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),m(null==e.transformResults,"Transform results received by SetMutation.");var n=e.version;return new ft(this.key,n,this.value,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=ue.getPostMutationVersion(t);return new ft(this.key,r,this.value,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(ue),le=function(o){function e(t,e,n,r){var i=o.call(this)||this;return i.key=t,i.data=e,i.fieldMask=n,i.precondition=r,i.type=te.Patch,i}return p.__extends(e,o),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),m(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new pt(this.key,e.version);var n=this.patchDocument(t);return new ft(this.key,e.version,n,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=ue.getPostMutationVersion(t),i=this.patchDocument(t);return new ft(this.key,r,i,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){var e;return e=t instanceof ft?t.data:Ot.EMPTY,this.patchObject(e)},e.prototype.patchObject=function(n){var r=this;return this.fieldMask.fields.forEach(function(t){if(!t.isEmpty()){var e=r.data.field(t);n=void 0!==e?n.set(t,e):n.delete(t)}}),n},e}(ue),fe=function(r){function e(t,e){var n=r.call(this)||this;return n.key=t,n.fieldTransforms=e,n.type=te.Transform,n.precondition=se.exists(!0),n}return p.__extends(e,r),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),m(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new pt(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=e.version,o=this.transformObject(n.data,r);return new ft(this.key,i,o,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,e),o=this.transformObject(r.data,i);return new ft(this.key,r.version,o,{hasLocalMutations:!0})},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&Q(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){m(t instanceof ft,"Unknown MaybeDocument type "+t);var e=t;return m(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},e.prototype.serverTransformResults=function(t,e){var n=[];m(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;t instanceof ft&&(a=t.field(i.field)||null),n.push(o.applyToRemoteDocument(a,e[r]))}return n},e.prototype.localTransformResults=function(t,e){for(var n=[],r=0,i=this.fieldTransforms;r<i.length;r++){var o=i[r],a=o.transform,s=null;e instanceof ft&&(s=e.field(o.field)||null),n.push(a.applyToLocalView(s,t))}return n},e.prototype.transformObject=function(t,e){m(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;t=t.set(r,e[n])}return t},e}(ue),he=function(r){function e(t,e){var n=r.call(this)||this;return n.key=t,n.precondition=e,n.type=te.Delete,n}return p.__extends(e,r),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),m(null==e.transformResults,"Transform results received by DeleteMutation."),new ht(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&m(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new ht(this.key,Zt.forDeletedDoc())):t},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(ue),pe=function(){function e(){}return e.prototype.applyToLocalView=function(t,e){return new Dt(e,t)},e.prototype.applyToRemoteDocument=function(t,e){return e},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),de=function(){function e(t){this.elements=t}return e.prototype.applyToLocalView=function(t,e){return this.apply(t)},e.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},e.prototype.apply=function(t){for(var n=me(t),e=function(e){n.find(function(t){return t.isEqual(e)})||n.push(e)},r=0,i=this.elements;r<i.length;r++){e(i[r])}return new Pt(n)},e.prototype.isEqual=function(t){return t instanceof e&&Q(t.elements,this.elements)},e}(),ye=function(){function e(t){this.elements=t}return e.prototype.applyToLocalView=function(t,e){return this.apply(t)},e.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},e.prototype.apply=function(t){for(var n=me(t),e=function(e){n=n.filter(function(t){return!t.isEqual(e)})},r=0,i=this.elements;r<i.length;r++){e(i[r])}return new Pt(n)},e.prototype.isEqual=function(t){return t instanceof e&&Q(t.elements,this.elements)},e}();function me(t){return t instanceof Pt?t.internalValue.slice():[]}var ge,ve,be=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}();function we(t){switch(t){case v.OK:return S("Treated status OK as error");case v.CANCELLED:case v.UNKNOWN:case v.DEADLINE_EXCEEDED:case v.RESOURCE_EXHAUSTED:case v.INTERNAL:case v.UNAVAILABLE:case v.UNAUTHENTICATED:return!1;case v.INVALID_ARGUMENT:case v.NOT_FOUND:case v.ALREADY_EXISTS:case v.PERMISSION_DENIED:case v.FAILED_PRECONDITION:case v.ABORTED:case v.OUT_OF_RANGE:case v.UNIMPLEMENTED:case v.DATA_LOSS:return!0;default:return S("Unknown status code: "+t)}}function Se(t){if(void 0===t)return u("GRPC error has no .code"),v.UNKNOWN;switch(t){case ge.OK:return v.OK;case ge.CANCELLED:return v.CANCELLED;case ge.UNKNOWN:return v.UNKNOWN;case ge.DEADLINE_EXCEEDED:return v.DEADLINE_EXCEEDED;case ge.RESOURCE_EXHAUSTED:return v.RESOURCE_EXHAUSTED;case ge.INTERNAL:return v.INTERNAL;case ge.UNAVAILABLE:return v.UNAVAILABLE;case ge.UNAUTHENTICATED:return v.UNAUTHENTICATED;case ge.INVALID_ARGUMENT:return v.INVALID_ARGUMENT;case ge.NOT_FOUND:return v.NOT_FOUND;case ge.ALREADY_EXISTS:return v.ALREADY_EXISTS;case ge.PERMISSION_DENIED:return v.PERMISSION_DENIED;case ge.FAILED_PRECONDITION:return v.FAILED_PRECONDITION;case ge.ABORTED:return v.ABORTED;case ge.OUT_OF_RANGE:return v.OUT_OF_RANGE;case ge.UNIMPLEMENTED:return v.UNIMPLEMENTED;case ge.DATA_LOSS:return v.DATA_LOSS;default:return S("Unknown status code: "+t)}}(ve=ge||(ge={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var Ee=new dt(ct.comparator);function Te(){return Ee}var _e=new dt(ct.comparator);function Ce(){return _e}var Ie=new dt(ct.comparator);function ke(){return Ie}var De=new re(ct.comparator);function Ne(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=De,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var xe=new re(K);function Ae(){return xe}var Oe,Pe,Re,Me,Le=function(){function o(n){this.comparator=n?function(t,e){return n(t,e)||ct.comparator(t.key,e.key)}:function(t,e){return ct.comparator(t.key,e.key)},this.keyedMap=Ce(),this.sortedSet=new dt(this.comparator)}return o.emptySet=function(t){return new o(t.comparator)},o.prototype.has=function(t){return null!=this.keyedMap.get(t)},o.prototype.get=function(t){return this.keyedMap.get(t)},o.prototype.first=function(){return this.sortedSet.minKey()},o.prototype.last=function(){return this.sortedSet.maxKey()},o.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},o.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(o.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),o.prototype.forEach=function(n){this.sortedSet.inorderTraversal(function(t,e){return n(t),!1})},o.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},o.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},o.prototype.isEqual=function(t){if(!(t instanceof o))return!1;if(this.size!==t.size)return!1;for(var e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},o.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},o.prototype.copy=function(t,e){var n=new o;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n},o}();(Pe=Oe||(Oe={}))[Pe.Added=0]="Added",Pe[Pe.Removed=1]="Removed",Pe[Pe.Modified=2]="Modified",Pe[Pe.Metadata=3]="Metadata",(Me=Re||(Re={}))[Me.Local=0]="Local",Me[Me.Synced=1]="Synced";var Fe,Ue,qe=function(){function t(){this.changeMap=new dt(ct.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==Oe.Added&&n.type===Oe.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===Oe.Metadata&&n.type!==Oe.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===Oe.Modified&&n.type===Oe.Modified?this.changeMap=this.changeMap.insert(e,{type:Oe.Modified,doc:t.doc}):t.type===Oe.Modified&&n.type===Oe.Added?this.changeMap=this.changeMap.insert(e,{type:Oe.Added,doc:t.doc}):t.type===Oe.Removed&&n.type===Oe.Added?this.changeMap=this.changeMap.remove(e):t.type===Oe.Removed&&n.type===Oe.Modified?this.changeMap=this.changeMap.insert(e,{type:Oe.Removed,doc:n.doc}):t.type===Oe.Added&&n.type===Oe.Removed?this.changeMap=this.changeMap.insert(e,{type:Oe.Modified,doc:t.doc}):S("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var n=[];return this.changeMap.inorderTraversal(function(t,e){n.push(e)}),n},t}(),Be=function(){function o(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return o.fromInitialDocuments=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:Oe.Added,doc:t})}),new o(t,e,Le.emptySet(e),i,n,r,!0,!1)},Object.defineProperty(o.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),o.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},o}(),je=function(){function i(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return i.createSynthesizedRemoteEventForCurrentChange=function(t,e){var n,r=((n={})[t]=Ve.createSynthesizedTargetChangeForCurrentChange(t,e),n);return new i(Zt.MIN,r,Ae(),Te(),Ne())},i}(),Ve=function(){function n(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return n.createSynthesizedTargetChangeForCurrentChange=function(t,e){return new n(g(),e,Ne(),Ne(),Ne())},n}(),We=function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r},ze=function(t,e){this.targetId=t,this.existenceFilter=e};(Ue=Fe||(Fe={}))[Ue.NoChange=0]="NoChange",Ue[Ue.Added=1]="Added",Ue[Ue.Removed=2]="Removed",Ue[Ue.Current=3]="Current",Ue[Ue.Reset=4]="Reset";var Ke=function(t,e,n,r){void 0===n&&(n=g()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Qe=function(){function t(){this.pendingResponses=0,this.documentChanges=Ye(),this._resumeToken=g(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){0<t.length&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var n=Ne(),r=Ne(),i=Ne();return this.documentChanges.forEach(function(t,e){switch(e){case Oe.Added:n=n.add(t);break;case Oe.Modified:r=r.add(t);break;case Oe.Removed:i=i.add(t);break;default:S("Encountered invalid change type: "+e)}}),new Ve(this._resumeToken,this._current,n,r,i)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=Ye()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),Ge=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=Te(),this.pendingDocumentTargetMapping=He(),this.pendingTargetResets=new re(K)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof ft?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof ht&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){r=o[i];this.removeDocumentFromTarget(r,t.key,t.newDoc)}},t.prototype.handleTargetChange=function(n){var r=this;this.forEachTarget(n,function(t){var e=r.ensureTargetState(t);switch(n.state){case Fe.NoChange:r.isActiveTarget(t)&&e.updateResumeToken(n.resumeToken);break;case Fe.Added:e.recordTargetResponse(),e.isPending||e.clearPendingChanges(),e.updateResumeToken(n.resumeToken);break;case Fe.Removed:e.recordTargetResponse(),e.isPending||r.removeTarget(t),m(!n.cause,"WatchChangeAggregator does not handle errored targets");break;case Fe.Current:r.isActiveTarget(t)&&(e.markCurrent(),e.updateResumeToken(n.resumeToken));break;case Fe.Reset:r.isActiveTarget(t)&&(r.resetTarget(t),e.updateResumeToken(n.resumeToken));break;default:S("Unknown target watch change state: "+n.state)}})},t.prototype.forEachTarget=function(t,e){0<t.targetIds.length?t.targetIds.forEach(e):_(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.queryDataForActiveTarget(e);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new ct(i.path);this.removeDocumentFromTarget(e,o,new ht(o,Zt.forDeletedDoc()))}else m(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},t.prototype.createRemoteEvent=function(i){var o=this,a={};_(this.targetStates,function(t,e){var n=o.queryDataForActiveTarget(t);if(n){if(e.current&&n.query.isDocumentQuery()){var r=new ct(n.query.path);null!==o.pendingDocumentUpdates.get(r)||o.targetContainsDocument(t,r)||o.removeDocumentFromTarget(t,r,new ht(r,i))}e.hasPendingChanges&&(a[t]=e.toTargetChange(),e.clearPendingChanges())}});var r=Ne();this.pendingDocumentTargetMapping.forEach(function(t,e){var n=!0;e.forEachWhile(function(t){var e=o.queryDataForActiveTarget(t);return!e||e.purpose===Bt.LimboResolution||(n=!1)}),n&&(r=r.add(t))});var t=new je(i,a,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Te(),this.pendingDocumentTargetMapping=He(),this.pendingTargetResets=new re(K),t},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?Oe.Modified:Oe.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,Oe.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new Qe),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new re(K),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){return null!==this.queryDataForActiveTarget(t)},t.prototype.queryDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getQueryDataForTarget(t)},t.prototype.resetTarget=function(e){var n=this;m(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new Qe,this.metadataProvider.getRemoteKeysForTarget(e).forEach(function(t){n.removeDocumentFromTarget(e,t,null)})},t.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},t}();function He(){return new dt(ct.comparator)}function Ye(){return new dt(ct.comparator)}var Xe,$e,Je=((Xe={})[Ht.ASCENDING.name]="ASCENDING",Xe[Ht.DESCENDING.name]="DESCENDING",Xe),Ze=(($e={})[zt.LESS_THAN.name]="LESS_THAN",$e[zt.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",$e[zt.GREATER_THAN.name]="GREATER_THAN",$e[zt.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",$e[zt.EQUAL.name]="EQUAL",$e[zt.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",$e),tn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function en(t,e){m(!Ut(t),e+" is missing")}function nn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):S("can't parse "+t)}var rn=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?v.UNKNOWN:Se(t.code);return new b(e,t.message||"")},t.prototype.toInt32Value=function(t){return Ut(t)?void 0:{value:t}},t.prototype.fromInt32Value=function(t){var e;return Ut(e="object"==typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return{seconds:t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);m(!!t,"Cannot deserialize null or undefined timestamp.");var e=nn(t.seconds||"0"),n=t.nanos||0;return new nt(e,n)},t.prototype.fromIso8601String=function(t){var e=0,n=tn.exec(t);if(m(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new nt(o,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(m(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Z.fromBase64String(t)):(m(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),Z.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return m(!!t,"Trying to deserialize version that isn't set"),Zt.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=at.fromString(t);return m(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return m(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),m(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new ct(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return 0===t.length?this.encodedDatabaseId:this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?at.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new at(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new at(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return m(4<t.length&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof wt)return{nullValue:"NULL_VALUE"};if(t instanceof St)return{booleanValue:t.value()};if(t instanceof _t)return{integerValue:""+t.value()};if(t instanceof Ct){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof It?{stringValue:t.value()}:t instanceof Ot?{mapValue:this.toMapValue(t)}:t instanceof Pt?{arrayValue:this.toArrayValue(t)}:t instanceof kt?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof At?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof Nt?{bytesValue:this.toBytes(t.value())}:t instanceof xt?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:S("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this,n=t.value_type;if(on(t,n,"nullValue"))return wt.INSTANCE;if(on(t,n,"booleanValue"))return St.of(t.booleanValue);if(on(t,n,"integerValue"))return new _t(nn(t.integerValue));if(on(t,n,"doubleValue")){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return Ct.NAN;if("Infinity"===t.doubleValue)return Ct.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Ct.NEGATIVE_INFINITY}return new Ct(t.doubleValue)}if(on(t,n,"stringValue"))return new It(t.stringValue);if(on(t,n,"mapValue"))return this.fromFields(t.mapValue.fields||{});if(on(t,n,"arrayValue")){en(t.arrayValue,"arrayValue");var r=t.arrayValue.values||[];return new Pt(r.map(function(t){return e.fromValue(t)}))}if(on(t,n,"timestampValue"))return en(t.timestampValue,"timestampValue"),new kt(this.fromTimestamp(t.timestampValue));if(on(t,n,"geoPointValue")){en(t.geoPointValue,"geoPointValue");var i=t.geoPointValue.latitude||0,o=t.geoPointValue.longitude||0;return new At(new et(i,o))}if(on(t,n,"bytesValue")){en(t.bytesValue,"bytesValue");var a=this.fromBlob(t.bytesValue);return new Nt(a)}if(on(t,n,"referenceValue")){en(t.referenceValue,"referenceValue");var s=this.fromResourceName(t.referenceValue),u=new it(s.get(1),s.get(3)),c=new ct(this.extractLocalPathFromResourceName(s));return new xt(u,c)}return S("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return m(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){return new ft(this.fromName(t.name),this.fromVersion(t.updateTime),this.fromFields(t.fields||{}),{hasCommittedMutations:!!e})},t.prototype.toFields=function(t){var n=this,r={};return t.forEach(function(t,e){r[t]=n.toValue(e)}),r},t.prototype.fromFields=function(t){var n=this,e=t,r=Ot.EMPTY;return C(e,function(t,e){r=r.set(new ut([t]),n.fromValue(e))}),r},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},t.prototype.fromFound=function(t){m(!!t.found,"Tried to deserialize a found document from a missing document."),en(t.found.name,"doc.found.name"),en(t.found.updateTime,"doc.found.updateTime");var e=this.fromName(t.found.name),n=this.fromVersion(t.found.updateTime),r=this.fromFields(t.found.fields||{});return new ft(e,n,r,{})},t.prototype.fromMissing=function(t){m(!!t.missing,"Tried to deserialize a missing document from a found document."),m(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new ht(e,n)},t.prototype.fromMaybeDocument=function(t){var e=t.result;return on(t,e,"found")?this.fromFound(t):on(t,e,"missing")?this.fromMissing(t):S("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case Fe.Added:return"ADD";case Fe.Current:return"CURRENT";case Fe.NoChange:return"NO_CHANGE";case Fe.Removed:return"REMOVE";case Fe.Reset:return"RESET";default:return S("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof ze)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof We){if(t.newDoc instanceof ft){var e=t.newDoc;return{documentChange:{document:{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}}}if(t.newDoc instanceof ht){e=t.newDoc;return{documentDelete:{document:this.toName(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}}}if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof Ke){var n=void 0;return t.cause&&(n={code:function(t){if(void 0===t)return ge.OK;switch(t){case v.OK:return ge.OK;case v.CANCELLED:return ge.CANCELLED;case v.UNKNOWN:return ge.UNKNOWN;case v.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case v.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case v.INTERNAL:return ge.INTERNAL;case v.UNAVAILABLE:return ge.UNAVAILABLE;case v.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case v.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case v.NOT_FOUND:return ge.NOT_FOUND;case v.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case v.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case v.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case v.ABORTED:return ge.ABORTED;case v.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case v.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case v.DATA_LOSS:return ge.DATA_LOSS;default:return S("Unknown status code: "+t)}}(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return S("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=t.response_type;if(on(t,n,"targetChange")){en(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),a=t.targetChange.cause,s=a&&this.fromRpcStatus(a);e=new Ke(r,i,o,s||null)}else if(on(t,n,"documentChange")){en(t.documentChange,"documentChange"),en(t.documentChange.document,"documentChange.name"),en(t.documentChange.document.name,"documentChange.document.name"),en(t.documentChange.document.updateTime,"documentChange.document.updateTime");var u=t.documentChange,c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),f=this.fromFields(u.document.fields||{}),h=new ft(c,l,f,{}),p=u.targetIds||[],d=u.removedTargetIds||[];e=new We(p,d,h.key,h)}else if(on(t,n,"documentDelete")){en(t.documentDelete,"documentDelete"),en(t.documentDelete.document,"documentDelete.document");var y=t.documentDelete;c=this.fromName(y.document),l=y.readTime?this.fromVersion(y.readTime):Zt.forDeletedDoc(),h=new ht(c,l),d=y.removedTargetIds||[];e=new We([],d,h.key,h)}else if(on(t,n,"documentRemove")){en(t.documentRemove,"documentRemove"),en(t.documentRemove.document,"documentRemove");var m=t.documentRemove;c=this.fromName(m.document),d=m.removedTargetIds||[];e=new We([],d,c,null)}else{if(!on(t,n,"filter"))return S("Unknown change type "+JSON.stringify(t));en(t.filter,"filter"),en(t.filter.targetId,"filter.targetId");var g=t.filter,v=g.count||0,b=new be(v),w=g.targetId;e=new ze(w,b)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?Fe.NoChange:"ADD"===t?Fe.Added:"REMOVE"===t?Fe.Removed:"CURRENT"===t?Fe.Current:"RESET"===t?Fe.Reset:S("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!on(t,t.response_type,"targetChange"))return Zt.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?Zt.MIN:e.readTime?this.fromVersion(e.readTime):Zt.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof ce)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof he)e={delete:this.toName(t.key)};else if(t instanceof le)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof fe))return S("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):se.NONE;if(t.update){en(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new le(r,i,o,n)}return new ce(r,i,n)}if(t.delete){r=this.fromName(t.delete);return new he(r,n)}if(t.transform){r=this.fromName(t.transform.document);var a=t.transform.fieldTransforms.map(function(t){return e.fromFieldTransform(t)});return m(!0===n.exists,'Transforms only support precondition "exists == true"'),new fe(r,a)}return S("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return m(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:S("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?se.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?se.exists(t.exists):se.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,r=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e),i=null;return t.transformResults&&0<t.transformResults.length&&(i=t.transformResults.map(function(t){return n.fromValue(t)})),new ae(r,i)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&0<t.length?(m(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.fromWriteResult(t,e)})):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof pe)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof de)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof ye)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(t){return e.toValue(t)})}};throw S("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=t.transform_type,r=null;if(on(t,n,"setToServerValue"))m("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),r=pe.instance;else if(on(t,n,"appendMissingElements")){var i=t.appendMissingElements.values||[];r=new de(i.map(function(t){return e.fromValue(t)}))}else if(on(t,n,"removeAllFromArray")){i=t.removeAllFromArray.values||[];r=new ye(i.map(function(t){return e.fromValue(t)}))}else S("Unknown transform proto: "+JSON.stringify(t));var o=ut.fromServerFormat(t.fieldPath);return new oe(o,r)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;m(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return Vt.atPath(this.fromQueryPath(n))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}};if(t.path.isEmpty())e.parent=this.toQueryPath(at.EMPTY_PATH);else{var n=t.path;m(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]}var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return void 0!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0;if(0<r){m(1===r,"StructuredQuery.from with more than one collection is not supported.");var i=n.from[0];e=e.child(i.collectionId)}var o=[];n.where&&(o=this.fromFilter(n.where));var a=[];n.orderBy&&(a=this.fromOrder(n.orderBy));var s=null;n.limit&&(s=this.fromInt32Value(n.limit));var u=null;n.startAt&&(u=this.fromCursor(n.startAt));var c=null;return n.endAt&&(c=this.fromCursor(n.endAt)),new Vt(e,a,o,s,u,c)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case Bt.Listen:return null;case Bt.ExistenceFilterMismatch:return"existence-filter-mismatch";case Bt.LimboResolution:return"limbo-document";default:return S("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,0<t.resumeToken.length&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof Kt?e.toRelationFilter(t):e.toUnaryFilter(t)});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromRelationFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):S("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},t.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.fromValue(t)});return new Yt(r,n)},t.prototype.toDirection=function(t){return Je[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return Ht.ASCENDING;case"DESCENDING":return Ht.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return Ze[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return zt.EQUAL;case"GREATER_THAN":return zt.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return zt.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return zt.LESS_THAN;case"LESS_THAN_OR_EQUAL":return zt.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return zt.ARRAY_CONTAINS;case"OPERATOR_UNSPECIFIED":return S("Unspecified relation");default:return S("Unknown relation")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return ut.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new Xt(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.toRelationFilter=function(t){return t instanceof Kt?{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}:S("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromRelationFilter=function(t){return new Kt(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryFilter=function(t){return t instanceof Gt?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}}:t instanceof Qt?{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}:S("Unrecognized filter: "+JSON.stringify(t))},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return new Gt(e);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return new Qt(n);case"OPERATOR_UNSPECIFIED":return S("Unspecified filter");default:return S("Unknown filter")}},t.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map(function(t){return ut.fromServerFormat(t)});return ie.fromArray(e)},t}();function on(t,e,n){return e===n||!e&&n in t}var an="FirebaseError",sn=Error.captureStackTrace,un=function(t,e){if(this.code=t,this.message=e,sn)sn(this,cn.prototype.create);else try{throw Error.apply(this,arguments)}catch(t){this.name=an,Object.defineProperty(this,"stack",{get:function(){return t.stack}})}};un.prototype=Object.create(Error.prototype),(un.prototype.constructor=un).prototype.name=an;var cn=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return t.prototype.create=function(t,r){void 0===r&&(r={});var e,n=this.errors[t],i=this.service+"/"+t;e=void 0===n?"Error":n.replace(this.pattern,function(t,e){var n=r[e];return void 0!==n?n.toString():"<"+e+"?>"}),e=this.serviceName+": "+e+" ("+i+").";var o=new un(i,e);for(var a in r)r.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=r[a]);return o},t}(),ln=(function(n){function t(){var t=n.call(this)||this;t.chain_=[],t.buf_=[],t.W_=[],t.pad_=[],t.inbuf_=0,t.total_=0,t.blockSize=64,t.pad_[0]=128;for(var e=1;e<t.blockSize;++e)t.pad_[e]=0;return t.reset(),t}p.__extends(t,n),t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++){a=r<40?r<20?(o=l^u&(c^l),1518500249):(o=u^c^l,1859775393):r<60?(o=u&c|l&(u|c),2400959708):(o=u^c^l,3395469782);i=(s<<5|s>>>27)+o+f+a+n[r]&4294967295;f=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0==o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}(function(){this.blockSize=-1}),function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){m(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){m(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){m(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){m(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){m(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){m(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}()),fn="Connection",hn={BatchGetDocuments:"batchGet",Commit:"commit"},pn="gl-js/ fire/"+a,dn=function(){function t(t){this.databaseId=t.databaseId,this.pool=new f.XhrIoPool;var e=t.ssl?"https":"http";this.baseUrl=e+"://"+t.host}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=pn},t.prototype.invokeRPC=function(o,a,s){var u=this,c=this.makeUrl(o);return new Promise(function(r,i){u.pool.getObject(function(n){n.listenOnce(f.EventType.COMPLETE,function(){try{switch(n.getLastErrorCode()){case f.ErrorCode.NO_ERROR:var t=n.getResponseJson();y(fn,"XHR received:",JSON.stringify(t)),r(t);break;case f.ErrorCode.TIMEOUT:y(fn,'RPC "'+o+'" timed out'),i(new b(v.DEADLINE_EXCEEDED,"Request time out"));break;case f.ErrorCode.HTTP_ERROR:var e=n.getStatus();y(fn,'RPC "'+o+'" failed with status:',e,"response text:",n.getResponseText()),0<e?i(new b(function(t){switch(t){case 200:return v.OK;case 400:return v.INVALID_ARGUMENT;case 401:return v.UNAUTHENTICATED;case 403:return v.PERMISSION_DENIED;case 404:return v.NOT_FOUND;case 409:return v.ABORTED;case 416:return v.OUT_OF_RANGE;case 429:return v.RESOURCE_EXHAUSTED;case 499:return v.CANCELLED;case 500:return v.UNKNOWN;case 501:return v.UNIMPLEMENTED;case 503:return v.UNAVAILABLE;case 504:return v.DEADLINE_EXCEEDED;default:return 200<=t&&t<300?v.OK:400<=t&&t<500?v.FAILED_PRECONDITION:500<=t&&t<600?v.INTERNAL:v.UNKNOWN}}(e),"Server responded with status "+n.getStatusText())):(y(fn,'RPC "'+o+'" failed'),i(new b(v.UNAVAILABLE,"Connection failed.")));break;default:S('RPC "'+o+'" failed with unanticipated webchannel error '+n.getLastErrorCode()+": "+n.getLastError()+", giving up.")}}finally{y(fn,'RPC "'+o+'" completed.'),u.pool.releaseObject(n)}});var t=JSON.stringify(a);y(fn,"XHR sending: ",c+" "+t);var e={"Content-Type":"text/plain"};u.modifyHeadersForRequest(e,s),n.send(c,"POST",t,e,15)})})},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1beta1.Firestore","/",t,"/channel"],r=f.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0};this.modifyHeadersForRequest(i.initMessageHeaders,e),"object"==typeof navigator&&"ReactNative"===navigator.product||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");y(fn,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),s=!1,u=!1,c=new ln({sendFn:function(t){u?y(fn,"Not sending because WebChannel is closed:",t):(s||(y(fn,"Opening WebChannel transport."),a.open(),s=!0),y(fn,"WebChannel sending:",t),a.send(t))},closeFn:function(){return a.close()}}),l=function(t,e){a.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})};return l(f.WebChannel.EventType.OPEN,function(){u||y(fn,"WebChannel transport opened.")}),l(f.WebChannel.EventType.CLOSE,function(){u||(u=!0,y(fn,"WebChannel transport closed"),c.callOnClose())}),l(f.WebChannel.EventType.ERROR,function(t){u||(u=!0,y(fn,"WebChannel transport errored:",t),c.callOnClose(new b(v.UNAVAILABLE,"The operation could not be completed")))}),l(f.WebChannel.EventType.MESSAGE,function(t){if(!u){var e=t.data[0];m(!!e,"Got a webchannel message without data.");var n=e.error||e[0]&&e[0].error;if(n){y(fn,"WebChannel received error:",n);var r=n.status,i=function(t){var e=ge[t];if(void 0!==e)return Se(e)}(r),o=n.message;void 0===i&&(i=v.INTERNAL,o="Unknown error status: "+r+" with message "+n.message),u=!0,c.callOnClose(new b(i,o)),a.close()}else y(fn,"WebChannel received:",e),c.callOnMessage(e)}}),setTimeout(function(){c.callOnOpen()},0),c},t.prototype.makeUrl=function(t){var e=hn[t];m(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/","v1beta1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},t}(),yn=function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new dn(t))},t.prototype.newSerializer=function(t){return new rn(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}();l.setPlatform(new yn);var mn,gn,vn=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),bn=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})};(gn=mn||(mn={})).All="all",gn.ListenStreamIdle="listen_stream_idle",gn.ListenStreamConnectionBackoff="listen_stream_connection_backoff",gn.WriteStreamIdle="write_stream_idle",gn.WriteStreamConnectionBackoff="write_stream_connection_backoff",gn.OnlineStateTimeout="online_state_timeout",gn.ClientMetadataRefresh="client_metadata_refresh",gn.LruGarbageCollection="lru_garbage_collection";var wn=function(){function a(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return a.createAndSchedule=function(t,e,n,r,i){var o=new a(t,e,Date.now()+n,r,i);return o.start(n),o},a.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},a.prototype.skipDelay=function(){return this.handleDelayElapsed()},a.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new b(v.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},a.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},a.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},a}(),Sn=function(){function t(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueue=function(t){var n=this;this.verifyNotFailed();var e=this.tail.then(function(){return n.operationInProgress=!0,t().catch(function(t){n.failure=t,n.operationInProgress=!1;var e=t.stack||t.message||"";throw u("INTERNAL UNHANDLED ERROR: ",e),e.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return n.operationInProgress=!1,t})});return this.tail=e},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),m(0<=e,"Attempted to schedule an operation with a negative delay of "+e),m(!this.containsDelayedOperation(t),"Attempted to schedule multiple operations with timer id "+t+".");var i=wn.createAndSchedule(this,t,e,n,function(t){return r.removeDelayedOperation(t)});return this.delayedOperations.push(i),i},t.prototype.verifyNotFailed=function(){this.failure&&S("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){m(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},t.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++){if(n[e].timerId===t)return!0}return!1},t.prototype.runDelayedOperationsEarly=function(r){var i=this;return this.drain().then(function(){m(r===mn.All||i.containsDelayedOperation(r),"Attempted to drain to missing operation "+r),i.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var t=0,e=i.delayedOperations;t<e.length;t++){var n=e[t];if(n.skipDelay(),r!==mn.All&&n.timerId===r)break}return i.drain()})},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);m(0<=e,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}(),En="",Tn="",_n="",Cn="";function In(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=Dn(e)),e=kn(t.get(n),e);return Dn(e)}function kn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=En+_n;break;case En:n+=En+Cn;break;default:n+=o}}return n}function Dn(t){return t+En+Tn}function Nn(t){var e=t.length;if(m(2<=e,"Invalid path "+t),2===e)return m(t.charAt(0)===En&&t.charAt(1)===Tn,"Non-empty path "+t+" had length 2"),at.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf(En,o);switch((a<0||n<a)&&S('Invalid encoded resource path: "'+t+'"'),t.charAt(a+1)){case Tn:var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case _n:i+=t.substring(o,a),i+="\0";break;case Cn:i+=t.substring(o,a+1);break;default:S('Invalid encoded resource path: "'+t+'"')}o=a+2}return new at(r)}var xn,An,On=function(){function t(t,e,n){this.batchId=t,this.localWriteTime=e,m(0<(this.mutations=n).length,"Cannot create an empty mutation batch")}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&m(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;m(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var a=r[i];e=o.applyToRemoteDocument(e,a)}}return e},t.prototype.applyToLocalView=function(t,e){e&&m(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=e,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t)&&(e=i.applyToLocalView(e,n,this.localWriteTime))}return e},t.prototype.keys=function(){for(var t=Ne(),e=0,n=this.mutations;e<n.length;e++){var r=n[e];t=t.add(r.key)}return t},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Q(this.mutations,t.mutations)},t}(),Pn=function(){function s(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return s.from=function(t,e,n,r){m(t.mutations.length===n.length,"Mutations sent "+t.mutations.length+" must equal results received "+n.length);for(var i=ke(),o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,n[a].version);return new s(t,e,n,r,i)},s}();(An=xn||(xn={}))[An.QueryCache=0]="QueryCache",An[An.SyncEngine=1]="SyncEngine";var Rn=function(){function t(t,e){m((1&(this.generatorId=t))===t,"Generator ID "+t+" contains more than 1 reserved bits"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=2,t},t.prototype.after=function(t){return this.seek(t+2),this.next()},t.prototype.seek=function(t){m((1&t)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},t.forQueryCache=function(){return new t(xn.QueryCache,2)},t.forSyncEngine=function(){return new t(xn.SyncEngine)},t}(),Mn=function(){function a(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return a.prototype.catch=function(t){return this.next(void 0,t)},a.prototype.next=function(r,i){var o=this;return this.callbackAttached&&S("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(r,this.result):new a(function(e,n){o.nextCallback=function(t){o.wrapSuccess(r,t).next(e,n)},o.catchCallback=function(t){o.wrapFailure(i,t).next(e,n)}})},a.prototype.toPromise=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},a.prototype.wrapUserFunction=function(t){try{var e=t();return e instanceof a?e:a.resolve(e)}catch(t){return a.reject(t)}},a.prototype.wrapSuccess=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):a.resolve(e)},a.prototype.wrapFailure=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):a.reject(e)},a.resolve=function(n){return new a(function(t,e){t(n)})},a.reject=function(n){return new a(function(t,e){e(n)})},a.waitFor=function(t){return new a(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},a.or=function(t){for(var n=a.resolve(!1),e=function(e){n=n.next(function(t){return t?a.resolve(t):e()})},r=0,i=t;r<i.length;r++){e(i[r])}return n},a.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.waitFor(i)},a}(),Ln="SimpleDb",Fn=function(){function a(t){this.db=t}return a.openOrCreate=function(i,t,o){return m(a.isAvailable(),"IndexedDB not supported in current environment."),y(Ln,"Opening database:",i),new Mn(function(n,e){var r=window.indexedDB.open(i,t);r.onsuccess=function(t){var e=t.target.result;n(new a(e))},r.onblocked=function(){e(new b(v.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(t){e(t.target.error)},r.onupgradeneeded=function(t){y(Ln,'Database "'+i+'" requires upgrade from version:',t.oldVersion);var e=t.target.result,n=new qn(r.transaction);o.createOrUpgrade(e,n,t.oldVersion,rr).next(function(){y(Ln,"Database upgrade to version "+rr+" complete")})}}).toPromise()},a.delete=function(t){return y(Ln,"Removing database:",t),jn(window.indexedDB.deleteDatabase(t)).toPromise()},a.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===i.env.USE_MOCK_PERSISTENCE;var t=window.navigator.userAgent;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/"))},a.getStore=function(t,e){return t.store(e)},a.prototype.runTransaction=function(t,e,n){var r=qn.open(this.db,t,e),i=n(r).catch(function(t){r.abort(t)}).toPromise();return r.completionPromise.then(function(){return i})},a.prototype.close=function(){this.db.close()},a}(),Un=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return jn(this.dbCursor.delete())},t}(),qn=function(){function r(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new bn,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){e.completionDeferred.reject(t.target.error)}}return r.open=function(t,e,n){return new r(t.transaction(n,e))},Object.defineProperty(r.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),r.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(y(Ln,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},r.prototype.store=function(t){var e=this.transaction.objectStore(t);return m(!!e,"Object store not part of transaction: "+t),new Bn(e)},r}(),Bn=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){return jn(void 0!==e?(y(Ln,"PUT",this.store.name,t,e),this.store.put(e,t)):(y(Ln,"PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},t.prototype.add=function(t){return y(Ln,"ADD",this.store.name,t,t),jn(this.store.add(t))},t.prototype.get=function(e){var n=this;return jn(this.store.get(e)).next(function(t){return void 0===t&&(t=null),y(Ln,"GET",n.store.name,e,t),t})},t.prototype.delete=function(t){return y(Ln,"DELETE",this.store.name,t),jn(this.store.delete(t))},t.prototype.count=function(){return y(Ln,"COUNT",this.store.name),jn(this.store.count())},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.deleteAll=function(t,e){y(Ln,"DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(t,e,n){return n.delete()})},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateSerial=function(r){var t=this.cursor({});return new Mn(function(n,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e=t.target.result;e?r(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},t.prototype.iterateCursor=function(t,a){var s=[];return new Mn(function(o,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e=t.target.result;if(e){var n=new Un(e),r=a(e.primaryKey,e.value,n);if(r instanceof Mn){var i=r.catch(function(t){return n.done(),Mn.reject(t)});s.push(i)}n.isDone?o():null===n.skipToKey?e.continue():e.continue(n.skipToKey)}else o()}}).next(function(){return Mn.waitFor(s)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(m(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function jn(t){return new Mn(function(n,e){t.onsuccess=function(t){var e=t.target.result;n(e)},t.onerror=function(t){e(t.target.error)}})}var Vn=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=Rn.forQueryCache()}return t.prototype.allocateTargetId=function(e){var n=this;return this.retrieveMetadata(e).next(function(t){return t.highestTargetId=n.targetIdGenerator.after(t.highestTargetId),n.saveMetadata(e,t).next(function(){return t.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next(function(t){return Zt.fromTimestamp(new nt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return Kn(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(e,n,r){var i=this;return this.retrieveMetadata(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.toTimestamp()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.saveMetadata(e,t)})},t.prototype.addQueryData=function(e,n){var r=this;return this.saveQueryData(e,n).next(function(){return r.retrieveMetadata(e).next(function(t){return t.targetCount+=1,r.updateMetadataFromQueryData(n,t),r.saveMetadata(e,t)})})},t.prototype.updateQueryData=function(t,e){return this.saveQueryData(t,e)},t.prototype.removeQueryData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return Wn(e).delete(t.targetId)}).next(function(){return n.retrieveMetadata(e)}).next(function(t){return m(0<t.targetCount,"Removing from an empty query cache"),t.targetCount-=1,n.saveMetadata(e,t)})},t.prototype.removeTargets=function(r,i,o){var a=this,s=0,u=[];return Wn(r).iterate(function(t,e){var n=a.serializer.fromDbTarget(e);n.sequenceNumber<=i&&void 0===o[n.targetId]&&(s++,u.push(a.removeQueryData(r,n)))}).next(function(){return Mn.waitFor(u)}).next(function(){return s})},t.prototype.forEachTarget=function(t,r){var i=this;return Wn(t).iterate(function(t,e){var n=i.serializer.fromDbTarget(e);r(n)})},t.prototype.retrieveMetadata=function(t){return zn(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return(n=t,qr.getStore(n,mr.store)).put(mr.key,e);var n},t.prototype.saveQueryData=function(t,e){return Wn(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromQueryData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getQueryCount=function(t){return this.retrieveMetadata(t).next(function(t){return t.targetCount})},t.prototype.getQueryData=function(t,i){var o=this,e=i.canonicalId(),n=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),a=null;return Wn(t).iterate({range:n,index:dr.queryTargetsIndexName},function(t,e,n){var r=o.serializer.fromDbTarget(e);i.isEqual(r.query)&&(a=r,n.done())}).next(function(){return a})},t.prototype.addMatchingKeys=function(n,t,r){var i=this,o=[],a=Qn(n);return t.forEach(function(t){var e=In(t.path);o.push(a.put(new yr(r,e))),o.push(i.referenceDelegate.addReference(n,t))}),Mn.waitFor(o)},t.prototype.removeMatchingKeys=function(n,t,r){var i=this,o=Qn(n);return Mn.forEach(t,function(t){var e=In(t.path);return Mn.waitFor([o.delete([r,e]),i.referenceDelegate.removeReference(n,t)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Qn(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Qn(t),o=Ne();return r.iterate({range:n,keysOnly:!0},function(t,e,n){var r=Nn(t[1]),i=new ct(r);o=o.add(i)}).next(function(){return o})},t.prototype.containsKey=function(t,e){var n,r=In(e.path),i=IDBKeyRange.bound([r],[(n=r,n+"\0")],!1,!0),o=0;return Qn(t).iterate({index:yr.documentTargetsIndex,keysOnly:!0,range:i},function(t,e,n){var r=t[0];t[1];0!==r&&(o++,n.done())}).next(function(){return 0<o})},t.prototype.getQueryDataForTarget=function(t,e){var n=this;return Wn(t).get(e).next(function(t){return t?n.serializer.fromDbTarget(t):null})},t}();function Wn(t){return qr.getStore(t,dr.store)}function zn(t){return Fn.getStore(t,mr.store).get(mr.key).next(function(t){return m(null!==t,"Missing metadata row."),t})}function Kn(t){return zn(t).next(function(t){return t.highestListenSequenceNumber})}function Qn(t){return qr.getStore(t,yr.store)}var Gn=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(s){C(this.inner,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],a=i[1];s(o,a)}})},t.prototype.isEmpty=function(){return I(this.inner)},t}(),Hn=function(){function t(){this.changes=Te(),this.documentSizes=new Gn(function(t){return t.toString()})}return t.prototype.addEntry=function(t){var e=this.assertChanges();this.changes=e.insert(t.key,t)},t.prototype.getEntry=function(t,e){var n=this,r=this.assertChanges().get(e);return r?Mn.resolve(r):this.getFromCache(t,e).next(function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)})},t.prototype.apply=function(t){var e=this.applyChanges(t);return this.changes=null,e},t.prototype.assertChanges=function(){return m(null!==this.changes,"Changes have already been applied."),this.changes},t}(),Yn="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",Xn=function(){function t(t,e){this.serializer=t,this.keepDocumentChangeLog=e,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(t.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),t.prototype.start=function(t){var e=Fn.getStore(t,vr.store);return this.synchronizeLastDocumentChangeId(e)},t.prototype.addEntries=function(t,e,n){var r=[];if(0<e.length){for(var i=Zn(t),o=Ne(),a=0,s=e;a<s.length;a++){var u=s[a],c=u.key,l=u.doc;r.push(i.put(er(c),l)),o=o.add(c)}this.keepDocumentChangeLog&&r.push(tr(t).put({changes:this.serializer.toDbResourcePaths(o)})),r.push(this.updateSize(t,n))}return Mn.waitFor(r)},t.prototype.removeEntry=function(t,e){var n=Zn(t),r=er(e);return n.get(r).next(function(t){return t?n.delete(r).next(function(){return nr(t)}):Mn.resolve(0)})},t.prototype.getEntry=function(t,e){var n=this;return Zn(t).get(er(e)).next(function(t){return t?n.serializer.fromDbRemoteDocument(t):null})},t.prototype.getSizedEntry=function(t,e){var n=this;return Zn(t).get(er(e)).next(function(t){return t?{maybeDocument:n.serializer.fromDbRemoteDocument(t),size:nr(t)}:null})},t.prototype.getDocumentsMatchingQuery=function(t,i){var o=this,a=Ce(),e=i.path.toArray(),n=IDBKeyRange.lowerBound(e);return Zn(t).iterate({range:n},function(t,e,n){var r=o.serializer.fromDbRemoteDocument(e);i.path.isPrefixOf(r.key.path)?r instanceof ft&&i.matches(r)&&(a=a.insert(r.key,r)):n.done()}).next(function(){return a})},t.prototype.getNewDocumentChanges=function(e){var r=this;m(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=Ne(),i=Te(),t=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,a=tr(e);return a.iterate({range:t},function(t,e){if(o&&(o=!1,r._lastProcessedDocumentChangeId+1!==e.id))return r.synchronizeLastDocumentChangeId(a).next(function(){return Mn.reject(new b(v.DATA_LOSS,Yn))});n=n.unionWith(r.serializer.fromDbResourcePaths(e.changes)),r._lastProcessedDocumentChangeId=e.id}).next(function(){var t=[];return n.forEach(function(n){t.push(r.getEntry(e,n).next(function(t){var e=t||new ht(n,Zt.forDeletedDoc());i=i.insert(n,e)}))}),Mn.waitFor(t)}).next(function(){return i})},t.prototype.removeDocumentChangesThroughChangeId=function(t,e){var n=IDBKeyRange.upperBound(e);return tr(t).delete(n)},t.prototype.synchronizeLastDocumentChangeId=function(t){var r=this;return this._lastProcessedDocumentChangeId=0,t.iterate({keysOnly:!0,reverse:!0},function(t,e,n){r._lastProcessedDocumentChangeId=t,n.done()})},t.prototype.newChangeBuffer=function(){return new Jn(this)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return $n(t).get(pr.key).next(function(t){return m(!!t,"Missing document cache metadata"),t})},t.prototype.setMetadata=function(t,e){return $n(t).put(pr.key,e)},t.prototype.updateSize=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.setMetadata(e,t)})},t}();function $n(t){return qr.getStore(t,pr.store)}var Jn=function(n){function t(t){var e=n.call(this)||this;return e.documentCache=t,e}return p.__extends(t,n),t.prototype.applyChanges=function(t){var o=this,e=this.assertChanges(),a=0,s=[];return e.forEach(function(t,e){var n=o.documentCache.serializer.toDbRemoteDocument(e),r=o.documentSizes.get(t);m(void 0!==r,"Attempting to change document "+t.toString()+" without having read it first");var i=nr(n);a+=i-r,s.push({key:t,doc:n})}),this.documentCache.addEntries(t,s,a)},t.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},t}(Hn);function Zn(t){return qr.getStore(t,hr.store)}function tr(t){return qr.getStore(t,vr.store)}function er(t){return t.path.toArray()}function nr(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw S("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var rr=7,ir=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,n,e,r){var i,o=this;m(e<r&&0<=e&&r<=rr,"Unexpected schema upgrade from v"+e+" to v{toVersion}."),e<1&&1<=r&&(t.createObjectStore(ar.store),(i=t).createObjectStore(sr.store,{keyPath:sr.keyPath}),i.createObjectStore(ur.store,{keyPath:ur.keyPath,autoIncrement:!0}).createIndex(ur.userMutationsIndex,ur.userMutationsKeyPath,{unique:!0}),i.createObjectStore(cr.store),gr(t),t.createObjectStore(hr.store));var a,s=Mn.resolve();return e<3&&3<=r&&(0!==e&&((a=t).deleteObjectStore(yr.store),a.deleteObjectStore(dr.store),a.deleteObjectStore(mr.store),gr(t)),s=s.next(function(){return t=n.store(mr.store),e=new mr(0,0,Zt.MIN.toTimestamp(),0),t.put(mr.key,e);var t,e})),e<4&&4<=r&&(0!==e&&(s=s.next(function(){return i=t,(o=n).store(ur.store).loadAll().next(function(t){i.deleteObjectStore(ur.store);var e=i.createObjectStore(ur.store,{keyPath:ur.keyPath,autoIncrement:!0});e.createIndex(ur.userMutationsIndex,ur.userMutationsKeyPath,{unique:!0});var n=o.store(ur.store),r=t.map(function(t){return n.put(t)});return Mn.waitFor(r)});var i,o})),s=s.next(function(){t.createObjectStore(br.store,{keyPath:br.keyPath}),t.createObjectStore(vr.store,{keyPath:"id",autoIncrement:!0})})),e<5&&5<=r&&(s=s.next(function(){return o.removeAcknowledgedMutations(n)})),e<6&&6<=r&&(s=s.next(function(){return t.createObjectStore(pr.store),o.addDocumentGlobal(n)})),e<7&&7<=r&&(s=s.next(function(){return o.ensureSequenceNumbers(n)})),s},t.prototype.addDocumentGlobal=function(e){var n=0;return e.store(hr.store).iterate(function(t,e){n+=nr(e)}).next(function(){var t=new pr(n);return e.store(pr.store).put(pr.key,t)})},t.prototype.removeAcknowledgedMutations=function(r){var i=this,t=r.store(sr.store),e=r.store(ur.store);return t.loadAll().next(function(t){return Mn.forEach(t,function(n){var t=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return e.loadAll(ur.userMutationsIndex,t).next(function(t){return Mn.forEach(t,function(t){m(t.userId===n.userId,"Cannot process batch "+t.batchId+" from unexpected user");var e=i.serializer.fromDbMutationBatch(t);return Tr(r,n.userId,e).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(t){var a=t.store(yr.store),e=t.store(hr.store);return Kn(t).next(function(i){var o=[];return e.iterate(function(t,e){var n=new at(t),r=[0,In(n)];o.push(a.get(r).next(function(t){return t?Mn.resolve():(e=n,a.put(new yr(0,In(e),i)));var e}))}).next(function(){return Mn.waitFor(o)})})},t}();var or=function(t,e){this.seconds=t,this.nanoseconds=e},ar=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}();var sr=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),ur=function(){function t(t,e,n,r){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.mutations=r}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}();var cr=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,In(e)]},t.key=function(t,e,n){return[t,In(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}();var lr=function(t,e){this.path=t,this.readTime=e},fr=function(t,e){this.path=t,this.version=e},hr=function(){function t(t,e,n,r){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r}return t.store="remoteDocuments",t}(),pr=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}();var dr=function(){function t(t,e,n,r,i,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),yr=function(){function t(t,e,n){this.targetId=t,this.path=e,m(0===t==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),mr=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}();function gr(t){t.createObjectStore(yr.store,{keyPath:yr.keyPath}).createIndex(yr.documentTargetsIndex,yr.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(dr.store,{keyPath:dr.keyPath}).createIndex(dr.queryTargetsIndexName,dr.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(mr.store)}var vr=function(){function t(t){this.changes=t}return t.store="remoteDocumentChanges",t.keyPath="id",t}();var br=function(){function t(t,e,n,r,i){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return t.store="clientMetadata",t.keyPath="clientId",t}();var wr=[sr.store,ur.store,cr.store,hr.store,dr.store,ar.store,mr.store,yr.store].concat([br.store,vr.store]).concat([pr.store]),Sr=function(){function r(t,e,n){this.userId=t,this.serializer=e,this.referenceDelegate=n,this.documentKeysByBatchId={}}return r.forUser=function(t,e,n){return m(""!==t.uid,"UserID must not be an empty string."),new r(t.isAuthenticated()?t.uid:"",e,n)},r.prototype.checkEmpty=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cr(t).iterate({index:ur.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},r.prototype.acknowledgeBatch=function(n,r,i){return this.getMutationQueueMetadata(n).next(function(t){var e=r.batchId;return m(e>t.lastAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order"),t.lastAcknowledgedBatchId=e,t.lastStreamToken=_r(i),kr(n).put(t)})},r.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next(function(t){return t.lastStreamToken})},r.prototype.setLastStreamToken=function(e,n){return this.getMutationQueueMetadata(e).next(function(t){return t.lastStreamToken=_r(n),kr(e).put(t)})},r.prototype.addMutationBatch=function(t,u,c){var l=this,f=Ir(t),h=Cr(t);return h.add({}).next(function(t){m("number"==typeof t,"Auto-generated key is not a number");var e=new On(t,u,c),n=l.serializer.toDbMutationBatch(l.userId,e);l.documentKeysByBatchId[t]=e.keys();for(var r=[],i=0,o=c;i<o.length;i++){var a=o[i],s=cr.key(l.userId,a.key.path,t);r.push(h.put(n)),r.push(f.put(s,cr.PLACEHOLDER))}return Mn.waitFor(r).next(function(){return e})})},r.prototype.lookupMutationBatch=function(t,e){var n=this;return Cr(t).get(e).next(function(t){return t?(m(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null})},r.prototype.lookupMutationKeys=function(t,n){var r=this;return this.documentKeysByBatchId[n]?Mn.resolve(this.documentKeysByBatchId[n]):this.lookupMutationBatch(t,n).next(function(t){if(t){var e=t.keys();return r.documentKeysByBatchId[n]=e}return null})},r.prototype.getNextMutationBatchAfterBatchId=function(n,o){var a=this;return this.getMutationQueueMetadata(n).next(function(t){var r=Math.max(o,t.lastAcknowledgedBatchId)+1,e=IDBKeyRange.lowerBound([a.userId,r]),i=null;return Cr(n).iterate({index:ur.userMutationsIndex,range:e},function(t,e,n){e.userId===a.userId&&(m(e.batchId>=r,"Should have found mutation after "+r),i=a.serializer.fromDbMutationBatch(e)),n.done()}).next(function(){return i})})},r.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Cr(t).loadAll(ur.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},r.prototype.getAllMutationBatchesAffectingDocumentKey=function(s,u){var c=this,t=cr.prefixForPath(this.userId,u.path),e=IDBKeyRange.lowerBound(t),l=[];return Ir(s).iterate({range:e},function(e,t,n){var r=e[0],i=e[1],o=e[2],a=Nn(i);if(r===c.userId&&u.path.isEqual(a))return Cr(s).get(o).next(function(t){if(!t)throw S("Dangling document-mutation reference found: "+e+" which points to "+o);m(t.userId===c.userId,"Unexpected user '"+t.userId+"' for mutation batch "+o),l.push(c.serializer.fromDbMutationBatch(t))});n.done()}).next(function(){return l})},r.prototype.getAllMutationBatchesAffectingDocumentKeys=function(r,t){var u=this,c=new re(K),i=[];return t.forEach(function(s){var t=cr.prefixForPath(u.userId,s.path),e=IDBKeyRange.lowerBound(t),n=Ir(r).iterate({range:e},function(t,e,n){var r=t[0],i=t[1],o=t[2],a=Nn(i);r===u.userId&&s.path.isEqual(a)?c=c.add(o):n.done()});i.push(n)}),Mn.waitFor(i).next(function(){return u.lookupMutationBatches(r,c)})},r.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var s=this;m(!e.isDocumentQuery(),"Document queries shouldn't go down this path");var u=e.path,c=u.length+1,n=cr.prefixForPath(this.userId,u),r=IDBKeyRange.lowerBound(n),l=new re(K);return Ir(t).iterate({range:r},function(t,e,n){var r=t[0],i=t[1],o=t[2],a=Nn(i);r===s.userId&&u.isPrefixOf(a)?a.length===c&&(l=l.add(o)):n.done()}).next(function(){return s.lookupMutationBatches(t,l)})},r.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Cr(t).get(e).next(function(t){if(null===t)throw S("Dangling document-mutation reference found, which points to "+e);m(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))}))}),Mn.waitFor(i).next(function(){return r})},r.prototype.removeMutationBatch=function(e,n){var r=this;return Tr(e.simpleDbTransaction,this.userId,n).next(function(t){return r.removeCachedMutationKeys(n.batchId),Mn.forEach(t,function(t){return r.referenceDelegate.removeMutationReference(e,t)})})},r.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},r.prototype.performConsistencyCheck=function(n){var o=this;return this.checkEmpty(n).next(function(t){if(!t)return Mn.resolve();var e=IDBKeyRange.lowerBound(cr.prefixForUser(o.userId)),i=[];return Ir(n).iterate({range:e},function(t,e,n){if(t[0]===o.userId){var r=Nn(t[1]);i.push(r)}else n.done()}).next(function(){m(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.canonicalString()}))})})},r.prototype.containsKey=function(t,e){return Er(t,this.userId,e)},r.prototype.getMutationQueueMetadata=function(t){var e=this;return kr(t).get(this.userId).next(function(t){return t||new sr(e.userId,-1,"")})},r}();function Er(t,o,e){var n=cr.prefixForPath(o,e.path),a=n[1],r=IDBKeyRange.lowerBound(n),s=!1;return Ir(t).iterate({range:r,keysOnly:!0},function(t,e,n){var r=t[0],i=t[1];t[2];r===o&&i===a&&(s=!0),n.done()}).next(function(){return s})}function Tr(t,e,n){var r=t.store(ur.store),i=t.store(cr.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},function(t,e,n){return s++,n.delete()});o.push(u.next(function(){m(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],l=0,f=n.mutations;l<f.length;l++){var h=f[l],p=cr.key(e,h.key.path,n.batchId);o.push(i.delete(p)),c.push(h.key)}return Mn.waitFor(o).next(function(){return c})}function _r(t){return t instanceof Uint8Array?(m("YES"===i.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function Cr(t){return qr.getStore(t,ur.store)}function Ir(t){return qr.getStore(t,cr.store)}function kr(t){return qr.getStore(t,sr.store)}var Dr=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=ct.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new ht(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){e=ct.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version);return new pt(e,n)}return S("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t){if(t instanceof ft){var e=this.remoteSerializer.toDocument(t),n=t.hasCommittedMutations;return new hr(null,null,e,n)}if(t instanceof ht){var r=t.key.path.toArray(),i=this.toDbTimestamp(t.version);n=t.hasCommittedMutations;return new hr(null,new lr(r,i),null,n)}if(t instanceof pt){r=t.key.path.toArray(),i=this.toDbTimestamp(t.version);return new hr(new fr(r,i),null,null,!0)}return S("Unexpected MaybeDocumment")},t.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new or(e.seconds,e.nanoseconds)},t.prototype.fromDbTimestamp=function(t){var e=new nt(t.seconds,t.nanoseconds);return Zt.fromTimestamp(e)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new ur(t,e.batchId,e.localWriteTime.toMillis(),r)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),r=nt.fromMillis(t.localWriteTimeMs);return new On(t.batchId,r,n)},t.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach(function(t){e.push(In(t.path))}),e},t.prototype.fromDbResourcePaths=function(t){for(var e=Ne(),n=0,r=t;n<r.length;n++){var i=r[n];e=e.add(new ct(Nn(i)))}return e},t.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime);return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new ne(e,t.targetId,Bt.Listen,t.lastListenSequenceNumber,n,t.resumeToken)},t.prototype.toDbTarget=function(t){m(Bt.Listen===t.purpose,"Only queries with purpose "+Bt.Listen+" may be stored, got "+t.purpose);var e,n,r=this.toDbTimestamp(t.snapshotVersion);return e=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query),n=t.resumeToken instanceof Uint8Array?(m("YES"===i.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),t.resumeToken.toString()):t.resumeToken,new dr(t.targetId,t.query.canonicalId(),r,n,t.sequenceNumber,e)},t}();function Nr(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=K(n,i);return 0===a?K(r,o):a}var xr=function(){function t(t){this.maxElements=t,this.buffer=new re(Nr),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Nr(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),Ar={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Or=function(){function e(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),Pr=function(){function t(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.gcTask=null}return t.prototype.start=function(){m(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Eo&&this.scheduleGC()},t.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},t.prototype.scheduleGC=function(){var t=this;m(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?3e5:6e4;y("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(mn.LruGarbageCollection,e,function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then(function(){return t.scheduleGC()})})},t}(),Rr=function(){function t(t,e){this.delegate=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Mn.resolve(vn.INVALID);var r=new xr(e);return this.delegate.forEachTarget(t,function(t){return r.addElement(t.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,function(t){return r.addElement(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t.prototype.collect=function(e,n){var r=this;return this.params.cacheSizeCollectionThreshold===Or.COLLECTION_DISABLED?(y("LruGarbageCollector","Garbage collection skipped; disabled"),Mn.resolve(Ar)):this.getCacheSize(e).next(function(t){return t<r.params.cacheSizeCollectionThreshold?(y("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),Ar):r.runGarbageCollection(e,n)})},t.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},t.prototype.runGarbageCollection=function(e,n){var r,i,o,a,s,u,c,l,f=this;return a=Date.now(),this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return i=t>f.params.maximumSequenceNumbersToCollect?(y("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+f.params.maximumSequenceNumbersToCollect+" from "+t),f.params.maximumSequenceNumbersToCollect):t,s=Date.now(),f.nthSequenceNumber(e,i)}).next(function(t){return r=t,u=Date.now(),f.removeTargets(e,r,n)}).next(function(t){return o=t,c=Date.now(),f.removeOrphanedDocuments(e,r)}).next(function(t){(l=Date.now(),d()<=h.DEBUG)&&y("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-a)+"ms\n\tDetermined least recently used "+i+" in "+(u-s)+"ms\n\tRemoved "+o+" targets in "+(c-u)+"ms\n\tRemoved "+t+" documents in "+(l-c)+"ms\nTotal Duration: "+(l-a)+"ms");return Mn.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:t})})},t}(),Mr="IndexedDbPersistence",Lr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Fr="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `experimentalTabSynchronization:true` in all tabs.",Ur=function(r){function t(t,e){var n=r.call(this)||this;return n.simpleDbTransaction=t,n.currentSequenceNumber=e,n}return p.__extends(t,r),t}(function(){}),qr=function(){function c(t,e,n,r,i,o,a){if(this.persistenceKey=t,this.clientId=e,this.queue=r,this.multiClientParams=a,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.inForeground=!1,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},!c.isAvailable())throw new b(v.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");if(this.referenceDelegate=new Wr(this,o),this.dbName=t+c.MAIN_DATABASE,this.serializer=new Dr(i),this.document=n.document,this.allowTabSynchronization=void 0!==a,this.queryCache=new Vn(this.referenceDelegate,this.serializer),this.remoteDocumentCache=new Xn(this.serializer,this.allowTabSynchronization),!n.window||!n.window.localStorage)throw new b(v.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=n.window,this.webStorage=this.window.localStorage}return c.getStore=function(t,e){if(t instanceof Ur)return Fn.getStore(t.simpleDbTransaction,e);throw S("IndexedDbPersistence must use instances of IndexedDbTransaction")},c.createIndexedDbPersistence=function(n,r,i,o,a,s){return p.__awaiter(this,void 0,void 0,function(){var e;return p.__generator(this,function(t){switch(t.label){case 0:return[4,(e=new c(n,r,i,o,a,s)).start()];case 1:return t.sent(),[2,e]}})})},c.createMultiClientIndexedDbPersistence=function(n,r,i,o,a,s,u){return p.__awaiter(this,void 0,void 0,function(){var e;return p.__generator(this,function(t){switch(t.label){case 0:return[4,(e=new c(n,r,i,o,a,s,u)).start()];case 1:return t.sent(),[2,e]}})})},c.prototype.start=function(){var n=this;return m(!this.started,"IndexedDbPersistence double-started!"),m(null!==this.window,"Expected 'window' to be defined"),Fn.openOrCreate(this.dbName,rr,new ir(this.serializer)).then(function(t){n.simpleDb=t}).then(function(){return n.startRemoteDocumentCache()}).then(function(){return n.attachVisibilityHandler(),n.attachWindowUnloadHook(),n.updateClientMetadataAndTryBecomePrimary().then(function(){return n.scheduleClientMetadataAndPrimaryLeaseRefreshes()})}).then(function(){return n.simpleDb.runTransaction("readonly",[mr.store],function(t){return Kn(t).next(function(t){var e=n.multiClientParams?n.multiClientParams.sequenceNumberSyncer:void 0;n.listenSequence=new vn(t,e)})})}).then(function(){n._started=!0}).catch(function(t){return n.simpleDb&&n.simpleDb.close(),Promise.reject(t)})},c.prototype.startRemoteDocumentCache=function(){var e=this;return this.simpleDb.runTransaction("readonly",wr,function(t){return e.remoteDocumentCache.start(t)})},c.prototype.setPrimaryStateListener=function(n){var t=this;return this.primaryStateListener=function(e){return p.__awaiter(t,void 0,void 0,function(){return p.__generator(this,function(t){return this.started?[2,n(e)]:[2]})})},n(this.isPrimary)},c.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget(function(){return p.__awaiter(e,void 0,void 0,function(){return p.__generator(this,function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},c.prototype.updateClientMetadataAndTryBecomePrimary=function(){var r=this;return this.simpleDb.runTransaction("readwrite",wr,function(n){return Vr(n).put(new br(r.clientId,Date.now(),r.networkEnabled,r.inForeground,r.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(r.isPrimary)return r.verifyPrimaryLease(n).next(function(t){t||(r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}))})}).next(function(){return r.canActAsPrimary(n)}).next(function(t){var e=r.isPrimary;return r.isPrimary=t,e!==r.isPrimary&&r.queue.enqueueAndForget(function(){return r.primaryStateListener(r.isPrimary)}),e&&!r.isPrimary?r.releasePrimaryLeaseIfHeld(n):r.isPrimary?r.acquireOrExtendPrimaryLease(n):void 0})})},c.prototype.verifyPrimaryLease=function(t){var e=this;return jr(t).get(ar.key).next(function(t){return Mn.resolve(e.isLocalClient(t))})},c.prototype.removeClientMetadata=function(t){return Vr(t).delete(this.clientId)},c.prototype.maybeGarbageCollectMultiClientState=function(){return p.__awaiter(this,void 0,void 0,function(){var r,i,o=this;return p.__generator(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),i=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(n){var e=c.getStore(n,br.store);return e.loadAll().next(function(t){r=o.filterActiveClients(t,18e5),i=t.filter(function(t){return-1===r.indexOf(t)})}).next(function(){return Mn.forEach(i,function(t){return e.delete(t.clientId)})}).next(function(){if(0<(r=r.filter(function(t){return t.clientId!==o.clientId})).length){var t=r.map(function(t){return t.lastProcessedDocumentChangeId||0}),e=Math.min.apply(Math,t);return o.remoteDocumentCache.removeDocumentChangesThroughChangeId(n,e)}})})]);case 1:t.sent(),i.forEach(function(t){o.window.localStorage.removeItem(o.zombiedClientLocalStorageKey(t.clientId))}),t.label=2;case 2:return[2]}})})},c.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(mn.ClientMetadataRefresh,4e3,function(){return t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.maybeGarbageCollectMultiClientState()}).then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},c.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},c.prototype.canActAsPrimary=function(e){var i=this;return jr(e).get(ar.key).next(function(t){if(null!==t&&i.isWithinAge(t.leaseTimestampMs,5e3)&&!i.isClientZombied(t.ownerId)){if(i.isLocalClient(t)&&i.networkEnabled)return!0;if(!i.isLocalClient(t)){if(!t.allowTabSynchronization)throw new b(v.FAILED_PRECONDITION,Fr);return!1}}return!(!i.networkEnabled||!i.inForeground)||Vr(e).loadAll().next(function(t){return void 0===i.filterActiveClients(t,5e3).find(function(t){if(i.clientId!==t.clientId){var e=!i.networkEnabled&&t.networkEnabled,n=!i.inForeground&&t.inForeground,r=i.networkEnabled===t.networkEnabled;if(e||n&&r)return!0}return!1})})}).next(function(t){return i.isPrimary!==t&&y(Mr,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},c.prototype.shutdown=function(n){return p.__awaiter(this,void 0,void 0,function(){var e=this;return p.__generator(this,function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&this.clientMetadataRefresher.cancel(),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[ar.store,br.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),n?[4,Fn.delete(this.dbName)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},c.prototype.filterActiveClients=function(t,e){var n=this;return t.filter(function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)})},c.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly",[br.store],function(t){return Vr(t).loadAll().next(function(t){return e.filterActiveClients(t,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(c.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),c.prototype.getMutationQueue=function(t){return m(this.started,"Cannot initialize MutationQueue before persistence is started."),Sr.forUser(t,this.serializer,this.referenceDelegate)},c.prototype.getQueryCache=function(){return m(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},c.prototype.getRemoteDocumentCache=function(){return m(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},c.prototype.runTransaction=function(n,t,r){var i=this;return y(Mr,"Starting transaction:",n),this.simpleDb.runTransaction("readonly"===t?"readonly":"readwrite",wr,function(e){return"readwrite-primary"===t?i.verifyPrimaryLease(e).next(function(t){if(!t)throw u("Failed to obtain primary lease for action '"+n+"'."),i.isPrimary=!1,i.queue.enqueueAndForget(function(){return i.primaryStateListener(!1)}),new b(v.FAILED_PRECONDITION,Lr);return r(new Ur(e,i.listenSequence.next()))}).next(function(t){return i.acquireOrExtendPrimaryLease(e).next(function(){return t})}):i.verifyAllowTabSynchronization(e).next(function(){return r(new Ur(e,i.listenSequence.next()))})})},c.prototype.verifyAllowTabSynchronization=function(t){var e=this;return jr(t).get(ar.key).next(function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new b(v.FAILED_PRECONDITION,Fr)})},c.prototype.acquireOrExtendPrimaryLease=function(t){var e=new ar(this.clientId,this.allowTabSynchronization,Date.now());return jr(t).put(ar.key,e)},c.isAvailable=function(){return Fn.isAvailable()},c.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},c.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=jr(t);return n.get(ar.key).next(function(t){return e.isLocalClient(t)?(y(Mr,"Releasing primary lease."),n.delete(ar.key)):Mn.resolve()})},c.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e)&&(!(n<t)||(u("Detected an update time that is in the future: "+t+" > "+n),!1))},c.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},c.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(m(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},c.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},c.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(m("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},c.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return y(Mr,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return u(Mr,"Failed to get zombied client id.",t),!1}},c.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){u("Failed to set zombie client id.",t)}},c.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},c.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},c.MAIN_DATABASE="main",c}();function Br(t){return t.code===v.FAILED_PRECONDITION&&t.message===Lr}function jr(t){return t.store(ar.store)}function Vr(t){return t.store(br.store)}var Wr=function(){function t(t,e){this.db=t,this.garbageCollector=new Rr(this,e)}return t.prototype.getSequenceNumberCount=function(t){var n=this.orphanedDocmentCount(t);return this.db.getQueryCache().getQueryCount(t).next(function(e){return n.next(function(t){return e+t})})},t.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getQueryCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,n){return this.forEachOrphanedDocument(t,function(t,e){return n(e)})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return zr(t,e)},t.prototype.removeReference=function(t,e){return zr(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getQueryCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return zr(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?Mn.resolve(!0):(r=e,i=!1,kr(n=t).iterateSerial(function(t){return Er(n,t,r).next(function(t){return t&&(i=!0),Mn.resolve(!t)})}).next(function(){return i}));var n,r,i},t.prototype.removeOrphanedDocuments=function(r,i){var o=this,a=0,s=0,u=[];return this.forEachOrphanedDocument(r,function(e,t){if(t<=i){var n=o.isPinned(r,e).next(function(t){if(!t)return a++,o.removeOrphanedDocument(r,e).next(function(t){s+=t})});u.push(n)}}).next(function(){return Mn.waitFor(u)}).next(function(){return o.db.getRemoteDocumentCache().updateSize(r,-s)}).next(function(){return a})},t.prototype.removeOrphanedDocument=function(t,e){var n,r=0,i=this.db.getRemoteDocumentCache();return Mn.waitFor([Qn(t).delete((n=e,[0,In(n.path)])),i.removeEntry(t,e).next(function(t){r+=t})]).next(function(){return r})},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(t,n)},t.prototype.updateLimboDocument=function(t,e){return zr(t,e)},t.prototype.forEachOrphanedDocument=function(t,o){var a,e=Qn(t),s=vn.INVALID;return e.iterate({index:yr.documentTargetsIndex},function(t,e){var n=t[0],r=(t[1],e.path),i=e.sequenceNumber;0===n?(s!==vn.INVALID&&o(new ct(Nn(a)),s),s=i,a=r):s=vn.INVALID}).next(function(){s!==vn.INVALID&&o(new ct(Nn(a)),s)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function zr(t,e){return Qn(t).put((n=e,r=t.currentSequenceNumber,new yr(0,In(n.path),r)));var n,r}var Kr=function(){function t(t,e){this.remoteDocumentCache=t,this.mutationQueue=e}return t.prototype.getDocument=function(e,n){var r=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,n).next(function(t){return r.getDocumentInternal(e,n,t)})},t.prototype.getDocumentInternal=function(t,r,i){return this.remoteDocumentCache.getEntry(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++){t=n[e].applyToLocalView(r,t)}return t})},t.prototype.getDocuments=function(i,e){var o=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(i,e).next(function(t){var n=[],r=Te();return e.forEach(function(e){n.push(o.getDocumentInternal(i,e,t).next(function(t){t||(t=new ht(e,Zt.forDeletedDoc())),r=r.insert(e,t)}))}),Mn.waitFor(n).next(function(){return r})})},t.prototype.getDocumentsMatchingQuery=function(t,e){return ct.isDocumentKey(e.path)?this.getDocumentsMatchingDocumentQuery(t,e.path):this.getDocumentsMatchingCollectionQuery(t,e)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new ct(e)).next(function(t){var e=Ce();return t instanceof ft&&(e=e.insert(t.key,t)),e})},t.prototype.getDocumentsMatchingCollectionQuery=function(e,l){var f,n=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,l).next(function(t){return f=t,n.mutationQueue.getAllMutationBatchesAffectingQuery(e,l)}).next(function(t){for(var e=0,n=t;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var a=o[i],s=a.key;if(l.path.isImmediateParentOf(s.path)){var u=f.get(s),c=a.applyToLocalView(u,u,r.localWriteTime);f=c instanceof ft?f.insert(s,c):f.remove(s)}}}).next(function(){return f.forEach(function(t,e){l.matches(e)||(f=f.remove(t))}),f})},t}(),Qr=function(){function t(){this.refsByKey=new re(Gr.compareByKey),this.refsByTarget=new re(Gr.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new Gr(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.removeRef(new Gr(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.removeReferencesForId=function(t){var e=this,n=ct.EMPTY,r=new Gr(n,t),i=new Gr(n,t+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(t){e.removeRef(t),o.push(t.key)}),o},t.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach(function(t){return e.removeRef(t)})},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=ct.EMPTY,n=new Gr(e,t),r=new Gr(e,t+1),i=Ne();return this.refsByTarget.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Gr(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Gr=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return ct.comparator(t.key,e.key)||K(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return K(t.targetOrBatchId,e.targetOrBatchId)||ct.comparator(t.key,e.key)},t}(),Hr=function(){function l(t,e){this.persistence=t,this.localViewReferences=new Qr,this.queryDataByTarget={},m(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(e),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new Kr(this.remoteDocuments,this.mutationQueue)}return l.prototype.handleUserChange=function(e){var m=this;return this.persistence.runTransaction("Handle user change","readonly",function(d){var y;return m.mutationQueue.getAllMutationBatches(d).next(function(t){return y=t,m.mutationQueue=m.persistence.getMutationQueue(e),m.localDocuments=new Kr(m.remoteDocuments,m.mutationQueue),m.mutationQueue.getAllMutationBatches(d)}).next(function(t){for(var e=[],n=[],r=Ne(),i=0,o=y;i<o.length;i++){var a=o[i];e.push(a.batchId);for(var s=0,u=a.mutations;s<u.length;s++){var c=u[s];r=r.add(c.key)}}for(var l=0,f=t;l<f.length;l++){a=f[l];n.push(a.batchId);for(var h=0,p=a.mutations;h<p.length;h++){c=p[h];r=r.add(c.key)}}return m.localDocuments.getDocuments(d,r).next(function(t){return{affectedDocuments:t,removedBatchIds:e,addedBatchIds:n}})})})},l.prototype.localWrite=function(e){var i=this;return this.persistence.runTransaction("Locally write mutations","readwrite",function(n){var r,t=nt.now();return i.mutationQueue.addMutationBatch(n,t,e).next(function(t){var e=(r=t).keys();return i.localDocuments.getDocuments(n,e)}).next(function(t){return{batchId:r.batchId,changes:t}})})},l.prototype.lookupMutationDocuments=function(t){var n=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return n.mutationQueue.lookupMutationKeys(e,t).next(function(t){return t?n.localDocuments.getDocuments(e,t):Mn.resolve(null)})})},l.prototype.acknowledgeBatch=function(r){var i=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e=r.batch.keys(),n=i.remoteDocuments.newChangeBuffer();return i.mutationQueue.acknowledgeBatch(t,r.batch,r.streamToken).next(function(){return i.applyWriteToRemoteDocuments(t,r,n)}).next(function(){return n.apply(t)}).next(function(){return i.mutationQueue.performConsistencyCheck(t)}).next(function(){return i.localDocuments.getDocuments(t,e)})})},l.prototype.rejectBatch=function(t){var r=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return r.mutationQueue.lookupMutationBatch(e,t).next(function(t){return m(null!==t,"Attempt to reject nonexistent batch!"),n=t.keys(),r.mutationQueue.removeMutationBatch(e,t)}).next(function(){return r.mutationQueue.performConsistencyCheck(e)}).next(function(){return r.localDocuments.getDocuments(e,n)})})},l.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly",function(t){return e.mutationQueue.getLastStreamToken(t)})},l.prototype.setLastStreamToken=function(e){var n=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(t){return n.mutationQueue.setLastStreamToken(t,e)})},l.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.queryCache.getLastRemoteSnapshotVersion(t)})},l.prototype.applyRemoteEvent=function(u){var c=this,r=this.remoteDocuments.newChangeBuffer();return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var a=[],s=Ne();_(u.targetChanges,function(t,e){var n=c.queryDataByTarget[t];if(n){e.addedDocuments.forEach(function(t){s=s.add(t)}),e.modifiedDocuments.forEach(function(t){s=s.add(t)}),a.push(c.queryCache.removeMatchingKeys(o,e.removedDocuments,t).next(function(){return c.queryCache.addMatchingKeys(o,e.addedDocuments,t)}));var r=e.resumeToken;if(0<r.length){var i=n;n=n.copy({resumeToken:r,snapshotVersion:u.snapshotVersion}),c.queryDataByTarget[t]=n,l.shouldPersistQueryData(i,n,e)&&a.push(c.queryCache.updateQueryData(o,n))}}});var t=Ne();u.documentUpdates.forEach(function(e,n){t=t.add(e),a.push(r.getEntry(o,e).next(function(t){null==t||n.version.isEqual(Zt.MIN)||s.has(n.key)&&!t.hasPendingWrites||0<=n.version.compareTo(t.version)?r.addEntry(n):y("LocalStore","Ignoring outdated watch update for ",e,". Current version:",t.version," Watch version:",n.version)})),u.resolvedLimboDocuments.has(e)&&a.push(c.persistence.referenceDelegate.updateLimboDocument(o,e))});var e=u.snapshotVersion;if(!e.isEqual(Zt.MIN)){var n=c.queryCache.getLastRemoteSnapshotVersion(o).next(function(t){return m(0<=e.compareTo(t),"Watch stream reverted to previous snapshot?? "+e+" < "+t),c.queryCache.setTargetsMetadata(o,o.currentSequenceNumber,e)});a.push(n)}return Mn.waitFor(a).next(function(){return r.apply(o)}).next(function(){return c.localDocuments.getDocuments(o,t)})})},l.shouldPersistQueryData=function(t,e,n){return 0!==e.resumeToken.length&&(0===t.resumeToken.length||(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||0<n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size))},l.prototype.notifyLocalViewChanges=function(t){var n=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(e){return Mn.forEach(t,function(t){return n.localViewReferences.addReferences(t.addedKeys,t.targetId),n.localViewReferences.removeReferences(t.removedKeys,t.targetId),Mn.forEach(t.removedKeys,function(t){return n.persistence.referenceDelegate.removeReference(e,t)})})})},l.prototype.nextMutationBatch=function(e){var n=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e)})},l.prototype.readDocument=function(e){var n=this;return this.persistence.runTransaction("read document","readonly",function(t){return n.localDocuments.getDocument(t,e)})},l.prototype.allocateQuery=function(r){var i=this;return this.persistence.runTransaction("Allocate query","readwrite",function(e){var n;return i.queryCache.getQueryData(e,r).next(function(t){return t?(n=t,Mn.resolve()):i.queryCache.allocateTargetId(e).next(function(t){return n=new ne(r,t,Bt.Listen,e.currentSequenceNumber),i.queryCache.addQueryData(e,n)})}).next(function(){return m(!i.queryDataByTarget[n.targetId],"Tried to allocate an already allocated query: "+r),i.queryDataByTarget[n.targetId]=n})})},l.prototype.releaseQuery=function(o,a){var s=this,t=a?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",t,function(i){return s.queryCache.getQueryData(i,o).next(function(t){m(null!=t,"Tried to release nonexistent query: "+o);var e=t.targetId,n=s.queryDataByTarget[e],r=s.localViewReferences.removeReferencesForId(e);return delete s.queryDataByTarget[e],a?Mn.resolve():Mn.forEach(r,function(t){return s.persistence.referenceDelegate.removeReference(i,t)}).next(function(){return s.persistence.referenceDelegate.removeTarget(i,n)})})})},l.prototype.executeQuery=function(e){var n=this;return this.persistence.runTransaction("Execute query","readonly",function(t){return n.localDocuments.getDocumentsMatchingQuery(t,e)})},l.prototype.remoteDocumentKeys=function(e){var n=this;return this.persistence.runTransaction("Remote document keys","readonly",function(t){return n.queryCache.getMatchingKeysForTargetId(t,e)})},l.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},l.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},l.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},l.prototype.applyWriteToRemoteDocuments=function(t,i,o){var e=this,a=i.batch,n=a.keys(),s=Mn.resolve();return n.forEach(function(r){s=s.next(function(){return o.getEntry(t,r)}).next(function(t){var e=t,n=i.docVersions.get(r);m(null!==n,"ackVersions should contain every doc in the write."),(!e||e.version.compareTo(n)<0)&&((e=a.applyToRemoteDocument(r,e,i))?o.addEntry(e):m(!t,"Mutation batch "+a+" applied to document "+t+" resulted in null"))})}),s.next(function(){return e.mutationQueue.removeMutationBatch(t,a)})},l.prototype.collectGarbage=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.collect(t,n.queryDataByTarget)})},l.prototype.getQueryForTarget=function(e){var n=this;return this.queryDataByTarget[e]?Promise.resolve(this.queryDataByTarget[e].query):this.persistence.runTransaction("Get query data","readonly",function(t){return n.queryCache.getQueryDataForTarget(t,e).next(function(t){return t?t.query:null})})},l.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly",function(t){return e.remoteDocuments.getNewDocumentChanges(t)})},l.RESUME_TOKEN_MAX_AGE_MICROS=3e8,l}(),Yr=function(){function t(t){this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.highestAcknowledgedBatchId=-1,this.lastStreamToken=g(),this.batchesByDocumentKey=new re(Gr.compareByKey)}return t.prototype.checkEmpty=function(t){return Mn.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId;m(r>this.highestAcknowledgedBatchId,"Mutation batchIDs must be acknowledged in order");var i=this.indexOfExistingBatchId(r,"acknowledged");m(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return m(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.highestAcknowledgedBatchId=r,this.lastStreamToken=n,Mn.resolve()},t.prototype.getLastStreamToken=function(t){return Mn.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,Mn.resolve()},t.prototype.addMutationBatch=function(t,e,n){m(0!==n.length,"Mutation batches should not be empty");var r=this.nextBatchId;(this.nextBatchId++,0<this.mutationQueue.length)&&m(this.mutationQueue[this.mutationQueue.length-1].batchId<r,"Mutation batchIDs must be monotonically increasing order");var i=new On(r,e,n);this.mutationQueue.push(i);for(var o=0,a=n;o<a.length;o++){var s=a[o];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Gr(s.key,r))}return Mn.resolve(i)},t.prototype.lookupMutationBatch=function(t,e){return Mn.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return m(null!=n,"Failed to find local mutation batch."),Mn.resolve(n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=Math.max(e,this.highestAcknowledgedBatchId)+1,r=this.indexOfBatchId(n),i=r<0?0:r;return Mn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},t.prototype.getAllMutationBatches=function(t){return Mn.resolve(this.mutationQueue.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,e=new Gr(n,0),i=new Gr(n,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([e,i],function(t){m(n.isEqual(t.key),"Should only iterate over a single key's batches");var e=r.findMutationBatch(t.targetOrBatchId);m(null!==e,"Batches in the index must exist in the main table"),o.push(e)}),Mn.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var r=this,i=new re(K);return e.forEach(function(e){var t=new Gr(e,0),n=new Gr(e,Number.POSITIVE_INFINITY);r.batchesByDocumentKey.forEachInRange([t,n],function(t){m(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),i=i.add(t.targetOrBatchId)})}),Mn.resolve(this.findMutationBatches(i))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ct.isDocumentKey(i)||(i=i.child(""));var o=new Gr(new ct(i),0),a=new re(K);return this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.targetOrBatchId)),!0)},o),Mn.resolve(this.findMutationBatches(a))},t.prototype.findMutationBatches=function(t){var n=this,r=[];return t.forEach(function(t){var e=n.findMutationBatch(t);null!==e&&r.push(e)}),r},t.prototype.removeMutationBatch=function(n,r){var i=this;m(0===this.indexOfExistingBatchId(r.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var o=this.batchesByDocumentKey;return Mn.forEach(r.mutations,function(t){var e=new Gr(t.key,r.batchId);return o=o.delete(e),i.referenceDelegate.removeMutationReference(n,t.key)}).next(function(){i.batchesByDocumentKey=o})},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new Gr(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Mn.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&m(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Mn.resolve()},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return m(0<=n&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return m(n.batchId===t,"If found batch must match"),n},t}(),Xr=function(){function t(t){this.persistence=t,this.queries=new Gn(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=Zt.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Qr,this.targetCount=0,this.targetIdGenerator=Rn.forQueryCache()}return t.prototype.getTargetCount=function(t){return Mn.resolve(this.targetCount)},t.prototype.forEachTarget=function(t,n){return this.queries.forEach(function(t,e){return n(e)}),Mn.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Mn.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Mn.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,Mn.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),Mn.resolve()},t.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addQueryData=function(t,e){return m(!this.queries.has(e.query),"Adding a query that already exists"),this.saveQueryData(e),this.targetCount+=1,Mn.resolve()},t.prototype.updateQueryData=function(t,e){return m(this.queries.has(e.query),"Updating a non-existent query"),this.saveQueryData(e),Mn.resolve()},t.prototype.removeQueryData=function(t,e){return m(0<this.targetCount,"Removing a target from an empty cache"),m(this.queries.has(e.query),"Removing a non-existent target from the cache"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,Mn.resolve()},t.prototype.removeTargets=function(n,r,i){var o=this,a=0,s=[];return this.queries.forEach(function(t,e){e.sequenceNumber<=r&&!i[e.targetId]&&(o.queries.delete(t),s.push(o.removeMatchingKeysForTargetId(n,e.targetId)),a++)}),Mn.waitFor(s).next(function(){return a})},t.prototype.getQueryCount=function(t){return Mn.resolve(this.targetCount)},t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return Mn.resolve(n)},t.prototype.getQueryDataForTarget=function(t,e){return S("Not yet implemented.")},t.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.addReference(e,t))}),Mn.waitFor(i)},t.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.removeReference(e,t))}),Mn.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),Mn.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return Mn.resolve(n)},t.prototype.containsKey=function(t,e){return Mn.resolve(this.references.containsKey(e))},t}();var $r,Jr,Zr=function(){function t(t){this.sizer=t,this.docs=new dt(ct.comparator),this.newDocumentChanges=Ne(),this.size=0}return t.prototype.addEntries=function(t,e,n){for(var r=0,i=e;r<i.length;r++){var o=i[r],a=o.maybeDocument.key;this.docs=this.docs.insert(a,o),this.newDocumentChanges=this.newDocumentChanges.add(a)}return this.size+=n,Mn.resolve()},t.prototype.removeEntry=function(t,e){var n=this.docs.get(e);return n?(this.docs=this.docs.remove(e),this.size-=n.size,Mn.resolve(n.size)):Mn.resolve(0)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Mn.resolve(n?n.maybeDocument:null)},t.prototype.getSizedEntry=function(t,e){return Mn.resolve(this.docs.get(e))},t.prototype.getDocumentsMatchingQuery=function(t,e){for(var n=Ce(),r=new ct(e.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),a=o.key,s=o.value.maybeDocument;if(!e.path.isPrefixOf(a.path))break;s instanceof ft&&e.matches(s)&&(n=n.insert(s.key,s))}return Mn.resolve(n)},t.prototype.forEachDocumentKey=function(t,e){return Mn.forEach(this.docs,function(t){return e(t)})},t.prototype.getNewDocumentChanges=function(t){var r=this,i=Te();return this.newDocumentChanges.forEach(function(t){var e=r.docs.get(t),n=e?e.maybeDocument:new ht(t,Zt.forDeletedDoc());i=i.insert(t,n)}),this.newDocumentChanges=Ne(),Mn.resolve(i)},t.prototype.newChangeBuffer=function(){return new ti(this.sizer,this)},t.prototype.getSize=function(t){return Mn.resolve(this.size)},t}(),ti=function(r){function t(t,e){var n=r.call(this)||this;return n.sizer=t,n.documentCache=e,n}return p.__extends(t,r),t.prototype.applyChanges=function(t){var i=this,e=this.assertChanges(),o=0,a=[];return e.forEach(function(t,e){var n=i.documentSizes.get(t);m(void 0!==n,"Attempting to change document "+t.toString()+" without having read it first");var r=i.sizer(e);o+=r-n,a.push({maybeDocument:e,size:r})}),this.documentCache.addEntries(t,a,o)},t.prototype.getFromCache=function(t,e){return this.documentCache.getSizedEntry(t,e)},t}(Hn),ei=function(){function r(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new vn(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.queryCache=new Xr(this);this.remoteDocumentCache=new Zr(function(t){return n.referenceDelegate.documentSize(t)})}return r.createLruPersistence=function(t,e,n){return new r(t,function(t){return new ii(t,new Dr(e),n)})},r.createEagerPersistence=function(t){return new r(t,function(t){return new ri(t)})},r.prototype.shutdown=function(t){return this._started=!1,Promise.resolve()},Object.defineProperty(r.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),r.prototype.getActiveClients=function(){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(t){return[2,[this.clientId]]})})},r.prototype.setPrimaryStateListener=function(t){return t(!0)},r.prototype.setNetworkEnabled=function(t){},r.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new Yr(this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},r.prototype.getQueryCache=function(){return this.queryCache},r.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},r.prototype.runTransaction=function(t,e,n){var r=this;y("MemoryPersistence","Starting transaction:",t);var i=new ni(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(t){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return t})}).toPromise()},r.prototype.mutationQueuesContainKey=function(e,n){return Mn.or((t=this.mutationQueues,r=[],C(t,function(t,e){return r.push(e)}),r).map(function(t){return function(){return t.containsKey(e,n)}}));var t,r},r}(),ni=function(t){this.currentSequenceNumber=t},ri=function(){function t(t){this.persistence=t}return t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),Mn.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),Mn.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),Mn.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.orphanedDocuments.add(t)})}).next(function(){return r.removeQueryData(t,e)})},t.prototype.onTransactionStarted=function(){this.orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(n){var t=this,r=this.persistence.getRemoteDocumentCache();return Mn.forEach(this.orphanedDocuments,function(e){return t.isReferenced(n,e).next(function(t){return t?Mn.resolve():r.removeEntry(n,e).next(function(){})})})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next(function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)})},t.prototype.documentSize=function(t){return 0},t.prototype.isReferenced=function(t,e){var n=this;return Mn.or([function(){return n.persistence.getQueryCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return Mn.resolve(n.inMemoryPins.containsKey(e))}])},t}(),ii=function(){function t(t,e,n){this.persistence=t,this.serializer=e,this.orphanedSequenceNumbers=new Gn(function(t){return In(t.path)}),this.garbageCollector=new Rr(this,n)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return Mn.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getQueryCache().forEachTarget(t,e)},t.prototype.getSequenceNumberCount=function(t){var n=this.orphanedDocumentCount(t);return this.persistence.getQueryCache().getTargetCount(t).next(function(e){return n.next(function(t){return e+t})})},t.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},t.prototype.forEachOrphanedDocumentSequenceNumber=function(n,r){var i=this;return Mn.forEach(this.orphanedSequenceNumbers,function(t,e){return i.isPinned(n,t,e).next(function(t){return t?Mn.resolve():r(e)})})},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getQueryCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(n,t){var r=this,i=0,o=this.persistence.getRemoteDocumentCache();return o.forEachDocumentKey(n,function(e){return r.isPinned(n,e,t).next(function(t){return t?Mn.resolve():(i++,o.removeEntry(n,e).next())})}).next(function(){return i})},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Mn.resolve()},t.prototype.removeTarget=function(t,e){var n=e.copy({sequenceNumber:t.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Mn.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Mn.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Mn.resolve()},t.prototype.documentSize=function(t){var e,n=this.serializer.toDbRemoteDocument(t);if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw S("Unknown remote document type");e=n.noDocument}return JSON.stringify(e).length},t.prototype.isPinned=function(t,e,n){var r=this;return Mn.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return Mn.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getQueryCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return Mn.resolve(void 0!==t&&n<t)}])},t.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},t}(),oi=function(){function t(t,e,n,r,i){this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);0<this.currentBaseMs&&y("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return e.lastAttemptTime=Date.now(),t()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}(),ai="PersistentStream";(Jr=$r||($r={}))[Jr.Initial=0]="Initial",Jr[Jr.Starting=1]="Starting",Jr[Jr.Open=2]="Open",Jr[Jr.Error=3]="Error",Jr[Jr.Backoff=4]="Backoff";var si,ui,ci,li,fi=function(){function t(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=$r.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new oi(t,e,1e3,1.5,6e4)}return t.prototype.isStarted=function(){return this.state===$r.Starting||this.state===$r.Open||this.state===$r.Backoff},t.prototype.isOpen=function(){return this.state===$r.Open},t.prototype.start=function(){this.state!==$r.Error?(m(this.state===$r.Initial,"Already started"),this.auth()):this.performBackoff()},t.prototype.stop=function(){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close($r.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.inhibitBackoff=function(){m(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=$r.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return t.handleIdleCloseTimer()}))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(t){return this.isOpen()?[2,this.close($r.Initial)]:[2]})})},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(e,n){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(t){switch(t.label){case 0:return m(this.isStarted(),"Only started streams should be closed."),m(e===$r.Error||Ut(n),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==$r.Error?this.backoff.reset():n&&n.code===v.RESOURCE_EXHAUSTED?(u(n.toString()),u("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):n&&n.code===v.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(n)];case 1:return t.sent(),[2]}})})},t.prototype.tearDown=function(){},t.prototype.auth=function(){var n=this;m(this.state===$r.Initial,"Must be in initial state to auth"),this.state=$r.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),e=this.closeCount;this.credentialsProvider.getToken().then(function(t){n.closeCount===e&&n.startStream(t)},function(e){t(function(){var t=new b(v.UNKNOWN,"Fetching auth token failed: "+e.message);return n.handleStreamClose(t)})})},t.prototype.startStream=function(t){var e=this;m(this.state===$r.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen(function(){n(function(){return m(e.state===$r.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=$r.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.performBackoff=function(){var t=this;m(this.state===$r.Error,"Should only perform backoff when in Error state"),this.state=$r.Backoff,this.backoff.backoffAndRun(function(){return p.__awaiter(t,void 0,void 0,function(){return p.__generator(this,function(t){return m(this.state===$r.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=$r.Initial,this.start(),m(this.isStarted(),"PersistentStream should have started"),[2]})})})},t.prototype.handleStreamClose=function(t){return m(this.isStarted(),"Can't handle server close on non-started stream"),y(ai,"close with error: "+t),this.stream=null,this.close($r.Error,t)},t.prototype.getCloseGuardedDispatcher=function(e){var n=this;return function(t){n.queue.enqueueAndForget(function(){return n.closeCount===e?t():(y(ai,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),hi=function(a){function t(t,e,n,r,i){var o=a.call(this,t,mn.ListenStreamConnectionBackoff,mn.ListenStreamIdle,e,n,i)||this;return o.serializer=r,o}return p.__extends(t,a),t.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},t.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},t.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},t.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},t}(fi),pi=function(a){function t(t,e,n,r,i){var o=a.call(this,t,mn.WriteStreamConnectionBackoff,mn.WriteStreamIdle,e,n,i)||this;return o.serializer=r,o.handshakeComplete_=!1,o}return p.__extends(t,a),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,a.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},t.prototype.onMessage=function(t){if(m(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return m(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){m(this.isOpen(),"Writing handshake requires an opened stream"),m(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},t.prototype.writeMutations=function(t){var e=this;m(this.isOpen(),"Writing mutations requires an opened stream"),m(this.handshakeComplete_,"Handshake must be complete before writing mutations"),m(0<this.lastStreamToken.length,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})};this.sendRequest(n)},t}(fi),di=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(t){return new pi(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new hi(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",n).then(function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)})},t.prototype.lookup=function(e){var i=this,t={database:this.serializer.encodedDatabaseId,documents:e.map(function(t){return i.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",t).then(function(t){var n=Te();t.forEach(function(t){var e=i.serializer.fromMaybeDocument(t);n=n.insert(e.key,e)});var r=[];return e.forEach(function(t){var e=n.get(t);m(!!e,"Missing entity in write response for "+t),r.push(e)}),r})},t.prototype.invokeRPC=function(e,n){var r=this;return this.credentials.getToken().then(function(t){return r.connection.invokeRPC(e,n,t)}).catch(function(t){throw t.code===v.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},t.prototype.invokeStreamingRPC=function(e,n){var r=this;return this.credentials.getToken().then(function(t){return r.connection.invokeStreamingRPC(e,n,t)}).catch(function(t){throw t.code===v.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},t}(),yi=function(){function t(t){this.datastore=t,this.readVersions=ke(),this.mutations=[],this.committed=!1}return t.prototype.recordVersion=function(t){var e;if(t instanceof ft)e=t.version;else{if(!(t instanceof ht))throw S("Document in a transaction was a "+t.constructor.name);e=Zt.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new b(v.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.lookup=function(t){var e=this;return this.committed?Promise.reject("Transaction has already completed."):0<this.mutations.length?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(t).then(function(t){return t.forEach(function(t){t instanceof ht||t instanceof ft?e.recordVersion(t):S("Document in a transaction was a "+t.constructor.name)}),t})},t.prototype.write=function(t){if(this.committed)throw new b(v.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(t)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return e?se.updateTime(e):se.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(e&&e.isEqual(Zt.forDeletedDoc()))throw new b(v.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return e?se.updateTime(e):se.exists(!0)},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t)))},t.prototype.update=function(t,e){this.write(e.toMutations(t,this.preconditionForUpdate(t)))},t.prototype.delete=function(t){this.write([new he(t,this.precondition(t))]),this.readVersions=this.readVersions.insert(t,Zt.forDeletedDoc())},t.prototype.commit=function(){var t=this,e=this.readVersions;return this.mutations.forEach(function(t){e=e.remove(t.key)}),e.isEmpty()?this.datastore.commit(this.mutations).then(function(){t.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},t}();(ui=si||(si={}))[ui.Unknown=0]="Unknown",ui[ui.Online=1]="Online",ui[ui.Offline=2]="Offline",(li=ci||(ci={}))[li.RemoteStore=0]="RemoteStore",li[li.SharedClientState=1]="SharedClientState";var mi=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=si.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(si.Unknown),m(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(mn.OnlineStateTimeout,1e4,function(){return t.onlineStateTimer=null,m(t.state===si.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(si.Offline),Promise.resolve()}))},t.prototype.handleWatchStreamFailure=function(t){this.state===si.Online?(this.setAndBroadcast(si.Unknown),m(0===this.watchStreamFailures,"watchStreamFailures must be 0"),m(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,1<=this.watchStreamFailures&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(si.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===si.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(u(e),this.shouldWarnClientIsOffline=!1):y("OnlineStateTracker",e)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}(),gi="RemoteStore",vi=function(){function t(t,e,n,r){this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.onlineStateTracker=new mi(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return p.__awaiter(this,void 0,void 0,function(){var e;return p.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(si.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.disableNetwork=function(){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(si.Offline),[2]}})})},t.prototype.disableNetworkInternal=function(){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),0<this.writePipeline.length&&(y(gi,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},t.prototype.shutdown=function(){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(t){switch(t.label){case 0:return y(gi,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(si.Unknown),[2]}})})},t.prototype.listen=function(t){m(!E(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){m(E(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),I(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(si.Unknown))},t.prototype.getQueryDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){m(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Ge(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!I(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return p.__awaiter(this,void 0,void 0,function(){var n=this;return p.__generator(this,function(t){return _(this.listenTargets,function(t,e){n.sendWatchRequest(e)}),[2]})})},t.prototype.onWatchStreamClose=function(e){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(t){return void 0===e&&m(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(si.Unknown),[2]})})},t.prototype.onWatchStreamChange=function(n,r){return p.__awaiter(this,void 0,void 0,function(){var e;return p.__generator(this,function(t){switch(t.label){case 0:return this.onlineStateTracker.set(si.Online),n instanceof Ke&&n.state===Fe.Removed&&n.cause?[2,this.handleTargetError(n)]:(n instanceof We?this.watchChangeAggregator.handleDocumentChange(n):n instanceof ze?this.watchChangeAggregator.handleExistenceFilter(n):(m(n instanceof Ke,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(n)),r.isEqual(Zt.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return e=t.sent(),0<=r.compareTo(e)?[4,this.raiseWatchSnapshot(r)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.raiseWatchSnapshot=function(r){var i=this;m(!r.isEqual(Zt.MIN),"Can't raise event for unknown SnapshotVersion");var t=this.watchChangeAggregator.createRemoteEvent(r);return _(t.targetChanges,function(t,e){if(0<e.resumeToken.length){var n=i.listenTargets[t];n&&(i.listenTargets[t]=n.copy({resumeToken:e.resumeToken,snapshotVersion:r}))}}),t.targetMismatches.forEach(function(t){var e=i.listenTargets[t];if(e){i.listenTargets[t]=e.copy({resumeToken:g()}),i.sendUnwatchRequest(t);var n=new ne(e.query,t,Bt.ExistenceFilterMismatch,e.sequenceNumber);i.sendWatchRequest(n)}}),this.syncEngine.applyRemoteEvent(t)},t.prototype.handleTargetError=function(t){var n=this;m(!!t.cause,"Handling target error without a cause");var r=t.cause,i=Promise.resolve();return t.targetIds.forEach(function(e){i=i.then(function(){return p.__awaiter(n,void 0,void 0,function(){return p.__generator(this,function(t){return E(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,r)]):[2]})})})}),i},t.prototype.fillWritePipeline=function(){return p.__awaiter(this,void 0,void 0,function(){var e,n;return p.__generator(this,function(t){switch(t.label){case 0:return this.canAddToWritePipeline()?(e=0<this.writePipeline.length?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(n=t.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(n),[4,this.fillWritePipeline()];case 3:t.sent(),t.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){m(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&0<this.writePipeline.length},t.prototype.startWriteStream=function(){m(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(t){return this.writeStream.writeHandshake(),[2]})})},t.prototype.onWriteHandshakeComplete=function(){var r=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var t=0,e=r.writePipeline;t<e.length;t++){var n=e[t];r.writeStream.writeMutations(n.mutations)}}).catch(function(t){return r.ignoreIfPrimaryLeaseLoss(t)})},t.prototype.ignoreIfPrimaryLeaseLoss=function(t){if(!Br(t))throw t;y(gi,"Unexpectedly lost primary lease")},t.prototype.onMutationResult=function(t,e){var n=this;m(0<this.writePipeline.length,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Pn.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},t.prototype.onWriteStreamClose=function(n){return p.__awaiter(this,void 0,void 0,function(){var e=this;return p.__generator(this,function(t){return void 0===n&&m(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),n&&0<this.writePipeline.length?(void 0,[2,(this.writeStream.handshakeComplete?this.handleWriteError(n):this.handleHandshakeError(n)).then(function(){e.shouldStartWriteStream()&&e.startWriteStream()})]):[2]})})},t.prototype.handleHandshakeError=function(n){return p.__awaiter(this,void 0,void 0,function(){var e=this;return p.__generator(this,function(t){return we(n.code)||n.code===v.ABORTED?(y(gi,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=g(),[2,this.localStore.setLastStreamToken(g()).catch(function(t){return e.ignoreIfPrimaryLeaseLoss(t)})]):[2]})})},t.prototype.handleWriteError=function(r){return p.__awaiter(this,void 0,void 0,function(){var e,n=this;return p.__generator(this,function(t){return we(r.code)?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,r).then(function(){return n.fillWritePipeline()})]):[2]})})},t.prototype.createTransaction=function(){return new yi(this.datastore)},t.prototype.handleCredentialChange=function(){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(y(gi,"RemoteStore restarting streams for new credential"),this.networkEnabled=!1,[4,this.disableNetworkInternal()]):[3,3];case 1:return t.sent(),this.onlineStateTracker.set(si.Unknown),[4,this.enableNetwork()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.applyPrimaryState=function(e){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(t){switch(t.label){case 0:return(this.isPrimary=e)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(si.Unknown),t.label=4;case 4:return[2]}})})},t}(),bi=function(){this.listeners=[]},wi=function(){function t(t){this.syncEngine=t,this.queries=new Gn(function(t){return t.canonicalId()}),this.onlineState=si.Unknown,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new bi,this.queries.set(e,r)),r.listeners.push(t),t.applyOnlineStateChange(this.onlineState),r.viewSnap&&t.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t}):Promise.resolve(r.targetId)},t.prototype.unlisten=function(o){return p.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return p.__generator(this,function(t){return e=o.query,n=!1,(r=this.queries.get(e))&&0<=(i=r.listeners.indexOf(o))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},t.prototype.onWatchChange=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=r.query,o=this.queries.get(i);if(o){for(var a=0,s=o.listeners;a<s.length;a++){s[a].onViewSnapshot(r)}o.viewSnap=r}}},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++){i[r].onError(e)}this.queries.delete(t)},t.prototype.onOnlineStateChange=function(i){this.onlineState=i,this.queries.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++){r[n].applyOnlineStateChange(i)}})},t}(),Si=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.onlineState=si.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(m(0<t.docChanges.length||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==Oe.Metadata&&e.push(i)}t=new Be(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(t)&&this.queryObserver.next(t):this.shouldRaiseInitialEvent(t,this.onlineState)&&this.raiseInitialEvent(t),this.snap=t},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&this.raiseInitialEvent(this.snap)},t.prototype.shouldRaiseInitialEvent=function(t,e){if(m(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var n=e!==si.Offline;return this.options.waitForSyncWhenOnline&&n?(m(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===si.Offline},t.prototype.shouldRaiseEvent=function(t){if(0<t.docChanges.length)return!0;var e=this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){m(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=Be.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),Ei=function(){function s(t,e,n){this.targetId=t,this.addedKeys=e,this.removedKeys=n}return s.fromSnapshot=function(t,e){for(var n=Ne(),r=Ne(),i=0,o=e.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case Oe.Added:n=n.add(a.doc.key);break;case Oe.Removed:r=r.add(a.doc.key)}}return new s(t,n,r)},s}(),Ti=function(t){this.key=t},_i=function(t){this.key=t},Ci=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=Ne(),this.mutatedKeys=Ne(),this.documentSet=new Le(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var s=this,u=e?e.changeSet:new qe,c=e?e.documentSet:this.documentSet,l=e?e.mutatedKeys:this.mutatedKeys,f=c,h=!1,p=this.query.hasLimit()&&c.size===this.query.limit?c.last():null;if(t.inorderTraversal(function(t,e){var n=c.get(t),r=e instanceof ft?e:null;r&&(m(t.isEqual(r.key),"Mismatching keys found in document changes: "+t+" != "+r.key),r=s.query.matches(r)?r:null);var i=!!n&&s.mutatedKeys.has(n.key),o=!!r&&(r.hasLocalMutations||s.mutatedKeys.has(r.key)&&r.hasCommittedMutations),a=!1;n&&r?n.data.isEqual(r.data)?i!==o&&(u.track({type:Oe.Metadata,doc:r}),a=!0):s.shouldWaitForSyncedDocument(n,r)||(u.track({type:Oe.Modified,doc:r}),a=!0,p&&0<s.query.docComparator(r,p)&&(h=!0)):!n&&r?(u.track({type:Oe.Added,doc:r}),a=!0):n&&!r&&(u.track({type:Oe.Removed,doc:n}),a=!0,p&&(h=!0));a&&(l=r?(f=f.add(r),o?l.add(t):l.delete(t)):(f=f.delete(t),l.delete(t)))}),this.query.hasLimit())for(;f.size>this.query.limit;){var n=f.last();f=f.delete(n.key),l=l.delete(n.key),u.track({type:Oe.Removed,doc:n})}return m(!h||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:f,changeSet:u,needsRefill:h,mutatedKeys:l}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var o=this;m(!t.needsRefill,"Cannot apply changes that need a refill");var r=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var i=t.changeSet.getChanges();i.sort(function(t,e){return n=t.type,r=e.type,(i=function(t){switch(t){case Oe.Added:return 1;case Oe.Modified:case Oe.Metadata:return 2;case Oe.Removed:return 0;default:return S("Unknown ChangeType: "+t)}})(n)-i(r)||o.query.docComparator(t.doc,e.doc);var n,r,i}),this.applyTargetChange(n);var a=e?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Re.Synced:Re.Local,u=s!==this.syncState;return this.syncState=s,0!==i.length||u?{snapshot:new Be(this.query,t.documentSet,r,i,t.mutatedKeys,s===Re.Local,u,!1),limboChanges:a}:{limboChanges:a}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===si.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new qe,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&(!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations)},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.add(t)}),t.modifiedDocuments.forEach(function(t){return m(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")}),t.removedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)}),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var n=this.limboDocuments;this.limboDocuments=Ne(),this.documentSet.forEach(function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))});var r=[];return n.forEach(function(t){e.limboDocuments.has(t)||r.push(new _i(t))}),this.limboDocuments.forEach(function(t){n.has(t)||r.push(new Ti(t))}),r},t.prototype.synchronizeWithPersistedState=function(t,e){this._syncedDocuments=e,this.limboDocuments=Ne();var n=this.computeDocChanges(t);return this.applyChanges(n,!0)},t.prototype.computeInitialSnapshot=function(){return Be.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Re.Local)},t}();var Ii="SyncEngine",ki=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Di=function(t){this.key=t},Ni=function(){function t(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Gn(function(t){return t.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new dt(ct.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Qr,this.mutationUserCallbacks={},this.limboTargetIdGenerator=Rn.forSyncEngine(),this.isPrimary=void 0,this.onlineState=si.Unknown}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){m(null!==t,"SyncEngine listener cannot be null"),m(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},t.prototype.listen=function(a){return p.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o;return p.__generator(this,function(t){switch(t.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(a))?(e=r.targetId,this.sharedClientState.addLocalQueryTarget(e),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(a)];case 2:return i=t.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),e=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=t.sent(),this.isPrimary&&this.remoteStore.listen(i),t.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}})})},t.prototype.initializeViewAndComputeSnapshot=function(s,u){var c=this,l=s.query;return this.localStore.executeQuery(l).then(function(a){return c.localStore.remoteDocumentKeys(s.targetId).then(function(t){var e=new Ci(l,t),n=e.computeDocChanges(a),r=Ve.createSynthesizedTargetChangeForCurrentChange(s.targetId,u&&c.onlineState!==si.Offline),i=e.applyChanges(n,!0===c.isPrimary,r);m(0===i.limboChanges.length,"View returned limbo docs before target ack from the server."),m(!!i.snapshot,"applyChanges for new view should always return a snapshot");var o=new ki(l,s.targetId,e);return c.queryViewsByQuery.set(l,o),c.queryViewsByTarget[s.targetId]=o,i.snapshot})})},t.prototype.synchronizeViewAndComputeSnapshot=function(i){var t=this;return this.localStore.executeQuery(i.query).then(function(r){return t.localStore.remoteDocumentKeys(i.targetId).then(function(n){return p.__awaiter(t,void 0,void 0,function(){var e;return p.__generator(this,function(t){return e=i.view.synchronizeWithPersistedState(r,n),this.isPrimary&&this.updateTrackedLimbos(i.targetId,e.limboChanges),[2,e]})})})})},t.prototype.unlisten=function(r){return p.__awaiter(this,void 0,void 0,function(){var e,n=this;return p.__generator(this,function(t){switch(t.label){case 0:return this.assertSubscribed("unlisten()"),m(!!(e=this.queryViewsByQuery.get(r)),"Trying to unlisten on query not found:"+r),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseQuery(r,!1).then(function(){n.sharedClientState.clearQueryState(e.targetId),n.remoteStore.unlisten(e.targetId),n.removeAndCleanupQuery(e)}).catch(function(t){return n.ignoreIfPrimaryLeaseLoss(t)})]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(e),[4,this.localStore.releaseQuery(r,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})},t.prototype.write=function(t,e){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(t).then(function(t){return n.sharedClientState.addPendingMutation(t.batchId),n.addMutationCallback(t.batchId,e),n.emitNewSnapsAndNotifyLocalStore(t.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},t.prototype.wrapUpdateFunctionError=function(t){return t},t.prototype.runTransaction=function(e,n){var r=this;void 0===n&&(n=5),m(0<=n,"Got negative number of retries for transaction.");var i=this.remoteStore.createTransaction();return function(){try{var t=e(i);return!Ut(t)&&t.catch&&t.then?t.catch(function(t){return Promise.reject(r.wrapUpdateFunctionError(t))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(t){return Promise.reject(r.wrapUpdateFunctionError(t))}}().then(function(t){return i.commit().then(function(){return t}).catch(function(t){return 0===n?Promise.reject(t):r.runTransaction(e,n-1)})})},t.prototype.applyRemoteEvent=function(e){var r=this;return this.assertSubscribed("applyRemoteEvent()"),this.localStore.applyRemoteEvent(e).then(function(t){return C(e.targetChanges,function(t,e){var n=r.limboResolutionsByTarget[t];n&&(m(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),0<e.addedDocuments.size?n.receivedDocument=!0:0<e.modifiedDocuments.size?m(n.receivedDocument,"Received change for limbo target document without add."):0<e.removedDocuments.size&&(m(n.receivedDocument,"Received remove for limbo target document without add."),n.receivedDocument=!1))}),r.emitNewSnapsAndNotifyLocalStore(t,e)}).catch(function(t){return r.ignoreIfPrimaryLeaseLoss(t)})},t.prototype.applyOnlineStateChange=function(r,t){if(this.isPrimary&&t===ci.RemoteStore||!this.isPrimary&&t===ci.SharedClientState){var i=[];this.queryViewsByQuery.forEach(function(t,e){var n=e.view.applyOnlineStateChange(r);m(0===n.limboChanges.length,"OnlineState should not affect limbo documents."),n.snapshot&&i.push(n.snapshot)}),this.syncEngineListener.onOnlineStateChange(r),this.syncEngineListener.onWatchChange(i),this.onlineState=r,this.isPrimary&&this.sharedClientState.setOnlineState(r)}},t.prototype.rejectListen=function(u,c){return p.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,a,s=this;return p.__generator(this,function(t){switch(t.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(u,"rejected",c),e=this.limboResolutionsByTarget[u],(n=e&&e.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(n),delete this.limboResolutionsByTarget[u],r=(r=new dt(ct.comparator)).insert(n,new ht(n,Zt.forDeletedDoc())),i=Ne().add(n),o=new je(Zt.MIN,{},new re(K),r,i),[2,this.applyRemoteEvent(o)]):[3,1];case 1:return m(!!(a=this.queryViewsByTarget[u]),"Unknown targetId: "+u),[4,this.localStore.releaseQuery(a.query,!1).then(function(){return s.removeAndCleanupQuery(a)}).catch(function(t){return s.ignoreIfPrimaryLeaseLoss(t)})];case 2:t.sent(),this.syncEngineListener.onWatchError(a.query,c),t.label=3;case 3:return[2]}})})},t.prototype.applyBatchState=function(n,r,i){return p.__awaiter(this,void 0,void 0,function(){var e;return p.__generator(this,function(t){switch(t.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(n)];case 1:return null===(e=t.sent())?(y(Ii,"Cannot apply mutation batch with id: "+n),[2]):"pending"!==r?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return t.sent(),[3,4];case 3:"acknowledged"===r||"rejected"===r?(this.processUserCallback(n,i||null),this.localStore.removeCachedMutationBatchMetadata(n)):S("Unknown batchState: "+r),t.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(e)];case 5:return t.sent(),[2]}})})},t.prototype.applySuccessfulWrite=function(t){var e=this;this.assertSubscribed("applySuccessfulWrite()");var n=t.batch.batchId;return this.processUserCallback(n,null),this.localStore.acknowledgeBatch(t).then(function(t){return e.sharedClientState.updateMutationState(n,"acknowledged"),e.emitNewSnapsAndNotifyLocalStore(t)}).catch(function(t){return e.ignoreIfPrimaryLeaseLoss(t)})},t.prototype.rejectFailedWrite=function(e,n){var r=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,n),this.localStore.rejectBatch(e).then(function(t){return r.sharedClientState.updateMutationState(e,"rejected",n),r.emitNewSnapsAndNotifyLocalStore(t)}).catch(function(t){return r.ignoreIfPrimaryLeaseLoss(t)})},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new dt(K)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(m(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){var e=this;if(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(t.targetId);this.limboDocumentRefs.removeReferencesForId(t.targetId),n.forEach(function(t){e.limboDocumentRefs.containsKey(t)||e.removeLimboTarget(t)})}},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i instanceof Ti)this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i);else if(i instanceof _i){y(Ii,"Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)}else S("Unknown limbo change: "+JSON.stringify(i))}},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){y(Ii,"New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=Vt.atPath(e.path);this.limboResolutionsByTarget[n]=new Di(e),this.remoteStore.listen(new ne(r,n,Bt.LimboResolution,vn.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(n,u){return p.__awaiter(this,void 0,void 0,function(){var o,a,e,s=this;return p.__generator(this,function(t){switch(t.label){case 0:return o=[],a=[],e=[],this.queryViewsByQuery.forEach(function(t,i){e.push(Promise.resolve().then(function(){var e=i.view.computeDocChanges(n);return e.needsRefill?s.localStore.executeQuery(i.query).then(function(t){return i.view.computeDocChanges(t,e)}):e}).then(function(t){var e=u&&u.targetChanges[i.targetId],n=i.view.applyChanges(t,!0===s.isPrimary,e);if(s.updateTrackedLimbos(i.targetId,n.limboChanges),n.snapshot){s.isPrimary&&s.sharedClientState.updateQueryState(i.targetId,n.snapshot.fromCache?"not-current":"current"),o.push(n.snapshot);var r=Ei.fromSnapshot(i.targetId,n.snapshot);a.push(r)}}))}),[4,Promise.all(e)];case 1:return t.sent(),this.syncEngineListener.onWatchChange(o),[4,this.localStore.notifyLocalViewChanges(a)];case 2:return t.sent(),[2]}})})},t.prototype.ignoreIfPrimaryLeaseLoss=function(e){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(t){if(!Br(e))throw e;return y(Ii,"Unexpectedly lost primary lease"),[2]})})},t.prototype.assertSubscribed=function(t){m(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleCredentialChange=function(r){return p.__awaiter(this,void 0,void 0,function(){var e,n;return p.__generator(this,function(t){switch(t.label){case 0:return e=!this.currentUser.isEqual(r),this.currentUser=r,e?[4,this.localStore.handleUserChange(r)]:[3,3];case 1:return n=t.sent(),this.sharedClientState.handleUserChange(r,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:t.sent(),t.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return t.sent(),[2]}})})},t.prototype.applyPrimaryState=function(c){return p.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u=this;return p.__generator(this,function(t){switch(t.label){case 0:return!0!==c||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return t.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=t.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==c||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],s=Promise.resolve(),_(this.queryViewsByTarget,function(t,e){u.sharedClientState.isLocalQueryTarget(t)?a.push(t):s=s.then(function(){return u.unlisten(e.query)}),u.remoteStore.unlisten(e.targetId)}),[4,s]);case 4:return t.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return t.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:t.sent(),t.label=7;case 7:return[2]}})})},t.prototype.resetLimboDocuments=function(){var e=this;_(this.limboResolutionsByTarget,function(t){e.remoteStore.unlisten(t)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new dt(ct.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){for(var e=this,n=Promise.resolve(),a=[],s=[],r=function(o){n=n.then(function(){return p.__awaiter(e,void 0,void 0,function(){var e,n,r,i;return p.__generator(this,function(t){switch(t.label){case 0:return(n=this.queryViewsByTarget[o])?[4,this.localStore.releaseQuery(n.query,!0)]:[3,4];case 1:return t.sent(),[4,this.localStore.allocateQuery(n.query)];case 2:return e=t.sent(),[4,this.synchronizeViewAndComputeSnapshot(n)];case 3:return(r=t.sent()).snapshot&&s.push(r.snapshot),[3,8];case 4:return m(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(o)];case 5:return m(!!(i=t.sent()),"Query data for target "+o+" not found"),[4,this.localStore.allocateQuery(i)];case 6:return e=t.sent(),[4,this.initializeViewAndComputeSnapshot(e,!1)];case 7:t.sent(),t.label=8;case 8:return a.push(e),[2]}})})})},i=0,o=t;i<o.length;i++){r(o[i])}return n.then(function(){return e.syncEngineListener.onWatchChange(s),a})},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(r,o,n){return p.__awaiter(this,void 0,void 0,function(){var e,i=this;return p.__generator(this,function(t){switch(t.label){case 0:if(this.isPrimary)return y(Ii,"Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[r])return[3,5];switch(o){case"current":case"not-current":return[3,1];case"rejected":return[3,2]}return[3,4];case 1:return[2,this.localStore.getNewDocumentChanges().then(function(n){return p.__awaiter(i,void 0,void 0,function(){var e;return p.__generator(this,function(t){switch(t.label){case 0:return e=je.createSynthesizedRemoteEventForCurrentChange(r,"current"===o),[4,this.emitNewSnapsAndNotifyLocalStore(n,e)];case 1:return t.sent(),[2]}})})},function(r){return p.__awaiter(i,void 0,void 0,function(){var n;return p.__generator(this,function(t){switch(t.label){case 0:return(e=r).code!==v.DATA_LOSS||e.message!==Yn?[3,2]:(n=[],_(this.queryViewsByTarget,function(t){return n.push(t)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(n)]);case 1:return t.sent(),[3,3];case 2:throw r;case 3:return[2]}var e})})})];case 2:return e=this.queryViewsByTarget[r],this.removeAndCleanupQuery(e),[4,this.localStore.releaseQuery(e.query,!0)];case 3:return t.sent(),this.syncEngineListener.onWatchError(e.query,n),[3,5];case 4:S("Unexpected target state: "+o),t.label=5;case 5:return[2]}})})},t.prototype.applyActiveTargetsChange=function(f,h){return p.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c,l=this;return p.__generator(this,function(t){switch(t.label){case 0:if(!this.isPrimary)return[2];e=0,n=f,t.label=1;case 1:return e<n.length?(c=n[e],m(!this.queryViewsByTarget[c],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(c)]):[3,6];case 2:return m(!!(r=t.sent()),"Query data for active target "+c+" not found"),[4,this.localStore.allocateQuery(r)];case 3:return i=t.sent(),[4,this.initializeViewAndComputeSnapshot(i,!1)];case 4:t.sent(),this.remoteStore.listen(i),t.label=5;case 5:return e++,[3,1];case 6:o=function(e){var n;return p.__generator(this,function(t){switch(t.label){case 0:return(n=a.queryViewsByTarget[e])?[4,a.localStore.releaseQuery(n.query,!1).then(function(){l.remoteStore.unlisten(e),l.removeAndCleanupQuery(n)}).catch(function(t){return l.ignoreIfPrimaryLeaseLoss(t)})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},a=this,s=0,u=h,t.label=7;case 7:return s<u.length?(c=u[s],[5,o(c)]):[3,10];case 8:t.sent(),t.label=9;case 9:return s++,[3,7];case 10:return[2]}})})},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];return e&&e.receivedDocument?Ne().add(e.key):this.queryViewsByTarget[t]?this.queryViewsByTarget[t].view.syncedDocuments:Ne()},t}(),xi=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),Ai="SharedClientState",Oi="firestore_clients",Pi="firestore_mutations",Ri="firestore_targets",Mi=function(){function a(t,e,n,r){this.user=t,this.batchId=e,this.state=n,m(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return a.fromWebStorageEntry=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new b(r.error.code,r.error.message)),i?new a(t,e,r.state,o):(u(Ai,"Failed to parse mutation state for ID '"+e+"': "+n),null)},a.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},a}(),Li=function(){function o(t,e,n){this.targetId=t,this.state=e,m(void 0!==(this.error=n)==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return o.fromWebStorageEntry=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new b(n.error.code,n.error.message)),r?new o(t,n.state,i):(u(Ai,"Failed to parse target state for ID '"+t+"': "+e),null)},o.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},o}(),Fi=function(){function a(t,e){this.clientId=t,this.activeTargetIds=e}return a.fromWebStorageEntry=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Ae(),o=0;r&&o<n.activeTargetIds.length;++o)r=qt(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new a(t,i):(u(Ai,"Failed to parse client data for instance '"+t+"': "+e),null)},a}(),Ui=function(){function n(t,e){this.clientId=t,this.onlineState=e}return n.fromWebStorageEntry=function(t){var e=JSON.parse(t);return"object"==typeof e&&void 0!==si[e.onlineState]&&"string"==typeof e.clientId?new n(e.clientId,si[e.onlineState]):(u(Ai,"Failed to parse online state: "+t),null)},n}(),qi=function(){function t(){this.activeTargetIds=Ae()}return t.prototype.addQueryTarget=function(t){m(!this.activeTargetIds.has(t),"Target with ID '"+t+"' already active."),this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Bi=function(){function a(t,e,n,r,i){if(this.queue=t,this.platform=e,this.persistenceKey=n,this.localClientId=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!a.isAvailable(this.platform))throw new b(v.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey="firestore_sequence_number_"+n,this.activeClients[this.localClientId]=new qi,this.clientStateKeyRe=new RegExp("^"+Oi+"_"+o+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Pi+"_"+o+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Ri+"_"+o+"_(\\d+)$"),this.onlineStateKey="firestore_online_state_"+n,this.platform.window.addEventListener("storage",this.storageListener)}return a.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},a.prototype.start=function(){return p.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c,l,f,h=this;return p.__generator(this,function(t){switch(t.label){case 0:return m(!this.started,"WebStorageSharedClientState already started"),m(null!==this.syncEngine,"syncEngine property must be set before calling start()"),m(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=t.sent(),n=0,r=e;n<r.length;n++)(i=r[n])!==this.localClientId&&(o=this.getItem(this.toWebStorageClientStateKey(i)))&&(a=Fi.fromWebStorageEntry(i,o))&&(this.activeClients[a.clientId]=a);for(this.persistClientState(),(s=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(s))&&this.handleOnlineStateEvent(u),c=0,l=this.earlyEvents;c<l.length;c++)f=l[c],this.handleWebStorageEvent(f);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return h.shutdown()}),this.started=!0,[2]}})})},a.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},a.prototype.getAllActiveQueryTargets=function(){var n=Ae();return C(this.activeClients,function(t,e){n=n.unionWith(e.activeTargetIds)}),n},a.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},a.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},a.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},a.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));if(n){var r=Li.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},a.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},a.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},a.prototype.clearQueryState=function(t){this.removeItem(this.toWebStorageQueryTargetMetadataKey(t))},a.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},a.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.removeMutationState(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},a.prototype.setOnlineState=function(t){this.persistOnlineState(t)},a.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},a.prototype.getItem=function(t){var e=this.storage.getItem(t);return y(Ai,"READ",t,e),e},a.prototype.setItem=function(t,e){y(Ai,"SET",t,e),this.storage.setItem(t,e)},a.prototype.removeItem=function(t){y(Ai,"REMOVE",t),this.storage.removeItem(t)},a.prototype.handleWebStorageEvent=function(s){var t=this;if(s.storageArea===this.storage){if(y(Ai,"EVENT",s.key,s.newValue),s.key===this.localClientStorageKey)return void u("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return p.__awaiter(t,void 0,void 0,function(){var e,n,r,i,o,a;return p.__generator(this,function(t){if(!this.started)return this.earlyEvents.push(s),[2];if(null===s.key)return[2];if(this.clientStateKeyRe.test(s.key)){if(null==s.newValue)return n=this.fromWebStorageClientStateKey(s.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(s.key,s.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(s.key)){if(null!==s.newValue&&(r=this.fromWebStorageMutationMetadata(s.key,s.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(s.key)){if(null!==s.newValue&&(i=this.fromWebStorageQueryTargetMetadata(s.key,s.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(s.key===this.onlineStateKey){if(null!==s.newValue&&(o=this.fromWebStorageOnlineState(s.newValue)))return[2,this.handleOnlineStateEvent(o)]}else s.key===this.sequenceNumberKey&&(m(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(t){var e=vn.INVALID;if(null!=t)try{var n=JSON.parse(t);m("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){u(Ai,"Failed to read sequence number from WebStorage",t)}return e}(s.newValue))!==vn.INVALID&&this.sequenceNumberHandler(a));return[2]})})})}},Object.defineProperty(a.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),a.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},a.prototype.persistMutationState=function(t,e,n){var r=new Mi(this.currentUser,t,e,n),i=this.toWebStorageMutationBatchKey(t);this.setItem(i,r.toWebStorageJSON())},a.prototype.removeMutationState=function(t){var e=this.toWebStorageMutationBatchKey(t);this.removeItem(e)},a.prototype.persistOnlineState=function(t){var e={clientId:this.localClientId,onlineState:si[t]};this.storage.setItem(this.onlineStateKey,JSON.stringify(e))},a.prototype.persistQueryTargetState=function(t,e,n){var r=this.toWebStorageQueryTargetMetadataKey(t),i=new Li(t,e,n);this.setItem(r,i.toWebStorageJSON())},a.prototype.toWebStorageClientStateKey=function(t){return m(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),Oi+"_"+this.persistenceKey+"_"+t},a.prototype.toWebStorageQueryTargetMetadataKey=function(t){return Ri+"_"+this.persistenceKey+"_"+t},a.prototype.toWebStorageMutationBatchKey=function(t){var e=Pi+"_"+this.persistenceKey+"_"+t;return this.currentUser.isAuthenticated()&&(e+="_"+this.currentUser.uid),e},a.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},a.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return m(null!==n,"Cannot parse client state key '"+t+"'"),Fi.fromWebStorageEntry(n,e)},a.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);m(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Mi.fromWebStorageEntry(new xi(i),r,e)},a.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);m(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return Li.fromWebStorageEntry(r,e)},a.prototype.fromWebStorageOnlineState=function(t){return Ui.fromWebStorageEntry(t)},a.prototype.handleMutationBatchEvent=function(e){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(t){return e.user.uid!==this.currentUser.uid?(y(Ai,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]})})},a.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},a.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach(function(e){return p.__awaiter(n,void 0,void 0,function(){return p.__generator(this,function(t){return r.has(e)||o.push(e),[2]})})}),r.forEach(function(e){return p.__awaiter(n,void 0,void 0,function(){return p.__generator(this,function(t){return i.has(e)||a.push(e),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,a)},a.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},a}();var ji=function(){function t(){this.localState=new qi,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new qi,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),Vi="FirestoreClient",Wi=function(){function t(t,e){this.cacheSizeBytes=t,this.experimentalTabSynchronization=e}return t.prototype.lruParams=function(){return Or.withCacheSize(this.cacheSizeBytes)},t}(),zi=function(){},Ki=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=z.newId()}return t.prototype.start=function(t){var n=this,r=new bn,i=new bn,o=!1;return this.credentials.setChangeListener(function(e){o?n.asyncQueue.enqueueAndForget(function(){return n.handleCredentialChange(e)}):(o=!0,n.initializePersistence(t,i,e).then(function(t){return n.initializeRest(e,t)}).then(r.resolve,r.reject))}),this.asyncQueue.enqueueAndForget(function(){return r.promise}),i.promise},t.prototype.enableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.syncEngine.enableNetwork()})},t.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof Wi?this.startIndexedDbPersistence(n,t).then(function(t){return e.resolve(),t}).catch(function(t){if(e.reject(t),!r.canFallback(t))throw t;return console.warn("Error enabling offline storage. Falling back to storage disabled: "+t),r.startMemoryPersistence()}):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof b?t.code===v.FAILED_PRECONDITION||t.code===v.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||(22===t.code||20===t.code)},t.prototype.startIndexedDbPersistence=function(r,i){var t=this,o=qr.buildStoragePrefix(this.databaseInfo),a=new rn(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return p.__awaiter(t,void 0,void 0,function(){var e,n;return p.__generator(this,function(t){switch(t.label){case 0:if(i.experimentalTabSynchronization&&!Bi.isAvailable(this.platform))throw new b(v.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=i.lruParams(),i.experimentalTabSynchronization?(this.sharedClientState=new Bi(this.asyncQueue,this.platform,o,this.clientId,r),[4,qr.createMultiClientIndexedDbPersistence(o,this.clientId,this.platform,this.asyncQueue,a,n,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return e=t.sent(),[3,4];case 2:return this.sharedClientState=new ji,[4,qr.createIndexedDbPersistence(o,this.clientId,this.platform,this.asyncQueue,a,n)];case 3:e=t.sent(),t.label=4;case 4:return[2,(this.persistence=e).referenceDelegate.garbageCollector]}})})})},t.prototype.startMemoryPersistence=function(){return this.persistence=ei.createEagerPersistence(this.clientId),this.sharedClientState=new ji,Promise.resolve(null)},t.prototype.initializeRest=function(s,u){var t=this;return y(Vi,"Initializing. user=",s.uid),this.platform.loadConnection(this.databaseInfo).then(function(a){return p.__awaiter(t,void 0,void 0,function(){var e,n,r,i,o=this;return p.__generator(this,function(t){switch(t.label){case 0:return this.localStore=new Hr(this.persistence,s),u&&(this.lruScheduler=new Pr(u,this.asyncQueue,this.localStore),this.lruScheduler.start()),e=this.platform.newSerializer(this.databaseInfo.databaseId),n=new di(this.asyncQueue,a,this.credentials,e),r=function(t){return o.syncEngine.applyOnlineStateChange(t,ci.RemoteStore)},i=function(t){return o.syncEngine.applyOnlineStateChange(t,ci.SharedClientState)},this.remoteStore=new vi(this.localStore,n,this.asyncQueue,r),this.syncEngine=new Ni(this.localStore,this.remoteStore,this.sharedClientState,s),this.sharedClientState.onlineStateHandler=i,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new wi(this.syncEngine),[4,this.sharedClientState.start()];case 1:return t.sent(),[4,this.remoteStore.start()];case 2:return t.sent(),[4,this.persistence.setPrimaryStateListener(function(t){return o.syncEngine.applyPrimaryState(t)})];case 3:return t.sent(),[2]}})})})},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),y(Vi,"Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.asyncQueue.enqueue(function(){return t.syncEngine.disableNetwork()})},t.prototype.shutdown=function(e){var t=this;return this.asyncQueue.enqueue(function(){return p.__awaiter(t,void 0,void 0,function(){return p.__generator(this,function(t){switch(t.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return t.sent(),[4,this.sharedClientState.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown(e&&e.purgePersistenceWithDataLoss)];case 3:return t.sent(),this.credentials.removeChangeListener(),[2]}})})})},t.prototype.listen=function(t,e,n){var r=this,i=new Si(t,e,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},t.prototype.unlisten=function(t){var e=this;this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.unlisten(t)})},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.asyncQueue.enqueue(function(){return e.localStore.readDocument(t)}).then(function(t){if(t instanceof ft)return t;if(t instanceof ht)return null;throw new b(v.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},t.prototype.getDocumentsFromLocalCache=function(i){var t=this;return this.asyncQueue.enqueue(function(){return t.localStore.executeQuery(i)}).then(function(t){var e=Ne(),n=new Ci(i,e),r=n.computeDocChanges(t);return n.applyChanges(r,!1).snapshot})},t.prototype.write=function(t){var e=this,n=new bn;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.write(t,n)}),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.transaction=function(t){var e=this;return this.asyncQueue.enqueue(function(){return p.__awaiter(e,void 0,void 0,function(){return p.__generator(this,function(t){return[2]})})}).then(function(){return e.syncEngine.runTransaction(t)})},t}(),Qi=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Gi=function(){function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t,e,n,r){if(!(e instanceof Array)||e.length<r)throw new b(v.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" argument to be an array with at least "+W(r,"element")+".")}("FieldPath",t,"fieldNames",1);for(var n=0;n<t.length;++n)if(x("FieldPath","string",n,t[n]),0===t[n].length)throw new b(v.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(t)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw j("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(ut.keyField().canonicalString()),e}(),Hi=new RegExp("[~\\*/\\[\\]]");var Yi=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}},Xi=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){m(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=t)(xi.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){m(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},t}(),$i=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(){var e=this;m(null!=this.tokenListener,"getToken cannot be called after listener removed.");var n=this.tokenCounter,t=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(t).then(function(t){if(e.tokenCounter!==n)throw new b(v.ABORTED,"getToken aborted due to token change.");return t?(m("string"==typeof t.accessToken,"Invalid tokenData returned from getToken():"+t),new Yi(t.accessToken,e.currentUser)):null})},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){m(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,this.currentUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){m(null!=this.tokenListener,"removeChangeListener() called twice"),m(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.app.INTERNAL.getUid();return m(null===t||"string"==typeof t,"Received invalid UID: "+t),new xi(t)},t}(),Ji=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=xi.FIRST_PARTY,m(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){return{Authorization:this.gapi.auth.getAuthHeaderValueForFirstParty([]),"X-Goog-AuthUser":this.sessionIndex}},enumerable:!0,configurable:!0}),t}(),Zi=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,m(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return t.prototype.getToken=function(){return Promise.resolve(new Ji(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(xi.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function to(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=e;r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t,["next","error","complete"])}var eo,no,ro=function(){function t(t){this._methodName=t}return t.delete=function(){return io.instance},t.serverTimestamp=function(){return oo.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return D("FieldValue.arrayUnion",arguments,1),new ao(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return D("FieldValue.arrayRemove",arguments,1),new so(t)},t.prototype.isEqual=function(t){return this===t},t}(),io=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return p.__extends(e,t),e.instance=new e,e}(ro),oo=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return p.__extends(e,t),e.instance=new e,e}(ro),ao=function(n){function t(t){var e=n.call(this,"FieldValue.arrayUnion")||this;return e._elements=t,e}return p.__extends(t,n),t}(ro),so=function(n){function t(t){var e=n.call(this,"FieldValue.arrayRemove")||this;return e._elements=t,e}return p.__extends(t,n),t}(ro),uo=w(ro,"Use FieldValue.<field>() instead."),co=/^__.*__$/,lo=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return null!==this.fieldMask?n.push(new le(t,this.data,this.fieldMask,e)):n.push(new ce(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new fe(t,this.fieldTransforms)),n},t}(),fo=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new le(t,this.data,this.fieldMask,e)];return 0<this.fieldTransforms.length&&n.push(new fe(t,this.fieldTransforms)),n},t}();function ho(t){switch(t){case eo.Set:case eo.MergeSet:case eo.Update:return!0;case eo.Argument:return!1;default:throw S("Unexpected case for UserDataSource: "+t)}}(no=eo||(eo={}))[no.Set=0]="Set",no[no.Update=1]="Update",no[no.MergeSet=2]="MergeSet",no[no.Argument=3]="Argument";var po=function(){function r(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return r.prototype.childContextForField=function(t){var e=null==this.path?null:this.path.child(t),n=new r(this.dataSource,this.methodName,e,!1,this.fieldTransforms,this.fieldMask);return n.validatePathSegment(t),n},r.prototype.childContextForFieldPath=function(t){var e=null==this.path?null:this.path.child(t),n=new r(this.dataSource,this.methodName,e,!1,this.fieldTransforms,this.fieldMask);return n.validatePath(),n},r.prototype.childContextForArray=function(t){return new r(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},r.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new b(v.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},r.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},r.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},r.prototype.validatePathSegment=function(t){if(ho(this.dataSource)&&co.test(t))throw this.createError("Document fields cannot begin and end with __")},r}(),yo=function(t,e){this.databaseId=t,this.key=e},mo=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new po(eo.Set,t,ut.EMPTY_PATH);vo("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new lo(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e,n){var r=new po(eo.MergeSet,t,ut.EMPTY_PATH);vo("Data must be an object, but it was:",r,e);var i,o,a=this.parseData(e,r);if(n){for(var s=[],u=0,c=n;u<c.length;u++){var l=c[u],f=void 0;if(l instanceof Gi)f=l._internalPath;else{if("string"!=typeof l)throw S("Expected stringOrFieldPath to be a string or a FieldPath");f=wo(t,l)}if(!r.contains(f))throw new b(v.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");s.push(f)}i=ie.fromArray(s),o=r.fieldTransforms.filter(function(t){return i.covers(t.field)})}else i=ie.fromArray(r.fieldMask),o=r.fieldTransforms;return new lo(a,i,o)},t.prototype.parseUpdateData=function(o,t){var a=this,s=new po(eo.Update,o,ut.EMPTY_PATH);vo("Data must be an object, but it was:",s,t);var u=[],c=Ot.EMPTY;C(t,function(t,e){var n=wo(o,t),r=s.childContextForFieldPath(n);if((e=a.runPreConverter(e,r))instanceof io)u.push(n);else{var i=a.parseData(e,r);null!=i&&(u.push(n),c=c.set(n,i))}});var e=ie.fromArray(u);return new fo(c,e,s.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new po(eo.Update,t,ut.EMPTY_PATH),o=[bo(t,e)],a=[n];if(r.length%2!=0)throw new b(v.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(bo(t,r[s])),a.push(r[s+1]);var u=[],c=Ot.EMPTY;for(s=0;s<o.length;++s){var l=o[s],f=i.childContextForFieldPath(l),h=this.runPreConverter(a[s],f);if(h instanceof io)u.push(l);else{var p=this.parseData(h,f);null!=p&&(u.push(l),c=c.set(l,p))}}var d=ie.fromArray(u);return new fo(c,d,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e){var n=new po(eo.Argument,t,ut.EMPTY_PATH),r=this.parseData(e,n);return m(null!=r,"Parsed data should not be null."),m(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(t){var n=So(t);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(go(t=this.runPreConverter(t,e)))return vo("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof ro)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},t.prototype.parseObject=function(t,r){var i=this,o=new dt(K);return I(t)?r.path&&0<r.path.length&&r.fieldMask.push(r.path):C(t,function(t,e){var n=i.parseData(e,r.childContextForField(t));null!=n&&(o=o.insert(t,n))}),new Ot(o)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=o[i],s=this.parseData(a,e.childContextForArray(r));null==s&&(s=wt.INSTANCE),n.push(s),r++}return new Pt(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!ho(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof io){if(e.dataSource!==eo.MergeSet)throw e.dataSource===eo.Update?(m(0<e.path.length,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof oo)e.fieldTransforms.push(new oe(e.path,pe.instance));else if(t instanceof ao){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new de(n);e.fieldTransforms.push(new oe(e.path,r))}else if(t instanceof so){n=this.parseArrayTransformElements(t._methodName,t._elements);var i=new ye(n);e.fieldTransforms.push(new oe(e.path,i))}else S("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return wt.INSTANCE;if("number"==typeof t)return qt(t)?new _t(t):new Ct(t);if("boolean"==typeof t)return St.of(t);if("string"==typeof t)return new It(t);if(t instanceof Date)return new kt(nt.fromDate(t));if(t instanceof nt)return new kt(new nt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof et)return new At(t);if(t instanceof Z)return new Nt(t);if(t instanceof yo)return new xt(t.databaseId,t.key);throw e.createError("Unsupported field value: "+U(t))},t.prototype.parseArrayTransformElements=function(r,t){var i=this;return t.map(function(t,e){var n=new po(eo.Argument,r,ut.EMPTY_PATH);return i.parseData(t,n.childContextForArray(e))})},t}();function go(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof et||t instanceof Z||t instanceof yo||t instanceof ro)}function vo(t,e,n){if(!go(n)||!F(n)){var r=U(n);throw"an object"===r?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function bo(t,e){if(e instanceof Gi)return e._internalPath;if("string"==typeof e)return wo(t,e);throw new b(v.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function wo(e,t){try{return function(e){if(0<=e.search(Hi))throw new b(v.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Gi.bind.apply(Gi,[void 0].concat(e.split("."))))}catch(t){throw new b(v.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(t){var n=So(t);throw new b(v.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function So(t){return t instanceof Error?t.message:t.toString()}var Eo=Or.COLLECTION_DISABLED,To=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new b(v.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else O("settings","non-empty string","host",t.host),this.host=t.host,P("settings","boolean","ssl",t.ssl),this.ssl=T(t.ssl,!0);if(B("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes"]),P("settings","object","credentials",t.credentials),this.credentials=t.credentials,P("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),this.timestampsInSnapshots=T(t.timestampsInSnapshots,!1),P("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Or.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==Eo&&t.cacheSizeBytes<Or.MINIMUM_CACHE_SIZE_BYTES)throw new b(v.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Or.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes},t}(),_o=function(){},Co=function(){function o(t){var n=this;this._queue=new Sn,this.INTERNAL={delete:function(e){return p.__awaiter(n,void 0,void 0,function(){return p.__generator(this,function(t){return this._firestoreClient?[2,this._firestoreClient.shutdown(e)]:[2]})})}};var e=new _o;if("object"==typeof t.options){var r=t;e.firebaseApp=r,e.databaseId=o.databaseIdFromApp(r),e.persistenceKey=e.firebaseApp.name,e.credentials=new $i(r)}else{var i=t;if(!i.projectId)throw new b(v.INVALID_ARGUMENT,"Must provide projectId");e.databaseId=new it(i.projectId,i.database),e.persistenceKey="[DEFAULT]",e.credentials=new Xi}e.settings=new To({}),this._config=e,this._databaseId=e.databaseId}return o.prototype.settings=function(t){if(k("Firestore.settings",arguments,1),x("Firestore.settings","object",1,t),E(t,"persistence"))throw new b(v.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new To(t);if(this._firestoreClient&&!this._config.settings.isEqual(e))throw new b(v.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this._config.settings=e).credentials&&(this._config.credentials=function(t){if(!t)return new Xi;switch(t.type){case"gapi":return new Zi(t.client,t.sessionIndex||"0");case"provider":return t.client;default:throw new b(v.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},o.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},o.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},o.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new b(v.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(new Wi(this._config.settings.cacheSizeBytes,void 0!==t&&T(t.experimentalTabSynchronization,!1)))},o.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new zi),this._firestoreClient},o.prototype.configureClient=function(t){var r=this;m(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),this._config.settings.timestampsInSnapshots||u("\nThe behavior for Date objects stored in Firestore is going to change\nAND YOUR APP MAY BREAK.\nTo hide this warning and ensure your app does not break, you need to add the\nfollowing code to your app before calling any other Cloud Firestore methods:\n\n  const firestore = firebase.firestore();\n  const settings = {/* your settings... */ timestampsInSnapshots: true};\n  firestore.settings(settings);\n\nWith this change, timestamps stored in Cloud Firestore will be read back as\nFirebase Timestamp objects instead of as system Date objects. So you will also\nneed to update code expecting a Date to instead expect a Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at');\n  const date = timestamp.toDate();\n\nPlease audit all existing usages of Date when you enable the new behavior. In a\nfuture release, the behavior will change to the new behavior, so if you do not\nfollow these steps, YOUR APP MAY BREAK."),m(!this._firestoreClient,"configureClient() called multiple times");var e=new rt(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl);return this._dataConverter=new mo(function(t){if(t instanceof Do){var e=r._config.databaseId,n=t.firestore._config.databaseId;if(!n.isEqual(e))throw new b(v.INVALID_ARGUMENT,"Document reference is for database "+n.projectId+"/"+n.database+" but should be for database "+e.projectId+"/"+e.database);return new yo(r._config.databaseId,t._key)}return t}),this._firestoreClient=new Ki(l.getPlatform(),e,this._config.credentials,this._queue),this._firestoreClient.start(t)},o.databaseIdFromApp=function(t){var e=t.options;if(!E(e,"projectId"))throw new b(v.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new b(v.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new it(n)},Object.defineProperty(o.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new b(v.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),o.prototype.collection=function(t){if(k("Firestore.collection",arguments,1),x("Firestore.collection","non-empty string",1,t),!t)throw new b(v.INVALID_ARGUMENT,"Must provide a non-empty collection path to collection()");return this.ensureClientConfigured(),new Ro(at.fromString(t),this)},o.prototype.doc=function(t){if(k("Firestore.doc",arguments,1),x("Firestore.doc","non-empty string",1,t),!t)throw new b(v.INVALID_ARGUMENT,"Must provide a non-empty document path to doc()");return this.ensureClientConfigured(),Do.forPath(at.fromString(t),this)},o.prototype.runTransaction=function(e){var n=this;return k("Firestore.runTransaction",arguments,1),x("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction(function(t){return e(new Io(n,t))})},o.prototype.batch=function(){return this.ensureClientConfigured(),new ko(this)},Object.defineProperty(o,"logLevel",{get:function(){switch(d()){case h.DEBUG:return"debug";case h.ERROR:return"error";case h.SILENT:return"silent";default:return S("Unknown log level: "+d())}},enumerable:!0,configurable:!0}),o.setLogLevel=function(t){switch(k("Firestore.setLogLevel",arguments,1),x("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":r(h.DEBUG);break;case"error":r(h.ERROR);break;case"silent":r(h.SILENT);break;default:throw new b(v.INVALID_ARGUMENT,"Invalid log level: "+t)}},o.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},o}(),Io=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var n=this;k("Transaction.get",arguments,1);var r=Uo("Transaction.get",t,this._firestore);return this._transaction.lookup([r._key]).then(function(t){if(!t||1!==t.length)return S("Mismatch in docs returned from document lookup.");var e=t[0];if(e instanceof ht)return new xo(n._firestore,r._key,null,!1,!1);if(e instanceof ft)return new xo(n._firestore,r._key,e,!1,!1);throw S("BatchGetDocumentsRequest returned unexpected document type: "+e.constructor.name)})},t.prototype.set=function(t,e,n){N("Transaction.set",arguments,2,3);var r=Uo("Transaction.set",t,this._firestore),i=(n=Mo("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(r._key,i),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return i="string"==typeof e||e instanceof Gi?(D("Transaction.update",arguments,3),r=Uo("Transaction.update",t,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(k("Transaction.update",arguments,2),r=Uo("Transaction.update",t,this._firestore),this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,i),this},t.prototype.delete=function(t){k("Transaction.delete",arguments,1);var e=Uo("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),ko=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){N("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Uo("WriteBatch.set",t,this._firestore),i=(n=Mo("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(i.toMutations(r._key,se.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),i="string"==typeof e||e instanceof Gi?(D("WriteBatch.update",arguments,3),r=Uo("WriteBatch.update",t,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(k("WriteBatch.update",arguments,2),r=Uo("WriteBatch.update",t,this._firestore),this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,se.exists(!0))),this},t.prototype.delete=function(t){k("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=Uo("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new he(e._key,se.NONE)),this},t.prototype.commit=function(){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(t){return this.verifyNotCommitted(),this._committed=!0,0<this._mutations.length?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new b(v.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Do=function(){function n(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return n.forPath=function(t,e){if(t.length%2!=0)throw new b(v.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new n(new ct(t),e)},Object.defineProperty(n.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return new Ro(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),n.prototype.collection=function(t){if(k("DocumentReference.collection",arguments,1),x("DocumentReference.collection","non-empty string",1,t),!t)throw new b(v.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=at.fromString(t);return new Ro(this._key.path.child(e),this.firestore)},n.prototype.isEqual=function(t){if(!(t instanceof n))throw j("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)},n.prototype.set=function(t,e){N("DocumentReference.set",arguments,1,2);var n=(e=Mo("DocumentReference.set",e)).merge||e.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t,e.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,se.NONE))},n.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof Gi?(D("DocumentReference.update",arguments,2),this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(k("DocumentReference.update",arguments,1),this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,se.exists(!0)))},n.prototype.delete=function(){return k("DocumentReference.delete",arguments,0),this._firestoreClient.write([new he(this._key,se.NONE)])},n.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];N("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||to(t[i])||(B("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),P("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=to(t[i])?t[i]:(x("DocumentReference.onSnapshot","function",i,t[i]),A("DocumentReference.onSnapshot","function",i+1,t[i+1]),A("DocumentReference.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},n.prototype.onSnapshotInternal=function(t,n){var r=this,e=function(t){console.error("Uncaught Error in onSnapshot:",t)};n.error&&(e=n.error.bind(n));var i=new Qi({next:function(t){if(n.next){m(t.docs.size<=1,"Too many documents returned on a document query");var e=t.docs.get(r._key);n.next(new xo(r.firestore,r._key,e,t.fromCache,t.hasPendingWrites))}},error:e}),o=this._firestoreClient.listen(Vt.atPath(this._key.path),i,t);return function(){i.mute(),r._firestoreClient.unlisten(o)}},n.prototype.get=function(n){var r=this;return N("DocumentReference.get",arguments,0,1),Fo("DocumentReference.get",n),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.ensureClientConfigured().getDocumentFromLocalCache(r._key).then(function(t){e(new xo(r.firestore,r._key,t,!0,t instanceof ft&&t.hasLocalMutations))},t):r.getViaSnapshotListener(e,t,n)})},n.prototype.getViaSnapshotListener=function(e,n,r){var i=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(t){i(),!t.exists&&t.metadata.fromCache?n(new b(v.UNAVAILABLE,"Failed to get document because the client is offline.")):t.exists&&t.metadata.fromCache&&r&&"server"===r.source?n(new b(v.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(t)},error:n})},n}(),No=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),xo=function(){function e(t,e,n,r,i){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return e.prototype.data=function(t){return N("DocumentSnapshot.data",arguments,0,1),t=Lo("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data,vt.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},e.prototype.get=function(t,e){if(N("DocumentSnapshot.get",arguments,1,2),e=Lo("DocumentSnapshot.get",e),this._document){var n=this._document.data.field(bo("DocumentSnapshot.get",t));if(void 0!==n)return this.convertValue(n,vt.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Do(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new No(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw j("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))},e.prototype.convertObject=function(t,n){var r=this,i={};return t.forEach(function(t,e){i[t]=r.convertValue(e,n)}),i},e.prototype.convertValue=function(t,e){if(t instanceof Ot)return this.convertObject(t,e);if(t instanceof Pt)return this.convertArray(t,e);if(t instanceof xt){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||u("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Do(n,this._firestore)}return t.value(e)},e.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.convertValue(t,e)})},e}(),Ao=function(o){function t(t,e,n,r,i){return o.call(this,t,e,n,r,i)||this}return p.__extends(t,o),t.prototype.data=function(t){var e=o.prototype.data.call(this,t);return m("object"==typeof e,"Document in a QueryDocumentSnapshot should exist"),e},t}(xo),Oo=function(){function c(t,e){this._query=t,this.firestore=e}return c.prototype.where=function(t,e,n){var r;k("Query.where",arguments,3),x("Query.where","non-empty string",2,e),q("Query.where",3,n);var i=bo("Query.where",t),o=zt.fromString(e);if(i.isKeyField()){if(o===zt.ARRAY_CONTAINS)throw new b(v.INVALID_ARGUMENT,"Invalid Query. You can't perform array-contains queries on FieldPath.documentId() since document IDs are not arrays.");if("string"==typeof n){if(-1!==n.indexOf("/"))throw new b(v.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it contains a slash.");if(""===n)throw new b(v.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");var a=this._query.path.child(new at([n]));m(a.length%2==0,"Path should be a document key"),r=new xt(this.firestore._databaseId,new ct(a))}else{if(!(n instanceof Do))throw new b(v.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+U(n)+".");var s=n;r=new xt(this.firestore._databaseId,s._key)}}else r=this.firestore._dataConverter.parseQueryValue("Query.where",n);var u=Wt.create(i,o,r);return this.validateNewFilter(u),new c(this._query.addFilter(u),this.firestore)},c.prototype.orderBy=function(t,e){var n;if(N("Query.orderBy",arguments,1,2),A("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n=Ht.ASCENDING;else{if("desc"!==e)throw new b(v.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n=Ht.DESCENDING}if(null!==this._query.startAt)throw new b(v.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new b(v.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=bo("Query.orderBy",t),i=new Xt(r,n);return this.validateNewOrderBy(i),new c(this._query.addOrderBy(i),this.firestore)},c.prototype.limit=function(t){if(k("Query.limit",arguments,1),x("Query.limit","number",1,t),t<=0)throw new b(v.INVALID_ARGUMENT,"Invalid Query. Query limit ("+t+") is invalid. Limit must be positive.");return new c(this._query.withLimit(t),this.firestore)},c.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];D("Query.startAt",arguments,1);var r=this.boundFromDocOrFields("Query.startAt",t,e,!0);return new c(this._query.withStartAt(r),this.firestore)},c.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];D("Query.startAfter",arguments,1);var r=this.boundFromDocOrFields("Query.startAfter",t,e,!1);return new c(this._query.withStartAt(r),this.firestore)},c.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];D("Query.endBefore",arguments,1);var r=this.boundFromDocOrFields("Query.endBefore",t,e,!0);return new c(this._query.withEndAt(r),this.firestore)},c.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];D("Query.endAt",arguments,1);var r=this.boundFromDocOrFields("Query.endAt",t,e,!1);return new c(this._query.withEndAt(r),this.firestore)},c.prototype.isEqual=function(t){if(!(t instanceof c))throw j("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},c.prototype.boundFromDocOrFields=function(t,e,n,r){if(q(t,1,e),e instanceof xo){if(0<n.length)throw new b(v.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new b(v.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},c.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new xt(this.firestore._databaseId,e.key));else{var s=e.field(a.field);if(void 0===s){var u=a.field.canonicalString();throw new b(v.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Yt(r,n)},c.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new b(v.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new b(v.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(-1!==a.indexOf("/"))throw new b(v.INVALID_ARGUMENT,"Invalid query. Document ID '"+a+"' contains a slash in "+t+"()");var s=new ct(this._query.path.child(a));i.push(new xt(this.firestore._databaseId,s))}else{var u=this.firestore._dataConverter.parseQueryValue(t,a);i.push(u)}}return new Yt(i,n)},c.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];N("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||to(t[i])||(B("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),P("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=to(t[i])?t[i]:(x("Query.onSnapshot","function",i,t[i]),A("Query.onSnapshot","function",i+1,t[i+1]),A("Query.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(r,n)},c.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Qi({next:function(t){e.next&&e.next(new Po(n.firestore,n._query,t))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(a)}},c.prototype.get=function(n){var r=this;return N("Query.get",arguments,0,1),Fo("Query.get",n),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.ensureClientConfigured().getDocumentsFromLocalCache(r._query).then(function(t){e(new Po(r.firestore,r._query,t))},t):r.getViaSnapshotListener(e,t,n)})},c.prototype.getViaSnapshotListener=function(e,n,r){var i=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(t){i(),t.metadata.fromCache&&r&&"server"===r.source?n(new b(v.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(t)},error:n})},c.prototype.validateNewFilter=function(t){if(t instanceof Kt)if(t.isInequality()){var e=this._query.getInequalityFilterField();if(null!==e&&!e.isEqual(t.field))throw new b(v.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+e.toString()+"' and '"+t.field.toString()+"'");var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(t.field,n)}else if(t.op===zt.ARRAY_CONTAINS&&this._query.hasArrayContainsFilter())throw new b(v.INVALID_ARGUMENT,"Invalid query. Queries only support a single array-contains filter.")},c.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},c.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new b(v.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},c}(),Po=function(){function e(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new No(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,n){var r=this;N("QuerySnapshot.forEach",arguments,1,2),x("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach(function(t){e.call(n,r.convertToDocumentImpl(t))})},Object.defineProperty(e.prototype,"query",{get:function(){return new Oo(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(t){t&&(B("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),P("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new b(v.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,e,o){{if(o.oldDocs.isEmpty()){var n,r=0;return o.docChanges.map(function(t){var e=new Ao(i,t.doc.key,t.doc,o.fromCache,o.mutatedKeys.has(t.doc.key));return m(t.type===Oe.Added,"Invalid event type for first snapshot"),m(!n||o.query.docComparator(n,t.doc)<0,"Got added events in wrong order"),n=t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:r++}})}var a=o.oldDocs;return o.docChanges.filter(function(t){return e||t.type!==Oe.Metadata}).map(function(t){var e=new Ao(i,t.doc.key,t.doc,o.fromCache,o.mutatedKeys.has(t.doc.key)),n=-1,r=-1;return t.type!==Oe.Added&&(m(0<=(n=a.indexOf(t.doc.key)),"Index for document not found"),a=a.delete(t.doc.key)),t.type!==Oe.Removed&&(a=a.add(t.doc),r=a.indexOf(t.doc.key)),{type:function(t){switch(t){case Oe.Added:return"added";case Oe.Modified:case Oe.Metadata:return"modified";case Oe.Removed:return"removed";default:return S("Unknown change type: "+t)}}(t.type),doc:e,oldIndex:n,newIndex:r}})}}(this._firestore,e,this._snapshot),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw j("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)},e.prototype.convertToDocumentImpl=function(t){return new Ao(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key))},e}();["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(t){try{Object.defineProperty(Po.prototype.docChanges,t,{get:function(){return function(){throw new b(v.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}});var Ro=function(r){function t(t,e){var n=r.call(this,Vt.atPath(t),e)||this;if(t.length%2!=1)throw new b(v.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return n}return p.__extends(t,r),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new Do(new ct(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(t){if(N("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=z.newId()),x("CollectionReference.doc","non-empty string",1,t),""===t)throw new b(v.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=at.fromString(t);return Do.forPath(this._query.path.child(e),this.firestore)},t.prototype.add=function(t){k("CollectionReference.add",arguments,1),x("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},t}(Oo);function Mo(t,e){if(void 0===e)return{merge:!1};if(B(t,e,["merge","mergeFields"]),P(t,"boolean","merge",e.merge),R(t,"mergeFields","a string or a FieldPath",e.mergeFields,function(t){return"string"==typeof t||t instanceof Gi}),void 0!==e.mergeFields&&void 0!==e.merge)throw new b(v.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Lo(t,e){return void 0===e?{}:(B(t,e,["serverTimestamps"]),M(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Fo(t,e){A(t,"object",1,e),e&&(B(t,e,["source"]),M(t,0,"source",e.source,["default","server","cache"]))}function Uo(t,e,n){if(e instanceof Do){if(e.firestore!==n)throw new b(v.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw j(t,"DocumentReference",1,e)}var qo=w(Co,"Use firebase.firestore() instead."),Bo=w(Io,"Use firebase.firestore().runTransaction() instead."),jo=w(ko,"Use firebase.firestore().batch() instead."),Vo=w(Do,"Use firebase.firestore().doc() instead."),Wo=w(xo),zo=w(Ao),Ko=w(Oo),Qo=w(Po),Go=w(Ro,"Use firebase.firestore().collection() instead."),Ho={Firestore:qo,GeoPoint:et,Timestamp:nt,Blob:tt,Transaction:Bo,WriteBatch:jo,DocumentReference:Vo,DocumentSnapshot:Wo,Query:Ko,QueryDocumentSnapshot:zo,QuerySnapshot:Qo,CollectionReference:Go,FieldPath:Gi,FieldValue:uo,setLogLevel:Co.setLogLevel,CACHE_SIZE_UNLIMITED:Eo};function Yo(t){t.INTERNAL.registerService("firestore",function(t){return new Co(t)},function(t){m(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(Ho))}function Xo(t){Yo(t)}Xo(n),$o.registerFirestore=Xo}).call(this,Jo(119))},function(t,e,n){"use strict";n.r(e),n.d(e,"setLogLevel",function(){return c}),n.d(e,"Logger",function(){return u}),n.d(e,"LogLevel",function(){return o});var o,r,i=[];(r=o||(o={}))[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT";var a=o.INFO,s=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString();switch(e){case o.DEBUG:case o.VERBOSE:console.log.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case o.INFO:console.info.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case o.WARN:console.warn.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;case o.ERROR:console.error.apply(console,["["+i+"]  "+t.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},u=function(){function t(t){this.name=t,this._logLevel=a,this._logHandler=s,i.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.WARN].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,[this,o.ERROR].concat(t))},t}();function c(e){i.forEach(function(t){t.logLevel=e})}},function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return a}),n.d(e,"__decorate",function(){return s}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return l}),n.d(e,"__generator",function(){return f}),n.d(e,"__exportStar",function(){return h}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return d}),n.d(e,"__spread",function(){return y}),n.d(e,"__await",function(){return m}),n.d(e,"__asyncGenerator",function(){return g}),n.d(e,"__asyncDelegator",function(){return v}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return w}),n.d(e,"__importStar",function(){return S}),n.d(e,"__importDefault",function(){return E});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);return 3<o&&a&&Object.defineProperty(e,n,a),a}function u(n,r){return function(t,e){r(t,e,n)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(o,a,s,u){return new(s||(s=Promise))(function(t,e){function n(t){try{i(u.next(t))}catch(t){e(t)}}function r(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new s(function(t){t(e.value)}).then(n,r)}i((u=u.apply(o,a||[])).next())})}function f(n,r){var i,o,a,t,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&e[0]?"return":e[0]?"throw":"next"])&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[0,a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function h(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function g(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(t,e||[]),a=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(r){o[r]&&(i[r]=function(n){return new Promise(function(t,e){1<a.push([r,n,t,e])||s(r,n)})})}function s(t,e){try{(n=o[t](e)).value instanceof m?Promise.resolve(n.value.v).then(u,c):l(a[0][2],n)}catch(t){l(a[0][3],t)}var n}function u(t){s("next",t)}function c(t){s("throw",t)}function l(t,e){t(e),a.shift(),a.length&&s(a[0][0],a[0][1])}}function v(r){var t,i;return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,n){r[e]&&(t[e]=function(t){return(i=!i)?{value:m(r[e](t)),done:"return"===e}:n?n(t):t})}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator];return e?e.call(t):p(t)}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function S(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function E(t){return t&&t.__esModule?t:{default:t}}},function(t,Mn,Ln){"use strict";Ln.r(Mn),function(t){Ln.d(Mn,"createWebChannelTransport",function(){return xn}),Ln.d(Mn,"ErrorCode",function(){return An}),Ln.d(Mn,"EventType",function(){return On}),Ln.d(Mn,"WebChannel",function(){return Pn}),Ln.d(Mn,"XhrIoPool",function(){return Rn});var e,n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},r=r||{},l=n;function s(t){return"string"==typeof t}function a(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function i(){}function o(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function u(t){return"array"==o(t)}function c(t){var e=o(t);return"array"==e||"object"==e&&"number"==typeof t.length}function f(t){return"function"==o(t)}function h(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var p="closure_uid_"+(1e9*Math.random()>>>0),d=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function m(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:m).apply(null,arguments)}function v(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var b=Date.now||function(){return+new Date};function w(t,o){function e(){}e.prototype=o.prototype,t.L=o.prototype,t.prototype=new e,(t.prototype.constructor=t).mh=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function S(t){if(Error.captureStackTrace)Error.captureStackTrace(this,S);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function E(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");S.call(this,n+t[r])}function T(){0!=_&&(C[this[p]||(this[p]=++d)]=this),this.Ka=this.Ka,this.Qa=this.Qa}w(S,Error),S.prototype.name="CustomError",w(E,S);var _=0,C={};T.prototype.Ka=!(E.prototype.name="AssertionError"),T.prototype.bb=function(){if(!this.Ka&&(this.Ka=!0,this.F(),0!=_)){var t=this[p]||(this[p]=++d);if(0!=_&&this.Qa&&0<this.Qa.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete C[t]}},T.prototype.F=function(){if(this.Qa)for(;this.Qa.length;)this.Qa.shift()()};var I=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(s(t))return s(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},k=Array.prototype.lastIndexOf?function(t,e){return Array.prototype.lastIndexOf.call(t,e,t.length-1)}:function(t,e){var n=t.length-1;if(n<0&&(n=Math.max(0,t.length+n)),s(t))return s(e)&&1==e.length?t.lastIndexOf(e,n):-1;for(;0<=n;n--)if(n in t&&t[n]===e)return n;return-1},D=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=s(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},N=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=s(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function x(t){if(!u(t))for(var e=t.length-1;0<=e;e--)delete t[e];t.length=0}function A(t,e){var n;return(n=0<=(e=I(t,e)))&&Array.prototype.splice.call(t,e,1),n}function O(t){return Array.prototype.concat.apply([],arguments)}function P(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function R(t){return/^[\s\xa0]*$/.test(t)}var M,L=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function F(t,e){return t<e?-1:e<t?1:0}t:{var U=l.navigator;if(U){var q=U.userAgent;if(q){M=q;break t}}M=""}function B(t){return-1!=M.indexOf(t)}function j(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function V(t){var e,n=[],r=0;for(e in t)n[r++]=t[e];return n}function W(t){var e,n=[],r=0;for(e in t)n[r++]=e;return n}function z(t){var e,n={};for(e in t)n[e]=t[e];return n}var K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<K.length;o++)n=K[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function G(t){return G[" "](t),t}G[" "]=i;var H,Y,X=B("Opera"),$=B("Trident")||B("MSIE"),J=B("Edge"),Z=J||$,tt=B("Gecko")&&!(-1!=M.toLowerCase().indexOf("webkit")&&!B("Edge"))&&!(B("Trident")||B("MSIE"))&&!B("Edge"),et=-1!=M.toLowerCase().indexOf("webkit")&&!B("Edge");function nt(){var t=l.document;return t?t.documentMode:void 0}t:{var rt="",it=(Y=M,tt?/rv:([^\);]+)(\)|;)/.exec(Y):J?/Edge\/([\d\.]+)/.exec(Y):$?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Y):et?/WebKit\/(\S+)/.exec(Y):X?/(?:Version)[ \/]?(\S+)/.exec(Y):void 0);if(it&&(rt=it?it[1]:""),$){var ot=nt();if(null!=ot&&ot>parseFloat(rt)){H=String(ot);break t}}H=rt}var at,st={};function ut(s){return t=s,e=function(){for(var t=0,e=L(String(H)).split("."),n=L(String(s)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=F(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||F(0==o[2].length,0==a[2].length)||F(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t},n=st,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var ct=l.document;at=ct&&$?nt()||("CSS1Compat"==ct.compatMode?parseInt(H,10):5):void 0;var lt=Object.freeze||function(t){return t},ft=!$||9<=Number(at),ht=$&&!ut("9"),pt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",i,e),l.removeEventListener("test",i,e)}catch(t){}return t}();function dt(t,e){this.type=t,this.currentTarget=this.target=e,this.defaultPrevented=this.Ea=!1,this.Be=!0}function yt(t,e){dt.call(this,t?t.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.key="",this.charCode=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.fb=null,t&&this.Kf(t,e)}dt.prototype.stopPropagation=function(){this.Ea=!0},dt.prototype.preventDefault=function(){this.defaultPrevented=!0,this.Be=!1},w(yt,dt);var mt=lt({2:"touch",3:"pen",4:"mouse"});yt.prototype.Kf=function(t,e){var n=this.type=t.type,r=t.changedTouches?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.currentTarget=e,e=t.relatedTarget){if(tt){t:{try{G(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,this.screenY=null===r?(this.offsetX=et||void 0!==t.offsetX?t.offsetX:t.layerX,this.offsetY=et||void 0!==t.offsetY?t.offsetY:t.layerY,this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,t.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,r.screenY||0),this.button=t.button,this.keyCode=t.keyCode||0,this.key=t.key||"",this.charCode=t.charCode||("keypress"==n?t.keyCode:0),this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=s(t.pointerType)?t.pointerType:mt[t.pointerType]||"",this.state=t.state,(this.fb=t).defaultPrevented&&this.preventDefault()},yt.prototype.stopPropagation=function(){yt.L.stopPropagation.call(this),this.fb.stopPropagation?this.fb.stopPropagation():this.fb.cancelBubble=!0},yt.prototype.preventDefault=function(){yt.L.preventDefault.call(this);var t=this.fb;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ht)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var gt="closure_listenable_"+(1e6*Math.random()|0);function vt(t){return!(!t||!t[gt])}var bt=0;function wt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ob=i,this.key=++bt,this.Sa=this.Eb=!1}function St(t){this.src=t,this.J={},this.xb=0}function Et(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Sa&&o.listener==e&&o.capture==!!n&&o.Ob==r)return i}return-1}wt.prototype.Vb=function(){this.Sa=!0,this.Ob=this.src=this.proxy=this.listener=null},(e=St.prototype).add=function(t,e,n,r,i){var o=t.toString();(t=this.J[o])||(t=this.J[o]=[],this.xb++);var a=Et(t,e,r,i);return-1<a?(e=t[a],n||(e.Eb=!1)):((e=new wt(e,this.src,o,!!r,i)).Eb=n,t.push(e)),e},e.remove=function(t,e,n,r){if(!((t=t.toString())in this.J))return!1;var i=this.J[t];return-1<(e=Et(i,e,n,r))&&(i[e].Vb(),Array.prototype.splice.call(i,e,1),0==i.length&&(delete this.J[t],this.xb--),!0)},e.ye=function(t){var e=t.type;e in this.J&&A(this.J[e],t)&&(t.Vb(),0==this.J[e].length&&(delete this.J[e],this.xb--))},e.pb=function(t){var e;for(e in t=t&&t.toString(),this.J)if(!t||e==t){for(var n=this.J[e],r=0;r<n.length;r++)n[r].Vb();delete this.J[e],this.xb--}},e.jb=function(t,e,n,r){var i=-1;return(t=this.J[t.toString()])&&(i=Et(t,e,n,r)),-1<i?t[i]:null};var Tt="closure_lm_"+(1e6*Math.random()|0),_t={};function Ct(t,e,n,r,i){if(r&&r.once)return kt(t,e,n,r,i);if(u(e)){for(var o=0;o<e.length;o++)Ct(t,e[o],n,r,i);return null}return n=Mt(n),vt(t)?t.nb(e,n,h(r)?!!r.capture:!!r,i):It(t,e,n,!1,r,i)}function It(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a,s,u=h(i)?!!i.capture:!!i,c=Pt(t);if(c||(t[Tt]=c=new St(t)),(n=c.add(e,n,r,u,o)).proxy)return n;if(a=Ot,r=s=ft?function(t){return a.call(s.src,s.listener,t)}:function(t){if(!(t=a.call(s.src,s.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)pt||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Nt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function kt(t,e,n,r,i){if(u(e)){for(var o=0;o<e.length;o++)kt(t,e[o],n,r,i);return null}return n=Mt(n),vt(t)?t.Oc(e,n,h(r)?!!r.capture:!!r,i):It(t,e,n,!0,r,i)}function Dt(t){if("number"!=typeof t&&t&&!t.Sa){var e=t.src;if(vt(e))e.Le(t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Nt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Pt(e))?(n.ye(t),0==n.xb&&(n.src=null,e[Tt]=null)):t.Vb()}}}function Nt(t){return t in _t?_t[t]:_t[t]="on"+t}function xt(t,e,n,r){var i=!0;if((t=Pt(t))&&(e=t.J[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.Sa&&(o=At(o,r),i=i&&!1!==o)}return i}function At(t,e){var n=t.listener,r=t.Ob||t.src;return t.Eb&&Dt(t),n.call(r,e)}function Ot(t,e){if(t.Sa)return!0;if(ft)return At(t,new yt(e,this));var n=e||a("window.event");e=new yt(n,this);var r=!0;if(!(n.keyCode<0||null!=n.returnValue)){t:{var i=!1;if(0==n.keyCode)try{n.keyCode=-1;break t}catch(t){i=!0}(i||null==n.returnValue)&&(n.returnValue=!0)}for(n=[],i=e.currentTarget;i;i=i.parentNode)n.push(i);for(t=t.type,i=n.length-1;!e.Ea&&0<=i;i--){e.currentTarget=n[i];var o=xt(n[i],t,!0,e);r=r&&o}for(i=0;!e.Ea&&i<n.length;i++)e.currentTarget=n[i],o=xt(n[i],t,!1,e),r=r&&o}return r}function Pt(t){return(t=t[Tt])instanceof St?t:null}var Rt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mt(e){return f(e)?e:(e[Rt]||(e[Rt]=function(t){return e.handleEvent(t)}),e[Rt])}function Lt(){T.call(this),this.ka=new St(this),(this.Pe=this).Uc=null}w(Lt,T),Lt.prototype[gt]=!0,(e=Lt.prototype).addEventListener=function(t,e,n,r){Ct(this,t,e,n,r)},e.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(u(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=h(i)?!!i.capture:!!i,r=Mt(r),vt(e)?e.ed(n,r,i,o):e&&(e=Pt(e))&&(n=e.jb(n,r,i,o))&&Dt(n)}(this,t,e,n,r)},e.dispatchEvent=function(t){var e,n=this.Uc;if(n)for(e=[];n;n=n.Uc)e.push(n);n=this.Pe;var r=t.type||t;if(s(t))t=new dt(t,n);else if(t instanceof dt)t.target=t.target||n;else{var i=t;Q(t=new dt(r,n),i)}if(i=!0,e)for(var o=e.length-1;!t.Ea&&0<=o;o--){var a=t.currentTarget=e[o];i=a.Lb(r,!0,t)&&i}if(t.Ea||(i=(a=t.currentTarget=n).Lb(r,!0,t)&&i,t.Ea||(i=a.Lb(r,!1,t)&&i)),e)for(o=0;!t.Ea&&o<e.length;o++)i=(a=t.currentTarget=e[o]).Lb(r,!1,t)&&i;return i},e.F=function(){Lt.L.F.call(this),this.pg(),this.Uc=null},e.nb=function(t,e,n,r){return this.ka.add(String(t),e,!1,n,r)},e.Oc=function(t,e,n,r){return this.ka.add(String(t),e,!0,n,r)},e.ed=function(t,e,n,r){this.ka.remove(String(t),e,n,r)},e.Le=function(t){this.ka.ye(t)},e.pg=function(){this.ka&&this.ka.pb(void 0)},e.Lb=function(t,e,n){if(!(t=this.ka.J[String(t)]))return!0;t=t.concat();for(var r=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.Sa&&o.capture==e){var a=o.listener,s=o.Ob||o.src;o.Eb&&this.Le(o),r=!1!==a.call(s,n)&&r}}return r&&0!=n.Be},e.jb=function(t,e,n,r){return this.ka.jb(String(t),e,n,r)};var Ft=l.JSON.stringify;function Ut(t,e){this.Sf=100,this.ef=t,this.ug=e,this.Zb=0,this.Pb=null}function qt(){this.lc=this.Va=null}Ut.prototype.get=function(){if(0<this.Zb){this.Zb--;var t=this.Pb;this.Pb=t.next,t.next=null}else t=this.ef();return t},Ut.prototype.put=function(t){this.ug(t),this.Zb<this.Sf&&(this.Zb++,t.next=this.Pb,this.Pb=t)};var Bt,jt,Vt=new Ut(function(){return new Wt},function(t){t.reset()});function Wt(){this.next=this.scope=this.Gc=null}function zt(t){l.setTimeout(function(){throw t},0)}function Kt(){if(l.Promise&&l.Promise.resolve){var t=l.Promise.resolve(void 0);jt=function(){t.then(Ht)}}else jt=function(){var t=Ht;!f(l.setImmediate)||l.Window&&l.Window.prototype&&!B("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(Bt||(Bt=function(){var t=l.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!B("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=g(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0===t||B("Trident")||B("MSIE"))return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).rd;n.rd=null,t()}},function(t){r.next={rd:t},r=r.next,e.port2.postMessage(0)}}()),Bt(t)):l.setImmediate(t)}}qt.prototype.add=function(t,e){var n=this.Af();n.set(t,e),this.lc?this.lc.next=n:this.Va=n,this.lc=n},qt.prototype.remove=function(){var t=null;return this.Va&&(t=this.Va,this.Va=this.Va.next,this.Va||(this.lc=null),t.next=null),t},qt.prototype.wg=function(t){Vt.put(t)},qt.prototype.Af=function(){return Vt.get()},Wt.prototype.set=function(t,e){this.Gc=t,this.scope=e,this.next=null};var Qt=!(Wt.prototype.reset=function(){this.next=this.scope=this.Gc=null}),Gt=new qt;function Ht(){for(var t;t=Gt.remove();){try{t.Gc.call(t.scope)}catch(t){zt(t)}Gt.wg(t)}Qt=!1}function Yt(t,e){Lt.call(this),this.Na=t||1,this.wb=e||l,this.nd=g(this.Rg,this),this.ie=b()}function Xt(t,e,n){if(f(t))n&&(t=g(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function $t(t,e,n){T.call(this),this.Uf=null!=n?g(t,n):t,this.Na=e,this.Xe=g(this.fg,this),this.qc=[]}function Jt(t){T.call(this),this.i=t,this.o={}}w(Yt,Lt),(e=Yt.prototype).enabled=!1,e.B=null,e.setInterval=function(t){this.Na=t,this.B&&this.enabled?(this.stop(),this.start()):this.B&&this.stop()},e.Rg=function(){if(this.enabled){var t=b()-this.ie;0<t&&t<.8*this.Na?this.B=this.wb.setTimeout(this.nd,this.Na-t):(this.B&&(this.wb.clearTimeout(this.B),this.B=null),this.ff(),this.enabled&&(this.stop(),this.start()))}},e.ff=function(){this.dispatchEvent("tick")},e.start=function(){this.enabled=!0,this.B||(this.B=this.wb.setTimeout(this.nd,this.Na),this.ie=b())},e.stop=function(){this.enabled=!1,this.B&&(this.wb.clearTimeout(this.B),this.B=null)},e.F=function(){Yt.L.F.call(this),this.stop(),delete this.wb},w($t,T),(e=$t.prototype).Ta=!1,e.ob=0,e.B=null,e.mf=function(t){this.qc=arguments,this.B||this.ob?this.Ta=!0:this.Cc()},e.stop=function(){this.B&&(l.clearTimeout(this.B),this.B=null,this.Ta=!1,this.qc=[])},e.pause=function(){this.ob++},e.resume=function(){this.ob--,this.ob||!this.Ta||this.B||(this.Ta=!1,this.Cc())},e.F=function(){$t.L.F.call(this),this.stop()},e.fg=function(){this.B=null,this.Ta&&!this.ob&&(this.Ta=!1,this.Cc())},e.Cc=function(){this.B=Xt(this.Xe,this.Na),this.Uf.apply(null,this.qc)},w(Jt,T);var Zt=[];function te(t,e,n){this.reset(t,e,n,void 0,void 0)}function ee(t){this.pe=t,this.Zd=this.uc=this.mb=this.$b=null}function ne(t,e){this.name=t,this.value=e}(e=Jt.prototype).nb=function(t,e,n,r){return this.Tf(t,e,n,r)},e.Tf=function(t,e,n,r){u(e)||(e&&(Zt[0]=e.toString()),e=Zt);for(var i=0;i<e.length;i++){var o=Ct(t,e[i],n||this.handleEvent,r||!1,this.i||this);if(!o)break;this.o[o.key]=o}return this},e.Oc=function(t,e,n,r){return this.je(t,e,n,r)},e.je=function(t,e,n,r,i){if(u(e))for(var o=0;o<e.length;o++)this.je(t,e[o],n,r,i);else{if(!(t=kt(t,e,n||this.handleEvent,r,i||this.i||this)))return this;this.o[t.key]=t}return this},e.ed=function(t,e,n,r,i){if(u(e))for(var o=0;o<e.length;o++)this.ed(t,e[o],n,r,i);else n=n||this.handleEvent,r=h(r)?!!r.capture:!!r,i=i||this.i||this,n=Mt(n),r=!!r,(e=vt(t)?t.jb(e,n,r,i):t&&(t=Pt(t))?t.jb(e,n,r,i):null)&&(Dt(e),delete this.o[e.key])},e.pb=function(){j(this.o,function(t,e){this.o.hasOwnProperty(e)&&Dt(t)},this),this.o={}},e.F=function(){Jt.L.F.call(this),this.pb()},e.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},te.prototype.Md=null,te.prototype.reset=function(t,e,n,r,i){this.mb=t,delete this.Md},te.prototype.Bg=function(t){this.Md=t},te.prototype.Ge=function(t){this.mb=t},ne.prototype.toString=function(){return this.name};var re=new ne("SEVERE",1e3),ie=new ne("WARNING",900),oe=new ne("INFO",800),ae=new ne("CONFIG",700),se=new ne("FINE",500);(e=ee.prototype).getName=function(){return this.pe},e.getParent=function(){return this.$b},e.pf=function(){return this.uc||(this.uc={}),this.uc},e.Ge=function(t){this.mb=t},e.Qd=function(){return this.mb?this.mb:this.$b?this.$b.Qd():(function(t,e){throw new E("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}("Root logger has no level set."),null)},e.Pf=function(t){return t.value>=this.Qd().value},e.log=function(t,e,n){this.Pf(t)&&(f(e)&&(e=e()),this.gf(this.uf(t,e,n)))},e.uf=function(t,e,n){return t=new te(t,String(e),this.pe),n&&t.Bg(n),t},e.ca=function(t,e){this.log(re,t,e)},e.T=function(t,e){this.log(ie,t,e)},e.info=function(t,e){this.log(oe,t,e)},e.lf=function(t){this.log(se,t,void 0)},e.gf=function(t){for(var e=this;e;)e.We(t),e=e.getParent()},e.We=function(t){if(this.Zd)for(var e,n=0;e=this.Zd[n];n++)e(t)},e.Fg=function(t){this.$b=t},e.Qe=function(t,e){this.pf()[t]=e};var ue={},ce=null;function le(t){var e;if(ce||(ce=new ee(""),(ue[""]=ce).Ge(ae)),!(e=ue[t])){e=new ee(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=le(t.substr(0,n))).Qe(r,e),e.Fg(n),ue[t]=e}return e}function fe(t,e){t&&t.info(e,void 0)}function he(t,e){t&&t.lf(e)}function pe(){this.s=le("goog.labs.net.webChannel.WebChannelDebug"),this.Wc=!0}(e=pe.prototype).Id=function(){this.Wc=!1},e.Tg=function(t,e,n,r,i){var o=this;this.info(function(){return"XMLHTTP REQ ("+n+") [attempt "+r+"]: "+t+"\n"+e+"\n"+o.Xf(i)})},e.Ug=function(t,e,n,r,i,o){this.info(function(){return"XMLHTTP RESP ("+n+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+i+" "+o})},e.Wa=function(t,e,n){var r=this;this.info(function(){return"XMLHTTP TEXT ("+t+"): "+r.ng(e)+(n?" "+n:"")})},e.Sg=function(t){this.info(function(){return"TIMEOUT: "+t})},e.debug=function(t){he(this.s,t)},e.cb=function(t,e){var n=this.s;n&&n.ca(e||"Exception",t)},e.info=function(t){fe(this.s,t)},e.T=function(t){var e=this.s;e&&e.T(t,void 0)},e.ca=function(t){var e=this.s;e&&e.ca(t,void 0)},e.ng=function(e){if(!this.Wc)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(var n=0;n<t.length;n++)u(t[n])&&this.Wf(t[n]);return Ft(t)}catch(t){return this.debug("Exception parsing expected JS array - probably was not JS"),e}},e.Wf=function(t){if(!(t.length<2||(!u(t=t[1])||t.length<1))){var e=t[0];if("noop"!=e&&"stop"!=e&&"close"!=e)for(e=1;e<t.length;e++)t[e]=""}},e.Xf=function(t){if(!this.Wc)return t;if(!t)return null;var e="";t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].split("=");if(1<r.length){var i=r[0];r=r[1];var o=i.split("_");e=2<=o.length&&"type"==o[1]?e+(i+"=")+r+"&":e+(i+"=redacted&")}}return e};var de=new Lt;function ye(t){dt.call(this,"serverreachability",t)}function me(t){de.dispatchEvent(new ye(de,t))}function ge(t,e){dt.call(this,"statevent",t),this.stat=e}function ve(t){de.dispatchEvent(new ge(de,t))}function be(t,e,n){dt.call(this,"timingevent",t),this.size=e,this.rtt=n}function we(t,e){if(!f(t))throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){t()},e)}w(ye,dt),w(ge,dt),w(be,dt);var Se={NO_ERROR:0,Vg:1,bh:2,ah:3,Yg:4,$g:5,dh:6,Ne:7,TIMEOUT:8,gh:9},Ee={Xg:"complete",kh:"success",Oe:"error",Ne:"abort",ih:"ready",jh:"readystatechange",TIMEOUT:"timeout",eh:"incrementaldata",hh:"progress",Zg:"downloadprogress",lh:"uploadprogress"};function Te(){}function _e(){}Te.prototype.pd=null,Te.prototype.Vd=function(){return this.pd||(this.pd=this.Mf())};var Ce,Ie={OPEN:"a",Wg:"b",Oe:"c",fh:"d"};function ke(){dt.call(this,"d")}function De(){dt.call(this,"c")}function Ne(){}function xe(t,e,n,r,i){this.b=t,this.a=e,this.ra=n,this.R=r,this.Xc=i||1,this.Fc=new Jt(this),this.Ua=45e3,t=Z?125:void 0,this.Vc=new Yt(t),this.A=null,this.S=!1,this.Da=this.pa=this.ua=this.ic=this.qb=this.hd=this.Ga=null,this.ba=[],this.h=null,this.Bb=0,this.I=this.Fa=null,this.w=-1,this.Za=!1,this.Ra=0,this.ac=null,this.lb=this.Ed=this.yc=!1}w(ke,dt),w(De,dt),w(Ne,Te),Ne.prototype.Dd=function(){var t=this.Wd();return t?new ActiveXObject(t):new XMLHttpRequest},Ne.prototype.Mf=function(){var t={};return this.Wd()&&(t[0]=!0,t[1]=!0),t},Ne.prototype.Wd=function(){if(this.be||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return this.be;for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e=0;e<t.length;e++){var n=t[e];try{return new ActiveXObject(n),this.be=n}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")},Ce=new Ne;var Ae={},Oe={};function Pe(t){if(t.H&&"function"==typeof t.H)return t.H();if(s(t))return t.split("");if(c(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}return V(t)}function Re(t,e,n){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,n);else if(c(t)||s(t))D(t,e,n);else{if(t.W&&"function"==typeof t.W)var r=t.W();else if(t.H&&"function"==typeof t.H)r=void 0;else if(c(t)||s(t)){r=[];for(var i=t.length,o=0;o<i;o++)r.push(o)}else r=W(t);o=(i=Pe(t)).length;for(var a=0;a<o;a++)e.call(n,i[a],r&&r[a],t)}}function Me(t,e){this.D={},this.o=[],this.j=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else t&&this.addAll(t)}function Le(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(e=xe.prototype).ga=function(t){this.A=t},e.setTimeout=function(t){this.Ua=t},e.He=function(t){this.Ra=t},e.Gg=function(t){this.ba=t},e.la=function(){return this.ba},e.kd=function(t,e){this.ic=1,this.ua=t.clone().Ub(),this.Da=e,this.yc=!0,this.Ce(null)},e.jd=function(t,e,n){this.ic=1,this.ua=t.clone().Ub(),this.Da=null,this.yc=e,this.Ce(n)},e.Ce=function(t){this.qb=b(),this.eb(),this.pa=this.ua.clone(),this.pa.dc("t",this.Xc),this.Bb=0,this.h=this.b.Jb(this.b.fc()?t:null),0<this.Ra&&(this.ac=new $t(g(this.Me,this,this.h),this.Ra)),this.Fc.nb(this.h,"readystatechange",this.mg),t=this.A?z(this.A):{},this.Da?(this.Fa||(this.Fa="POST"),t["Content-Type"]="application/x-www-form-urlencoded",this.h.send(this.pa,this.Fa,this.Da,t)):(this.Fa="GET",this.h.send(this.pa,this.Fa,null,t)),me(1),this.a.Tg(this.Fa,this.pa,this.R,this.Xc,this.Da)},e.mg=function(t){t=t.target;var e=this.ac;e&&3==t.ma()?(this.a.debug("Throttling readystatechange."),e.mf()):this.Me(t)},e.Me=function(t){try{t==this.h?this.hg():this.a.T("Called back with an unexpected xmlhttp")}catch(t){if(this.a.debug("Failed call to OnXmlHttpReadyStateChanged_"),this.h&&this.h.ya()){var e=this;this.a.cb(t,function(){return"ResponseText: "+e.h.ya()})}else this.a.cb(t,"No response text")}},e.hg=function(){var t=this.h.ma(),e=this.h.Ud(),n=this.h.za();if(!(t<3||3==t&&!Z&&!this.h.ya())){this.Za||4!=t||7==e||me(8==e||n<=0?3:2),this.Fb();var r=this.h.za();if(this.w=r,!(e=this.h.ya())){var i=this;this.a.debug(function(){return"No response text for uri "+i.pa+" status "+r})}if(this.S=200==r,this.a.Ug(this.Fa,this.pa,this.R,this.Xc,t,r),this.S){if(this.Ig()){if(!(n=this.sf()))return this.S=!1,this.I=3,ve(12),this.a.T("XMLHTTP Missing X_HTTP_INITIAL_RESPONSE ("+this.R+")"),this.Ia(),void this.Kb();this.a.Wa(this.R,n,"Initial handshake response via X-HTTP-Initial-Response"),this.lb=!0,this.Yc(n)}this.yc?(this.Fd(t,e),Z&&this.S&&3==t&&this.Ng()):(this.a.Wa(this.R,e,null),this.Yc(e)),4==t&&this.Ia(),this.S&&!this.Za&&(4==t?this.b.Tc(this):(this.S=!1,this.eb()))}else 400==r&&0<e.indexOf("Unknown SID")?(this.I=3,ve(12),this.a.T("XMLHTTP Unknown SID ("+this.R+")")):(this.I=0,ve(13),this.a.T("XMLHTTP Bad status "+r+" ("+this.R+")")),this.Ia(),this.Kb()}},e.Ig=function(){return this.Ed&&!this.lb},e.sf=function(){if(this.h){var t=this.h.kb("X-HTTP-Initial-Response");if(t&&!R(t))return t}return null},e.Ag=function(){this.Ed=!0},e.Fd=function(t,e){for(var n=!0;!this.Za&&this.Bb<e.length;){var r=this.vf(e);if(r==Oe){4==t&&(this.I=4,ve(14),n=!1),this.a.Wa(this.R,null,"[Incomplete Response]");break}if(r==Ae){this.I=4,ve(15),this.a.Wa(this.R,e,"[Invalid Chunk]"),n=!1;break}this.a.Wa(this.R,r,null),this.Yc(r)}4==t&&0==e.length&&(this.I=1,ve(16),n=!1),this.S=this.S&&n,n||(this.a.Wa(this.R,e,"[Invalid Chunked Response]"),this.Ia(),this.Kb())},e.kg=function(){if(this.h){var t=this.h.ma(),e=this.h.ya();this.Bb<e.length&&(this.Fb(),this.Fd(t,e),this.S&&4!=t&&this.eb())}},e.Ng=function(){this.Fc.nb(this.Vc,"tick",this.kg),this.Vc.start()},e.vf=function(t){var e=this.Bb,n=t.indexOf("\n",e);return-1==n?Oe:(e=Number(t.substring(e,n)),isNaN(e)?Ae:(n+=1)+e>t.length?Oe:(t=t.substr(n,e),this.Bb=n+e,t))},e.yg=function(t){this.ic=2,this.ua=t.clone().Ub(),t=!1,l.navigator&&l.navigator.sendBeacon&&(t=l.navigator.sendBeacon(this.ua.toString(),"")),!t&&l.Image&&((new Image).src=this.ua,t=!0),t||(this.h=this.b.Jb(null),this.h.send(this.ua)),this.qb=b(),this.eb()},e.cancel=function(){this.Za=!0,this.Ia()},e.tg=function(t){t&&this.setTimeout(t),this.Ga&&(this.Fb(),this.eb())},e.eb=function(){this.hd=b()+this.Ua,this.Ke(this.Ua)},e.Ke=function(t){if(null!=this.Ga)throw Error("WatchDog timer not null");this.Ga=we(g(this.gg,this),t)},e.Fb=function(){this.Ga&&(l.clearTimeout(this.Ga),this.Ga=null)},e.gg=function(){this.Ga=null;var t=b();0<=t-this.hd?this.Df():(this.a.T("WatchDog timer called too early"),this.Ke(this.hd-t))},e.Df=function(){this.S&&this.a.ca("Received watchdog timeout even though request loaded successfully"),this.a.Sg(this.pa),2!=this.ic&&(me(3),ve(17)),this.Ia(),this.I=2,this.Kb()},e.Kb=function(){this.b.de()||this.Za||this.b.Tc(this)},e.Ia=function(){this.Fb();var t=this.ac;t&&"function"==typeof t.bb&&t.bb(),this.ac=null,this.Vc.stop(),this.Fc.pb(),this.h&&(t=this.h,this.h=null,t.abort(),t.bb())},e.Hc=function(){return this.I},e.Yc=function(t){try{this.b.ue(this,t),me(4)}catch(t){this.a.cb(t,"Error in httprequest callback")}},(e=Me.prototype).C=function(){return this.j},e.H=function(){this.wc();for(var t=[],e=0;e<this.o.length;e++)t.push(this.D[this.o[e]]);return t},e.W=function(){return this.wc(),this.o.concat()},e.va=function(t){return Le(this.D,t)},e.X=function(){return 0==this.j},e.clear=function(){this.D={},this.j=this.o.length=0},e.remove=function(t){return!!Le(this.D,t)&&(delete this.D[t],this.j--,this.o.length>2*this.j&&this.wc(),!0)},e.wc=function(){if(this.j!=this.o.length){for(var t=0,e=0;t<this.o.length;){var n=this.o[t];Le(this.D,n)&&(this.o[e++]=n),t++}this.o.length=e}if(this.j!=this.o.length){var r={};for(e=t=0;t<this.o.length;)Le(r,n=this.o[t])||(r[this.o[e++]=n]=1),t++;this.o.length=e}},e.get=function(t,e){return Le(this.D,t)?this.D[t]:e},e.set=function(t,e){Le(this.D,t)||(this.j++,this.o.push(t)),this.D[t]=e},e.addAll=function(t){if(t instanceof Me)for(var e=t.W(),n=0;n<e.length;n++)this.set(e[n],t.get(e[n]));else for(e in t)this.set(e,t[e])},e.forEach=function(t,e){for(var n=this.W(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}},e.clone=function(){return new Me(this)};var Fe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ue(t,e){var n;this.xa=this.zb=this.qa="",this.Ca=null,this.ib=this.K="",this.O=this.Qf=!1,t instanceof Ue?(this.O=void 0!==e?e:t.O,this.tb(t.qa),this.cd(t.zb),this.rb(t.xa),this.sb(t.Ca),this.ec(t.K),this.bd(t.P.clone()),this.$c(t.ib)):t&&(n=String(t).match(Fe))?(this.O=!!e,this.tb(n[1]||"",!0),this.cd(n[2]||"",!0),this.rb(n[3]||"",!0),this.sb(n[4]),this.ec(n[5]||"",!0),this.bd(n[6]||"",!0),this.$c(n[7]||"",!0)):(this.O=!!e,this.P=new Ge(null,this.O))}function qe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Be(t,e,n){return s(t)?(t=encodeURI(t).replace(e,je),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function je(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}(e=Ue.prototype).toString=function(){var t=[],e=this.qa;e&&t.push(Be(e,Ve,!0),":");var n=this.xa;return(n||"file"==e)&&(t.push("//"),(e=this.zb)&&t.push(Be(e,Ve,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.Ca)&&t.push(":",String(n))),(n=this.K)&&(this.Ic()&&"/"!=n.charAt(0)&&t.push("/"),t.push(Be(n,"/"==n.charAt(0)?ze:We,!0))),(n=this.Rd())&&t.push("?",n),(n=this.ib)&&t.push("#",Be(n,Qe)),t.join("")},e.resolve=function(t){var e=this.clone(),n=t.Hf();n?e.tb(t.qa):n=t.If(),n?e.cd(t.zb):n=t.Ic(),n?e.rb(t.xa):n=t.Ff();var r=t.K;if(n)e.sb(t.Ca);else if(n=t.ae()){if("/"!=r.charAt(0))if(this.Ic()&&!this.ae())r="/"+r;else{var i=e.K.lastIndexOf("/");-1!=i&&(r=e.K.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.ec(r):n=t.Gf(),n?e.bd(t.P.clone()):n=t.Ef(),n&&e.$c(t.ib),e},e.clone=function(){return new Ue(this)},e.tb=function(t,e){this.U(),(this.qa=e?qe(t,!0):t)&&(this.qa=this.qa.replace(/:$/,""))},e.Hf=function(){return!!this.qa},e.cd=function(t,e){this.U(),this.zb=e?qe(t):t},e.If=function(){return!!this.zb},e.rb=function(t,e){this.U(),this.xa=e?qe(t,!0):t},e.Ic=function(){return!!this.xa},e.sb=function(t){if(this.U(),t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);this.Ca=t}else this.Ca=null},e.Ff=function(){return null!=this.Ca},e.ec=function(t,e){this.U(),this.K=e?qe(t,!0):t},e.ae=function(){return!!this.K},e.Gf=function(){return""!==this.P.toString()},e.bd=function(t,e){this.U(),t instanceof Ge?(this.P=t,this.P.ad(this.O)):(e||(t=Be(t,Ke)),this.P=new Ge(t,this.O))},e.Rd=function(){return this.P.toString()},e.getQuery=function(){return this.Rd()},e.l=function(t,e){this.U(),this.P.set(t,e)},e.dc=function(t,e){this.U(),u(e)||(e=[String(e)]),this.P.Ie(t,e)},e.$c=function(t,e){this.U(),this.ib=e?qe(t):t},e.Ef=function(){return!!this.ib},e.Ub=function(){return this.U(),this.l("zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^b()).toString(36)),this},e.removeParameter=function(t){return this.U(),this.P.remove(t),this},e.U=function(){if(this.Qf)throw Error("Tried to modify a read-only Uri")},e.ad=function(t){this.O=t,this.P&&this.P.ad(t)};var Ve=/[#\/\?@]/g,We=/[#\?:]/g,ze=/[#\?]/g,Ke=/[#\?@]/g,Qe=/#/g;function Ge(t,e){this.j=this.m=null,this.ja=t||null,this.O=!!e}function He(t,e){this.b=t,this.a=e,this.f=this.A=null,this.bc=!1,this.K=null,this.w=-1,this.Ad=this.na=null}function Ye(){this.od=this.$d=null}function Xe(t){this.D=new Me,t&&this.addAll(t)}function $e(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[p]||(t[p]=++d)):e.substr(0,1)+t}function Je(t,e){this.Pc=t,this.map=e,this.context=null}function Ze(t){this.me=t||tn,t=l.PerformanceNavigationTiming?0<(t=l.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(l.vc&&l.vc.ke&&l.vc.ke()&&l.vc.ke().nh),this.Xb=t?this.me:1,this.v=null,1<this.Xb&&(this.v=new Xe),this.f=null,this.ba=[]}(e=Ge.prototype).$=function(){if(!this.m&&(this.m=new Me,this.j=0,this.ja)){var n=this;!function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(this.ja,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)})}},e.C=function(){return this.$(),this.j},e.add=function(t,e){this.$(),this.Oa(),t=this.Ma(t);var n=this.m.get(t);return n||this.m.set(t,n=[]),n.push(e),this.j+=1,this},e.remove=function(t){return this.$(),t=this.Ma(t),!!this.m.va(t)&&(this.Oa(),this.j-=this.m.get(t).length,this.m.remove(t))},e.clear=function(){this.Oa(),this.m=null,this.j=0},e.X=function(){return this.$(),0==this.j},e.va=function(t){return this.$(),t=this.Ma(t),this.m.va(t)},e.forEach=function(n,r){this.$(),this.m.forEach(function(t,e){D(t,function(t){n.call(r,t,e,this)},this)},this)},e.W=function(){this.$();for(var t=this.m.H(),e=this.m.W(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},e.H=function(t){this.$();var e=[];if(s(t))this.va(t)&&(e=O(e,this.m.get(this.Ma(t))));else{t=this.m.H();for(var n=0;n<t.length;n++)e=O(e,t[n])}return e},e.set=function(t,e){return this.$(),this.Oa(),t=this.Ma(t),this.va(t)&&(this.j-=this.m.get(t).length),this.m.set(t,[e]),this.j+=1,this},e.get=function(t,e){return t&&0<(t=this.H(t)).length?String(t[0]):e},e.Ie=function(t,e){this.remove(t),0<e.length&&(this.Oa(),this.m.set(this.Ma(t),P(e)),this.j+=e.length)},e.toString=function(){if(this.ja)return this.ja;if(!this.m)return"";for(var t=[],e=this.m.W(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.H(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.ja=t.join("&")},e.Oa=function(){this.ja=null},e.clone=function(){var t=new Ge;return t.ja=this.ja,this.m&&(t.m=this.m.clone(),t.j=this.j),t},e.Ma=function(t){return t=String(t),this.O&&(t=t.toLowerCase()),t},e.ad=function(t){t&&!this.O&&(this.$(),this.Oa(),this.m.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(this.remove(e),this.Ie(n,t))},this)),this.O=t},e.extend=function(t){for(var e=0;e<arguments.length;e++)Re(arguments[e],function(t,e){this.add(e,t)},this)},w(function(){},function(){}),(e=He.prototype).g=null,e.ga=function(t){this.A=t},e.connect=function(t){this.K=t,t=this.b.Sd(this.K),ve(3);var e=this.b.Ib.$d;null!=e?(this.na=this.b.$a(e[0]),this.g=1,this.xd()):(t.dc("MODE","init"),!this.b.ta&&this.b.aa&&t.dc("X-HTTP-Session-Id",this.b.aa),this.f=new xe(this,this.a,void 0,void 0,void 0),this.f.ga(this.A),this.f.jd(t,!1,null),this.g=0)},e.xd=function(){this.a.debug("TestConnection: starting stage 2");var t=this.b.Ib.od;if(null!=t)this.a.debug(function(){return"Buffered"}),ve(4),t?(ve(10),this.b.ub(this,!1)):(ve(11),this.b.ub(this,!0));else{this.f=new xe(this,this.a,void 0,void 0,void 0),this.f.ga(this.A);var e=this.b.Pd(this.na,this.K);ve(4),e.dc("TYPE","xmlhttp");var n=this.b.aa,r=this.b.Kc;n&&r&&e.l(n,r),this.f.jd(e,!1,this.na)}},e.Jb=function(t){return this.b.Jb(t)},e.abort=function(){this.f&&(this.f.cancel(),this.f=null),this.w=-1},e.de=function(){return!1},e.ue=function(t,e){if(this.w=t.w,0==this.g)if(this.a.debug("TestConnection: Got data for stage 1"),this.pc(t),e){try{var n=this.b.kc.zc(e)}catch(t){return this.a.cb(t),void this.b.dd(this)}this.na=this.b.$a(n[0])}else this.a.debug("TestConnection: Null responseText"),this.b.dd(this);else 1==this.g&&(this.bc?ve(6):"11111"==e?(ve(5),this.bc=!0,this.Ze()&&(this.w=200,this.f.cancel(),this.a.debug("Test connection succeeded; using streaming connection"),ve(11),this.b.ub(this,!0))):(ve(7),this.bc=!1))},e.Tc=function(){this.w=this.f.w,this.f.S?0==this.g?(this.g=1,this.a.debug("TestConnection: request complete for initial check"),this.xd()):1==this.g&&(this.a.debug("TestConnection: request complete for stage 2"),this.bc?(this.a.debug("Test connection succeeded; using streaming connection"),ve(11),this.b.ub(this,!0)):(this.a.debug("Test connection failed; not using streaming"),ve(10),this.b.ub(this,!1))):(this.a.debug("TestConnection: request failed, in state "+this.g),0==this.g?ve(8):1==this.g&&ve(9),this.b.dd(this))},e.pc=function(t){if(!this.b.ta&&(t=t.h)){var e=t.kb("X-Client-Wire-Protocol");this.Ad=e||null,this.b.aa&&((t=t.kb("X-HTTP-Session-Id"))?this.b.Fe(t):this.a.T("Missing X_HTTP_SESSION_ID in the handshake response"))}},e.fc=function(){return this.b.fc()},e.Ba=function(){return this.b.Ba()},e.Ze=function(){return!$||10<=Number(at)},(e=Xe.prototype).C=function(){return this.D.C()},e.add=function(t){this.D.set($e(t),t)},e.addAll=function(t){for(var e=(t=Pe(t)).length,n=0;n<e;n++)this.add(t[n])},e.pb=function(t){for(var e=(t=Pe(t)).length,n=0;n<e;n++)this.remove(t[n])},e.remove=function(t){return this.D.remove($e(t))},e.clear=function(){this.D.clear()},e.X=function(){return this.D.X()},e.contains=function(t){return this.D.va($e(t))},e.H=function(){return this.D.H()},e.clone=function(){return new Xe(this)};var tn=10;function en(){this.xg=this.rg=void 0}function nn(){this.jg=new en}function rn(e,t,n,r,i){try{e.debug(n),t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(t){e.cb(t)}}(e=Ze.prototype).ld=function(t){this.v||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(this.Xb=this.me,this.v=new Xe,this.f&&(this.oc(this.f),this.f=null))},e.ee=function(){return!!this.f||!!this.v&&this.v.C()>=this.Xb},e.xf=function(){return this.f?1:this.v?this.v.C():0},e.Jc=function(t){return this.f?this.f==t:!!this.v&&this.v.contains(t)},e.oc=function(t){this.v?this.v.add(t):this.f=t},e.ze=function(t){this.f&&this.f==t?this.f=null:this.v&&this.v.contains(t)&&this.v.remove(t)},e.cancel=function(){this.ba=this.la(),this.f?(this.f.cancel(),this.f=null):this.v&&!this.v.X()&&(D(this.v.H(),function(t){t.cancel()}),this.v.clear())},e.la=function(){if(null!=this.f)return this.ba.concat(this.f.la());if(null==this.v||this.v.X())return P(this.ba);var e=this.ba;return D(this.v.H(),function(t){e=e.concat(t.la())}),e},e.Re=function(t){this.ba=this.ba.concat(t)},e.$e=function(){this.ba.length=0},en.prototype.stringify=function(t){return l.JSON.stringify(t,this.rg)},en.prototype.parse=function(t){return l.JSON.parse(t,this.xg)},nn.prototype.hf=function(t,r,e){var i=e||"";try{Re(t,function(t,e){var n=t;h(t)&&(n=Ft(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}},nn.prototype.jf=function(t,e,n){for(var r=-1;;){var i=["count="+e];-1==r?0<e?(r=t[0].Pc,i.push("ofs="+r)):r=0:i.push("ofs="+r);for(var o=!0,a=0;a<e;a++){var s=t[a].Pc,u=t[a].map;if((s-=r)<0)r=Math.max(0,t[a].Pc-100),o=!1;else try{this.hf(u,i,"req"+s+"_")}catch(t){n&&n(u)}}if(o)return i.join("&")}},nn.prototype.zc=function(t){return this.jg.parse(t)};var on=l.JSON.parse;function an(t){Lt.call(this),this.headers=new Me,this.Xa=t||null,this.ha=!1,this.mc=this.c=null,this.ge=this.Tb="",this.Pa=0,this.I="",this.Aa=this.Lc=this.Qb=this.Ec=!1,this.vb=0,this.hc=null,this.Ae=sn,this.jc=this.lg=this.Ab=!1}w(an,Lt);var sn="";an.prototype.s=le("goog.net.XhrIo");var un=/^https?$/i,cn=["POST","PUT"];function ln(t){return"content-type"==t.toLowerCase()}function fn(t,e){return{type:e,lengthComputable:t.lengthComputable,loaded:t.loaded,total:t.total}}function hn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;var i;if(i="",j(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,s(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=t.indexOf("#"))<0&&(n=t.length),(r=t.indexOf("?"))<0||n<r){r=n;var o=""}else o=t.substring(r+1,n);n=(t=[t.substr(0,r),o,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return t.l(e,n),t}function pn(t){this.Bd=22,this.De=0,this.M=[],this.a=new pe,this.Ib=new Ye,this.na=this.md=this.hb=this.K=this.u=this.Kc=this.aa=this.gb=this.N=this.Rb=this.A=null,this.Te=!0,this.ag=this.Yb=0,this.kf=!!a("internalChannelParams.failFast",t),this.fd=this.Ja=this.wa=this.ia=this.ea=this.i=null,this.Se=!0,this.w=this.he=this.Sb=-1,this.rc=this.Ha=this.La=0,this.Ve=a("internalChannelParams.baseRetryDelayMs",t)||5e3,this.vg=a("internalChannelParams.retryDelaySeedMs",t)||1e4,this.nf=a("internalChannelParams.forwardChannelMaxRetries",t)||2,this.Od=a("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Xa=t&&t.oh||void 0,this.Db=void 0,this.Ra=0,this.gc=t&&t.supportsCrossDomainXhr||!1,this.ra="",this.G=new Ze(t&&t.concurrentRequestLimit),this.kc=new nn,this.ta=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.Nd=t&&t.fastHandshake||!1)&&!this.ta&&(this.a.T("Force backgroundChannelTest when fastHandshake is enabled."),this.ta=!0),t&&t.Id&&this.a.Id()}function dn(){}function yn(){if($&&!(10<=Number(at)))throw Error("Environmental error: no available transport.")}function mn(t,e){Lt.call(this),this.b=new pn(e),this.yb=t,this.Qg=e&&e.testUrl?e.testUrl:function(t){for(var e=t,n=1;n<arguments.length;n++){var r,i=arguments[n];e=0==i.lastIndexOf("/",0)?i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),r?e+i:e+"/"+i)}return e}(this.yb,"test"),this.s=le("goog.labs.net.webChannel.WebChannelBaseTransport"),this.Rc=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.b.ga(t),t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.zd&&(t?t["X-WebChannel-Client-Profile"]=e.zd:t={"X-WebChannel-Client-Profile":e.zd}),this.b.Eg(t),(t=e&&e.httpHeadersOverwriteParam)&&!R(t)&&this.b.Cg(t),this.Og=e&&e.supportsCrossDomainXhr||!1,this.zg=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!R(e)&&(this.b.Dg(e),null!==(t=this.Rc)&&e in t&&(e in(t=this.Rc)&&delete t[e],(t=this.s)&&t.T("Ignore httpSessionIdParam also specified with messageUrlParams: "+e,void 0))),this.vd=new bn(this)}function gn(t){ke.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.ne=t)&&(t=this.ne,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function vn(t){De.call(this),this.status=1,this.errorCode=t}function bn(t){this.b=t}(e=an.prototype).Je=function(t){this.Ab=t},e.send=function(t,e,n,r){if(this.c)throw Error("[goog.net.XhrIo] Object is active with another request="+this.Tb+"; newUri="+t);e=e?e.toUpperCase():"GET",this.Tb=t,this.I="",this.Pa=0,this.ge=e,this.Ec=!1,this.ha=!0,this.c=this.df(),this.mc=this.Xa?this.Xa.Vd():Ce.Vd(),this.c.onreadystatechange=g(this.te,this),this.lg&&"onprogress"in this.c&&(this.c.onprogress=g(function(t){this.re(t,!0)},this),this.c.upload&&(this.c.upload.onprogress=g(this.re,this)));try{he(this.s,this.da("Opening Xhr")),this.Lc=!0,this.c.open(e,String(t),!0),this.Lc=!1}catch(t){return he(this.s,this.da("Error opening Xhr: "+t.message)),void this.Ld(t)}t=n||"";var i,o=this.headers.clone();r&&Re(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=ln,n=t.length,r=s(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:s(t)?t.charAt(e):t[e]}(o.W()),n=l.FormData&&t instanceof l.FormData,!(0<=I(cn,e))||r||n||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.c.setRequestHeader(e,t)},this),this.Ae&&(this.c.responseType=this.Ae),"withCredentials"in this.c&&this.c.withCredentials!==this.Ab&&(this.c.withCredentials=this.Ab);try{this.yd(),0<this.vb&&(this.jc=(i=this.c,$&&ut(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout),he(this.s,this.da("Will abort after "+this.vb+"ms if incomplete, xhr2 "+this.jc)),this.jc?(this.c.timeout=this.vb,this.c.ontimeout=g(this.Ua,this)):this.hc=Xt(this.Ua,this.vb,this)),he(this.s,this.da("Sending request")),this.Qb=!0,this.c.send(t),this.Qb=!1}catch(t){he(this.s,this.da("Send error: "+t.message)),this.Ld(t)}},e.df=function(){return this.Xa?this.Xa.Dd():Ce.Dd()},e.Ua=function(){void 0!==r&&this.c&&(this.I="Timed out after "+this.vb+"ms, aborting",this.Pa=8,he(this.s,this.da(this.I)),this.dispatchEvent("timeout"),this.abort(8))},e.Ld=function(t){this.ha=!1,this.c&&(this.Aa=!0,this.c.abort(),this.Aa=!1),this.I=t,this.Pa=5,this.Jd(),this.Gb()},e.Jd=function(){this.Ec||(this.Ec=!0,this.dispatchEvent("complete"),this.dispatchEvent("error"))},e.abort=function(t){this.c&&this.ha&&(he(this.s,this.da("Aborting")),this.ha=!1,this.Aa=!0,this.c.abort(),this.Aa=!1,this.Pa=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),this.Gb())},e.F=function(){this.c&&(this.ha&&(this.ha=!1,this.Aa=!0,this.c.abort(),this.Aa=!1),this.Gb(!0)),an.L.F.call(this)},e.te=function(){this.Ka||(this.Lc||this.Qb||this.Aa?this.se():this.eg())},e.eg=function(){this.se()},e.se=function(){if(this.ha&&void 0!==r)if(this.mc[1]&&4==this.ma()&&2==this.za())he(this.s,this.da("Local request error detected and ignored"));else if(this.Qb&&4==this.ma())Xt(this.te,0,this);else if(this.dispatchEvent("readystatechange"),this.Mc()){he(this.s,this.da("Request complete")),this.ha=!1;try{this.Rf()?(this.dispatchEvent("complete"),this.dispatchEvent("success")):(this.Pa=6,this.I=this.Yd()+" ["+this.za()+"]",this.Jd())}finally{this.Gb()}}},e.re=function(t,e){this.dispatchEvent(fn(t,"progress")),this.dispatchEvent(fn(t,e?"downloadprogress":"uploadprogress"))},e.Gb=function(e){if(this.c){this.yd();var t=this.c,n=this.mc[0]?i:null;this.mc=this.c=null,e||this.dispatchEvent("ready");try{t.onreadystatechange=n}catch(t){(e=this.s)&&e.ca("Problem encountered resetting onreadystatechange: "+t.message,void 0)}}},e.yd=function(){this.c&&this.jc&&(this.c.ontimeout=null),this.hc&&(l.clearTimeout(this.hc),this.hc=null)},e.Ba=function(){return!!this.c},e.Mc=function(){return 4==this.ma()},e.Rf=function(){var t=this.za();t:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}return e||0===t&&!this.Of()},e.Of=function(){var t=String(this.Tb).match(Fe)[1]||null;return!t&&l.self&&l.self.location&&(t=(t=l.self.location.protocol).substr(0,t.length-1)),un.test(t?t.toLowerCase():"")},e.ma=function(){return this.c?this.c.readyState:0},e.za=function(){try{return 2<this.ma()?this.c.status:-1}catch(t){return-1}},e.Yd=function(){try{return 2<this.ma()?this.c.statusText:""}catch(t){return he(this.s,"Can not get status: "+t.message),""}},e.ya=function(){try{return this.c?this.c.responseText:""}catch(t){return he(this.s,"Can not get responseText: "+t.message),""}},e.yf=function(t){if(this.c){var e=this.c.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),on(e)}},e.getResponseHeader=function(t){if(this.c&&this.Mc())return null===(t=this.c.getResponseHeader(t))?void 0:t},e.getAllResponseHeaders=function(){return this.c&&this.Mc()&&this.c.getAllResponseHeaders()||""},e.kb=function(t){return this.c?this.c.getResponseHeader(t):null},e.Ud=function(){return this.Pa},e.Hc=function(){return s(this.I)?this.I:String(this.I)},e.da=function(t){return t+" ["+this.ge+" "+this.Tb+" "+this.za()+"]"},(e=pn.prototype).tc=8,e.g=1,e.connect=function(t,e,n,r,i){this.a.debug("connect()"),ve(0),this.K=e,this.gb=n||{},r&&void 0!==i&&(this.gb.OSID=r,this.gb.OAID=i),this.ta&&(this.a.debug("connect() bypassed channel-test."),this.Ib.$d=[],this.Ib.od=!1),this.bf(t)},e.disconnect=function(){if(this.a.debug("disconnect()"),this.qd(),3==this.g){var t=this.Yb++,e=this.hb.clone();e.l("SID",this.ra),e.l("RID",t),e.l("TYPE","terminate"),this.Ya(e),new xe(this,this.a,this.ra,t,void 0).yg(e)}this.qe()},e.bf=function(t){this.a.debug("connectTest_()"),this.Ja=new He(this,this.a),null===this.N&&this.Ja.ga(this.A);var e=t;this.N&&this.A&&(e=hn(t,this.N,this.A)),this.Ja.connect(e)},e.af=function(){this.a.debug("connectChannel_()"),this.hb=this.Sd(this.K),this.Dc()},e.qd=function(){this.Ja&&(this.Ja.abort(),this.Ja=null),this.u&&(this.u.cancel(),this.u=null),this.ia&&(l.clearTimeout(this.ia),this.ia=null),this.Hb(),this.G.cancel(),this.ea&&(l.clearTimeout(this.ea),this.ea=null)},e.ga=function(t){this.A=t},e.Eg=function(t){this.Rb=t},e.Cg=function(t){this.N=t},e.Dg=function(t){this.aa=t},e.Fe=function(t){this.Kc=t},e.He=function(t){this.Ra=t},e.Hg=function(){this.gc=!0},e.Ee=function(t){this.i=t},e.Nf=function(){return!this.fd},e.Zc=function(t){1e3==this.M.length&&this.a.ca(function(){return"Already have 1000 queued maps upon queueing "+Ft(t)}),this.M.push(new Je(this.ag++,t)),3==this.g&&this.Dc()},e.qf=function(){return this.kf?0:this.nf},e.de=function(){return 0==this.g},e.getState=function(){return this.g},e.Dc=function(){this.G.ee()||this.ea||(this.ea=we(g(this.we,this),0),this.La=0)},e.Yf=function(t){return this.G.xf()>=this.G.Xb-(this.ea?1:0)?(this.a.ca("Unexpected retry request is scheduled."),!1):this.ea?(this.a.debug("Use the retry request that is already scheduled."),this.M=t.la().concat(this.M),!0):!(1==this.g||2==this.g||this.La>=this.qf())&&(this.a.debug("Going to retry POST"),this.ea=we(g(this.we,this,t),this.Xd(this.La)),this.La++,!0)},e.we=function(t){this.ea=null,this.Mg(t)},e.Mg=function(t){this.a.debug("startForwardChannel_"),1==this.g?t?this.a.ca("Not supposed to retry the open"):(this.ig(),this.g=2):3==this.g&&(t?this.le(t):0==this.M.length?this.a.debug("startForwardChannel_ returned: nothing to send"):this.G.ee()?this.a.ca("startForwardChannel_ returned: connection already in progress"):(this.le(),this.a.debug("startForwardChannel_ finished, sent request")))},e.ig=function(){this.a.debug("open_()"),this.Yb=Math.floor(1e5*Math.random());var t=this.Yb++,e=new xe(this,this.a,"",t,void 0),n=this.A;this.Rb&&(n?Q(n=z(n),this.Rb):n=this.Rb),null===this.N&&e.ga(n);var r=this.Hd(e),i=this.hb.clone();i.l("RID",t),0<this.Bd&&i.l("CVER",this.Bd),this.ta&&this.aa&&i.l("X-HTTP-Session-Id",this.aa),this.Ya(i),this.N&&n&&hn(i,this.N,n),this.G.oc(e),this.Nd?(i.l("$req",r),i.l("SID","null"),e.Ag(),e.kd(i,null)):e.kd(i,r)},e.le=function(t){var e=t?t.R:this.Yb++,n=this.hb.clone();n.l("SID",this.ra),n.l("RID",e),n.l("AID",this.Sb),this.Ya(n),this.N&&this.A&&hn(n,this.N,this.A),e=new xe(this,this.a,this.ra,e,this.La+1),null===this.N&&e.ga(this.A),t&&this.sg(t),t=this.Hd(e),e.setTimeout(Math.round(.5*this.Od)+Math.round(.5*this.Od*Math.random())),this.G.oc(e),e.kd(n,t)},e.Ya=function(n){this.i&&Re({},function(t,e){n.l(e,t)})},e.Hd=function(t){var e=Math.min(this.M.length,1e3),n=this.i?g(this.i.Ue,this.i,this):null;return n=this.kc.jf(this.M,e,n),t.Gg(this.M.splice(0,e)),n},e.sg=function(t){this.M=t.la().concat(this.M)},e.Kd=function(){if(!this.u&&!this.ia){this.rc=1;var t=this.ve;jt||Kt(),Qt||(jt(),Qt=!0),Gt.add(t,this),this.Ha=0}},e.Qc=function(){return this.u||this.ia?(this.a.ca("Request already in progress"),!1):!(3<=this.Ha)&&(this.a.debug("Going to retry GET"),this.rc++,this.ia=we(g(this.ve,this),this.Xd(this.Ha)),this.Ha++,!0)},e.ve=function(){this.ia=null,this.Kg()},e.Kg=function(){this.a.debug("Creating new HttpRequest"),this.u=new xe(this,this.a,this.ra,"rpc",this.rc),null===this.N&&this.u.ga(this.A),this.u.He(this.Ra);var t=this.md.clone();t.l("RID","rpc"),t.l("SID",this.ra),t.l("CI",this.fd?"0":"1"),t.l("AID",this.Sb),this.Ya(t),t.l("TYPE","xmlhttp"),this.N&&this.A&&hn(t,this.N,this.A),this.Db&&this.u.setTimeout(this.Db),this.u.jd(t,!0,this.na),this.a.debug("New Request created")},e.ub=function(t,e){this.a.debug("Test Connection Finished");var n=t.Ad;n&&this.G.ld(n),this.fd=this.Se&&e,this.w=t.w,this.af()},e.dd=function(t){this.a.debug("Test Connection Failed"),this.w=t.w,this.sa(2)},e.ue=function(t,e){if(0!=this.g&&(this.u==t||this.G.Jc(t)))if(this.w=t.w,!t.lb&&this.G.Jc(t)&&3==this.g){try{var n=this.kc.zc(e)}catch(t){n=null}u(n)&&3==n.length?this.Cf(n,t):(this.a.debug("Bad POST response data returned"),this.sa(11))}else(t.lb||this.u==t)&&this.Hb(),R(e)||(n=this.kc.zc(e),this.dg(n,t))},e.Cf=function(t,e){0==t[0]?this.Bf(e):(this.he=t[1],0<(e=this.he-this.Sb)&&(t=t[2],this.a.debug(t+" bytes (in "+e+" arrays) are outstanding on the BackChannel"),this.Jg(t)&&!this.wa&&(this.wa=we(g(this.bg,this),6e3))))},e.Bf=function(t){if(this.a.debug("Server claims our backchannel is missing."),this.ia)this.a.debug("But we are currently starting the request.");else{if(this.u){if(!(this.u.qb+3e3<t.qb))return;this.Hb(),this.u.cancel(),this.u=null}else this.a.T("We do not have a BackChannel established");this.Qc(),ve(18)}},e.Jg=function(t){return t<37500&&!this.Nf()&&0==this.Ha},e.$a=function(t){return this.Te?this.i?this.i.$a(t):t:null},e.bg=function(){null!=this.wa&&(this.wa=null,this.u.cancel(),this.u=null,this.Qc(),ve(19))},e.Hb=function(){null!=this.wa&&(l.clearTimeout(this.wa),this.wa=null)},e.Tc=function(t){this.a.debug("Request complete");var e,n,r,i=null;if(this.u==t){this.Hb(),this.u=null;var o=2}else{if(!this.G.Jc(t))return;i=t.la(),this.G.ze(t),o=1}if(this.w=t.w,0!=this.g)if(t.S)1==o?(e=t.Da?t.Da.length:0,n=b()-t.qb,r=this.La,de.dispatchEvent(new be(de,e,n,r)),this.Dc()):this.Kd();else{var a=t.Hc();if(3==a||0==a&&0<this.w)this.a.debug("Not retrying due to error type");else{var s=this;if(this.a.debug(function(){return"Maybe retrying, last error: "+function(t,e){switch(t){case 0:return"Non-200 return code ("+e+")";case 1:return"XMLHTTP failure (no data)";case 2:return"HttpConnection timeout";default:return"Unknown error"}}(a,s.w)}),1==o&&this.Yf(t)||2==o&&this.Qc())return;this.a.debug("Exceeded max number of retries")}switch(i&&0<i.length&&this.G.Re(i),this.a.debug("Error: HTTP request failed"),a){case 1:this.sa(5);break;case 4:this.sa(10);break;case 3:this.sa(6);break;default:this.sa(2)}}},e.Xd=function(t){var e=this.Ve+Math.floor(Math.random()*this.vg);return this.Ba()||(this.a.debug("Inactive channel"),e*=2),e*t},e.pc=function(t){if(this.ta&&(t=t.h)){var e=t.kb("X-Client-Wire-Protocol");e&&this.G.ld(e),this.aa&&((t=t.kb("X-HTTP-Session-Id"))?(this.Fe(t),this.hb.l(this.aa,t)):this.a.T("Missing X_HTTP_SESSION_ID in the handshake response"))}},e.dg=function(t,e){for(var n=this.i&&this.i.sc?[]:null,r=0;r<t.length;r++){var i=t[r];if(this.Sb=i[0],i=i[1],2==this.g)if("c"==i[0]){this.ra=i[1],this.na=this.$a(i[2]);var o=i[3];null!=o&&(this.tc=o,this.a.info("VER="+this.tc)),null!=(o=i[4])&&(this.De=o,this.a.info("SVER="+this.De)),null!=(i=i[5])&&"number"==typeof i&&0<i&&(this.Db=i*=1.5,this.a.info("backChannelRequestTimeoutMs_="+i)),this.pc(e),this.g=3,this.i&&this.i.wd(),this.Lg(e)}else"stop"!=i[0]&&"close"!=i[0]||this.sa(7);else 3==this.g&&("stop"==i[0]||"close"==i[0]?(n&&0!=n.length&&(this.i.sc(this,n),n.length=0),"stop"==i[0]?this.sa(7):this.disconnect()):"noop"!=i[0]&&(n?n.push(i):this.i&&this.i.ud(i)),this.Ha=0)}n&&0!=n.length&&this.i.sc(this,n)},e.Lg=function(t){this.md=this.Pd(this.na,this.K),t.lb?(this.a.debug("Upgrade the handshake request to a backchannel."),this.G.ze(t),t.tg(this.Db),this.u=t):this.Kd()},e.sa=function(t){if(this.a.info("Error code "+t),2==t){var e=null;this.i&&(e=null);var n=g(this.Pg,this);e||(e=new Ue("//www.google.com/images/cleardot.gif"),l.location&&"http"==l.location.protocol||e.tb("https"),e.Ub()),function(t,e){var n=new pe;n.debug("TestLoadImage: loading "+t);var r=new Image;r.onload=v(rn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=v(rn,n,r,"TestLoadImage: error",!1,e),r.onabort=v(rn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=v(rn,n,r,"TestLoadImage: timeout",!1,e),l.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}(e.toString(),n)}else ve(2);this.cg(t)},e.Pg=function(t){t?(this.a.info("Successfully pinged google.com"),ve(2)):(this.a.info("Failed to ping google.com"),ve(1))},e.cg=function(t){this.a.debug("HttpChannel: error - "+t),this.g=0,this.i&&this.i.td(t),this.qe(),this.qd()},e.qe=function(){if(this.g=0,this.w=-1,this.i){var t=this.G.la();if(0!=t.length||0!=this.M.length){var e=this;this.a.debug(function(){return"Number of undelivered maps, pending: "+t.length+", outgoing: "+e.M.length}),this.G.$e(),P(this.M),this.M.length=0}this.i.sd()}},e.Sd=function(t){return t=this.Cd(null,t),this.a.debug("GetForwardChannelUri: "+t),t},e.Pd=function(t,e){return t=this.Cd(this.fc()?t:null,e),this.a.debug("GetBackChannelUri: "+t),t},e.Cd=function(t,e){var n,r,i,o,a,s,u=(n=e)instanceof Ue?n.clone():new Ue(n,void 0);if(""!=u.xa)t&&u.rb(t+"."+u.xa),u.sb(u.Ca);else{var c=l.location;r=c.protocol,i=t?t+"."+c.hostname:c.hostname,o=+c.port,a=e,s=new Ue(null,void 0),r&&s.tb(r),i&&s.rb(i),o&&s.sb(o),a&&s.ec(a),u=s}return this.gb&&j(this.gb,function(t,e){u.l(e,t)}),t=this.aa,e=this.Kc,t&&e&&u.l(t,e),u.l("VER",this.tc),this.Ya(u),u},e.Jb=function(t){if(t&&!this.gc)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new an(this.Xa)).Je(this.gc),t},e.Ba=function(){return!!this.i&&this.i.Ba()},e.fc=function(){return this.gc},(e=dn.prototype).sc=null,e.wd=function(){},e.ud=function(){},e.td=function(){},e.sd=function(){},e.Ba=function(){return!0},e.Ue=function(){},e.$a=function(t){return t},yn.prototype.cf=function(t,e){return new mn(t,e)},w(mn,Lt),(e=mn.prototype).addEventListener=function(t,e,n,r){mn.L.addEventListener.call(this,t,e,n,r)},e.removeEventListener=function(t,e,n,r){mn.L.removeEventListener.call(this,t,e,n,r)},e.open=function(){this.b.Ee(this.vd),this.Og&&this.b.Hg(),this.b.connect(this.Qg,this.yb,this.Rc||void 0)},e.close=function(){this.b.disconnect()},e.send=function(t){if(s(t)){var e={};e.__data__=t,this.b.Zc(e)}else this.zg?((e={}).__data__=Ft(t),this.b.Zc(e)):this.b.Zc(t)},e.F=function(){this.b.Ee(null),delete this.vd,this.b.disconnect(),delete this.b,mn.L.F.call(this)},w(gn,ke),w(vn,De),w(bn,dn),bn.prototype.wd=function(){fe(this.b.s,"WebChannel opened on "+this.b.yb),this.b.dispatchEvent("a")},bn.prototype.ud=function(t){this.b.dispatchEvent(new gn(t))},bn.prototype.td=function(t){fe(this.b.s,"WebChannel aborted on "+this.b.yb+" due to channel error: "+t),this.b.dispatchEvent(new vn(t))},bn.prototype.sd=function(){fe(this.b.s,"WebChannel closed on "+this.b.yb),this.b.dispatchEvent("b")};var wn=v(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},yn);function Sn(){this.V=[],this.Z=[]}function En(t,e){if(T.call(this),this.oe=t||0,this.Wb=e||10,this.oe>this.Wb)throw Error(Tn);this.fa=new Sn,this.oa=new Xe,this.Ac=0,this.Nc=null,this.Cb()}(e=Sn.prototype).Vf=function(){0==this.V.length&&(this.V=this.Z,this.V.reverse(),this.Z=[])},e.enqueue=function(t){this.Z.push(t)},e.ab=function(){return this.Vf(),this.V.pop()},e.C=function(){return this.V.length+this.Z.length},e.X=function(){return 0==this.V.length&&0==this.Z.length},e.clear=function(){this.V=[],this.Z=[]},e.contains=function(t){return 0<=I(this.V,t)||0<=I(this.Z,t)},e.remove=function(t){var e=this.V,n=k(e,t);return(e=0<=n&&(Array.prototype.splice.call(e,n,1),!0))||A(this.Z,t)},e.H=function(){for(var t=[],e=this.V.length-1;0<=e;--e)t.push(this.V[e]);var n=this.Z.length;for(e=0;e<n;++e)t.push(this.Z[e]);return t},w(En,T);var Tn="[goog.structs.Pool] Min can not be greater than max";function _n(t,e){this.fe=t,this.gd=e}function Cn(t){this.Y=[],t&&this.Lf(t)}function In(){Cn.call(this)}function kn(t,e){this.Gd=void 0,this.cc=new In,En.call(this,t,e)}function Dn(t,e,n,r){this.Jf=t,this.Ab=!!r,kn.call(this,e,n)}(e=En.prototype).Mb=function(){var t=b();if(!(null!=this.Nc&&t-this.Nc<this.Ac)){var e=this.qg();return e&&(this.Nc=t,this.oa.add(e)),e}},e.og=function(t){return!!this.oa.remove(t)&&(this.nc(t),!0)},e.qg=function(){for(var t;0<this.Td()&&(t=this.fa.ab(),!this.Sc(t));)this.Cb();return!t&&this.C()<this.Wb&&(t=this.xc()),t},e.nc=function(t){this.oa.remove(t),this.Sc(t)&&this.C()<this.Wb?this.fa.enqueue(t):this.Bc(t)},e.Cb=function(){for(var t=this.fa;this.C()<this.oe;)t.enqueue(this.xc());for(;this.C()>this.Wb&&0<this.Td();)this.Bc(t.ab())},e.xc=function(){return{}},e.Bc=function(t){if("function"==typeof t.bb)t.bb();else for(var e in t)t[e]=null},e.Sc=function(t){return"function"!=typeof t.Ye||t.Ye()},e.contains=function(t){return this.fa.contains(t)||this.oa.contains(t)},e.C=function(){return this.fa.C()+this.oa.C()},e.rf=function(){return this.oa.C()},e.Td=function(){return this.fa.C()},e.X=function(){return this.fa.X()&&this.oa.X()},e.F=function(){if(En.L.F.call(this),0<this.rf())throw Error("[goog.structs.Pool] Objects not released");delete this.oa;for(var t=this.fa;!t.X();)this.Bc(t.ab());delete this.fa},_n.prototype.getKey=function(){return this.fe},_n.prototype.clone=function(){return new _n(this.fe,this.gd)},(e=Cn.prototype).ce=function(t,e){var n=this.Y;n.push(new _n(t,e)),this.$f(n.length-1)},e.Lf=function(t){if(t instanceof Cn){var e=t.W();if(t=t.H(),this.C()<=0){for(var n=this.Y,r=0;r<e.length;r++)n.push(new _n(e[r],t[r]));return}}else e=W(t),t=V(t);for(r=0;r<e.length;r++)this.ce(e[r],t[r])},e.remove=function(){var t=this.Y,e=t.length,n=t[0];if(!(e<=0))return 1==e?x(t):(t[0]=t.pop(),this.Zf()),n.gd},e.Zf=function(){for(var t=0,e=this.Y,n=e.length,r=e[t];t<n>>1;){var i=this.tf(t),o=this.zf(t);if(i=o<n&&e[o].getKey()<e[i].getKey()?o:i,e[i].getKey()>r.getKey())break;e[t]=e[i],t=i}e[t]=r},e.$f=function(t){for(var e=this.Y,n=e[t];0<t;){var r=this.wf(t);if(!(e[r].getKey()>n.getKey()))break;e[t]=e[r],t=r}e[t]=n},e.tf=function(t){return 2*t+1},e.zf=function(t){return 2*t+2},e.wf=function(t){return t-1>>1},e.H=function(){for(var t=this.Y,e=[],n=t.length,r=0;r<n;r++)e.push(t[r].gd);return e},e.W=function(){for(var t=this.Y,e=[],n=t.length,r=0;r<n;r++)e.push(t[r].getKey());return e},e.va=function(e){return N(this.Y,function(t){return t.getKey()==e})},e.clone=function(){return new Cn(this)},e.C=function(){return this.Y.length},e.X=function(){return 0==this.Y.length},e.clear=function(){x(this.Y)},w(In,Cn),In.prototype.enqueue=function(t,e){this.ce(t,e)},In.prototype.ab=function(){return this.remove()},w(kn,En),(e=kn.prototype).Mb=function(t,e){if(!t)return(t=kn.L.Mb.call(this))&&this.Ac&&(this.Gd=l.setTimeout(g(this.Nb,this),this.Ac)),t;this.cc.enqueue(void 0!==e?e:100,t),this.Nb()},e.Nb=function(){for(var t=this.cc;0<t.C();){var e=this.Mb();if(!e)break;t.ab().apply(this,[e])}},e.nc=function(t){kn.L.nc.call(this,t),this.Nb()},e.Cb=function(){kn.L.Cb.call(this),this.Nb()},e.F=function(){kn.L.F.call(this),l.clearTimeout(this.Gd),this.cc.clear(),this.cc=null},w(Dn,kn),Dn.prototype.xc=function(){var n=new an,t=this.Jf;return t&&t.forEach(function(t,e){n.headers.set(e,t)}),this.Ab&&n.Je(!0),n},Dn.prototype.Sc=function(t){return!t.Ka&&!t.Ba()},yn.prototype.createWebChannel=yn.prototype.cf,mn.prototype.send=mn.prototype.send,mn.prototype.open=mn.prototype.open,mn.prototype.close=mn.prototype.close,Se.NO_ERROR=0,Se.TIMEOUT=8,Se.HTTP_ERROR=6,Ee.COMPLETE="complete",(_e.EventType=Ie).OPEN="a",Ie.CLOSE="b",Ie.ERROR="c",Ie.MESSAGE="d",Lt.prototype.listen=Lt.prototype.nb,Dn.prototype.getObject=Dn.prototype.Mb,Dn.prototype.releaseObject=Dn.prototype.og,an.prototype.listenOnce=an.prototype.Oc,an.prototype.getLastError=an.prototype.Hc,an.prototype.getLastErrorCode=an.prototype.Ud,an.prototype.getStatus=an.prototype.za,an.prototype.getStatusText=an.prototype.Yd,an.prototype.getResponseJson=an.prototype.yf,an.prototype.getResponseText=an.prototype.ya,an.prototype.getResponseText=an.prototype.ya,an.prototype.send=an.prototype.send;var Nn={createWebChannelTransport:wn,ErrorCode:Se,EventType:Ee,WebChannel:_e,XhrIoPool:Dn},xn=Nn.createWebChannelTransport,An=Nn.ErrorCode,On=Nn.EventType,Pn=Nn.WebChannel,Rn=Nn.XhrIoPool;Mn.default=Nn}.call(this,Ln(31))}]]);
//# sourceMappingURL=vendors~index.js.map